RUNTAL BRASIL (11) 2626-4645

Controlador Programável MPC4004
Ref. 3-0019.210
Manual Rev. 2.10 Agosto/2001

ATOS AUTOMAÇÃO INDUSTRIAL LTDA.
Rua Arnoldo Felmanas, 201
Vila Friburgo - São Paulo – SP
CEP 04774-010
Departamento Comercial:
Tel: (011) 5521 5044 - Fax: (011) 5522 5089
e-mail: comercial@atos.com.br
Fábrica / Assistência Técnica / Engenharia:
Tel: (011) 5522 1944 - Fax: (011) 246 9194
e-mail: atos@atos.com.br
Call Center: (011) 5522 1944 - Ramal: 111
e-mail: suportec@atos.com.br
ATOS na Internet: http://www.atos.com.br

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 1

Este manual não pode ser reproduzido, total ou parcialmente, sem autorização por escrito da ATOS.
Seu conteúdo tem caráter exclusivamente técnico/informativo e a ATOS se reserva no direito, sem
qualquer aviso prévio, de alterar as informações deste documento.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 2

A ATOS AUTOMAÇÃO INDUSTRIAL LTDA. assegura ao comprador deste produto, garantia contra
qualquer defeito de material ou de fabricação, que nele apresentar no prazo de 360 dias contados a partir
da emissão da nota fiscal de venda.
A ATOS AUTOMAÇÃO INDUSTRIAL LTDA. restringe sua responsabilidade à substituição de peças
defeituosas, desde que o critério de seu Departamento de Assistência Técnica, se constate falha em
condições normais de uso. A garantia não inclui a troca gratuita de peças ou acessórios que se desgastem
naturalmente com o uso, cabos, chaves, conectores externos e relés. A garantia também não inclui
fusíveis, baterias e memórias regraváveis tipo EPROM.
A ATOS AUTOMAÇÃO INDUSTRIAL LTDA. declara a garantia nula e sem efeito se este produto sofrer
qualquer dano provocado por acidentes, agentes da natureza, uso em desacordo com o manual de
instruções, ou por ter sido ligado à rede elétrica imprópria, sujeita a flutuações excessivas, ou com
interferência eletromagnética acima das especificações deste produto. A garantia será nula se o
equipamento apresentar sinais de ter sido consertado por pessoa não habilitada e se houver remoção e/ou
alteração do número de série ou etiqueta de identificação.
A ATOS AUTOMAÇÃO INDUSTRIAL LTDA. somente obriga-se a prestar os serviços referidos neste
termo de garantia em sua sede em São Paulo - SP, portanto, compradores estabelecidos em outras
localidades serão os únicos responsáveis pelas despesas e riscos de transportes (ida e volta).

• Serviço de Suporte ATOS
A ATOS conta com uma equipe de engenheiros e representantes treinados na própria fábrica e oferece a
seus clientes um sistema de trabalho em parceria para especificar, configurar e desenvolver software
usuário e soluções em automação e presta serviços de aplicações e start-up.
A ATOS mantém ainda o serviço de assistência técnica em toda a sua linha de produtos, que é prestado
em suas instalações.
Com o objetivo de criar um canal de comunicação entre a ATOS e seus usuários, criamos um serviço
denominado CALL CENTER. Este serviço centraliza as eventuais dúvidas e sugestões, visando a
excelência dos produtos e serviços comercializados pela ATOS.
CALL CENTER
De Segunda a Sexta-feira
Das 7:30 às 12:00 h e das 13:00 às 17:30 h
(011) 5522 1944 - Ramal: 111
E_mail: suportec@atos.com.br
Para contato com a ATOS utilize o endereço e telefones mostrados na primeira página deste Manual.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 3

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 4

Índice
1. INTRODUÇÃO...........................................................................................................................11
• Características Gerais do MPC4004 .................................................................................................. 11

2. COMPONENTES DA SÉRIE .....................................................................................................13
Descrição Geral dos Módulos................................................................................................................................. 13
Acessórios .............................................................................................................................................................. 14
Bastidores ............................................................................................................................................................... 14
Módulos de Processamento ................................................................................................................................... 15
Módulos de Fontes de Alimentação ....................................................................................................................... 16
Módulos de Expansão Digital ................................................................................................................................. 16
Módulo Multiplex ..................................................................................................................................................... 16
Módulos de Leitura de Temperatura....................................................................................................................... 17
Módulos de Expansão E / S Analógicas................................................................................................................. 17
Módulos Analógicos Compactos (MAC) ................................................................................................................. 17
Módulos de Contagem Rápida ............................................................................................................................... 18
Módulos Conversores RS232/RS485 Isolados ...................................................................................................... 18
Módulos Amplificadores para válvula proporcional ................................................................................................ 18
Módulo de energia .................................................................................................................................................. 18
Interfaces Homem Máquina (IHM).......................................................................................................................... 19
Configurações Possíveis ........................................................................................................................................ 20

• Especificações Elétricas .................................................................................................................... 21

Entradas Digitais
(Corrente Contínua) ............................................................................................................... 21
Saídas Digitais (Corrente Contínua) .................................................................................................................. 21
Entradas Digitais
(Corrente Alternada) .............................................................................................................. 22
Saídas Digitais (Corrente Alternada).................................................................................................................. 22
Módulo Multiplex ..................................................................................................................................................... 23
Temperatura ........................................................................................................................................................... 23
Entradas / Saídas Analógicas................................................................................................................................. 23
Módulo Conversor RS232/RS485 Isolado - 2232.00R e 4004.71R ....................................................................... 24
Amplificador para válvula proporcional – 1901.00 / 1901.00M e 4004.73 / 4004.73M .......................................... 25
Fonte de alimentação 24Vcc / 3A - 2240.03 .......................................................................................................... 25
Fonte de alimentação 24Vcc / 5A - 2240.05 .......................................................................................................... 25
Módulo de Energia 4004.45.................................................................................................................................... 25

• Estrapeamento no Módulo de Processamento................................................................................. 26
• Estrapeamento para Endereçamento das Expansões Digitais ....................................................... 26
• Estrapeamento para Endereçamento das Expansões de Temperatura.......................................... 26
• Estrapeamento para Endereçamento das Expansões Analógicas ................................................. 26
• Estrapeamento para Entrada Analógica ........................................................................................... 27
• Estrapeamento para Saída Analógica ............................................................................................... 28
• Estrapeamento para Endereçamento das Analógicas Compactas (MAC)...................................... 28
• Estrapeamento para Entrada Analógica Compacta ......................................................................... 29
• Estrapeamento para o Módulo Contagem Rápida (4004.87 e 4004.87SA) ...................................... 30
• Estrapeamento para módulos conversores RS232/RS485 .............................................................. 30
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 5

Índice
• Estrapeamento para módulo de energia........................................................................................... 30
• Esquemas de Ligações para os Módulos da série MPC4004 .......................................................... 31

3. MAPEAMENTO DE MEMÓRIA ................................................................................................ 53
• Introdução........................................................................................................................................... 53
Mapeamento de Memória dos Módulos de Processamento.................................................................................. 53
Descrição dos Estados Internos de 0000 até 03FF ............................................................................................... 54

• Botoeiras e LEDs presentes nas Interfaces ..................................................................................... 57

Visão geral ............................................................................................................................................................. 57
Mapeamento de memória ...................................................................................................................................... 57

• Entradas Digitais ................................................................................................................................ 57

Visão geral ............................................................................................................................................................. 57
Mapeamento de memória ...................................................................................................................................... 57

• Saídas Digitais.................................................................................................................................... 58

Visão geral ............................................................................................................................................................. 58
Mapeamento de memória ...................................................................................................................................... 58
Utilizando o aplicativo SUP .................................................................................................................................... 58

• Temporizadores e Contadores .......................................................................................................... 59

Visão geral ............................................................................................................................................................. 59
Mapeamento de memória ...................................................................................................................................... 59

• Temporizadores (0,001s).................................................................................................................... 60

Visão geral ............................................................................................................................................................. 60
Mapeamento de memória ...................................................................................................................................... 60

• Multiplex.............................................................................................................................................. 61

Visão geral ............................................................................................................................................................. 61
Utilizando o aplicativo SUP .................................................................................................................................... 61

• E/S Analógicas

Canais 1 a 16 ......................................................................................................... 63

Visão geral ............................................................................................................................................................. 63
Mapeamento de memória ...................................................................................................................................... 63
Utilizando o aplicativo SUP .................................................................................................................................... 63

• Módulo Analógico Compacto (MAC)................................................................................................. 67

Visão geral ............................................................................................................................................................. 67
Mapeamento de memória ...................................................................................................................................... 67
Utilizando o aplicativo SUP .................................................................................................................................... 68

• Módulo 4004.85 (PT100 a 3 fios)....................................................................................................... 69

Visão geral ............................................................................................................................................................. 69
Mapeamento de memória ...................................................................................................................................... 69
Utilizando o aplicativo SUP .................................................................................................................................... 69

• Temperatura........................................................................................................................................ 70

Visão geral ............................................................................................................................................................. 70
Mapeamento de memória ...................................................................................................................................... 70
Utilizando o aplicativo SUP .................................................................................................................................... 70
Funções Especiais para o Controle de Temperatura ............................................................................................ 72
Controle através do algoritmo PID ......................................................................................................................... 74
Instrução PID.......................................................................................................................................................... 76
Valores iniciais de controle..................................................................................................................................... 77

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 6

Índice
• Contadores Rápidos........................................................................................................................... 79

Visão geral .............................................................................................................................................................. 79
Mapeamento de memória....................................................................................................................................... 80

• Force.................................................................................................................................................... 81

Visão geral .............................................................................................................................................................. 81
Utilizando o aplicativo SUP..................................................................................................................................... 81

• Alarmes ............................................................................................................................................... 81

Visão geral .............................................................................................................................................................. 81
Utilizando o aplicativo SUP..................................................................................................................................... 82

• Registros ............................................................................................................................................. 83

Visão geral .............................................................................................................................................................. 83
Mapeamento de memória....................................................................................................................................... 83

• Programa de interrupção I e II ........................................................................................................... 84

Programa de Interrupção I...................................................................................................................................... 84
Programa de Interrupção II..................................................................................................................................... 84

• Canais de Comunicação Serial .......................................................................................................... 85

Visão Geral ............................................................................................................................................................. 85
Taxa de transmissão canal A (RS232) ................................................................................................................... 85
Número da máquina na rede canal A (RS232) ...................................................................................................... 85
Taxa de transmissão canal B (RS485) ................................................................................................................... 85
Número da máquina na rede canal B (RS485) ...................................................................................................... 85
Taxa de transmissão da instrução Print ................................................................................................................. 85
Utilizando o aplicativo SUP..................................................................................................................................... 86

• Gravação do programa de usuário em FLASH EPROM ................................................................... 87

Utilizando o aplicativo SUP..................................................................................................................................... 87

• Módulo 4004.45 (módulo de energia) ............................................................................................... 89

Visão geral .............................................................................................................................................................. 89
Fórmulas relacionadas as medições: .................................................................................................................... 89
Mapeamento de memória....................................................................................................................................... 90
Utilizando o aplicativo SUP..................................................................................................................................... 92

4. APLICAÇÕES ESPECIAIS COM O CONTROLADOR MPC4004 ............................................93
• Simulador de ângulo .......................................................................................................................... 93

Visão geral .............................................................................................................................................................. 93
Mapeamento de memória....................................................................................................................................... 93

• Contador Rápido (Presente no Módulo de Processamento) ........................................................... 93

Visão geral .............................................................................................................................................................. 93
Mapeamento de memória....................................................................................................................................... 95
Utilizando o aplicativo SUP..................................................................................................................................... 97

• Motor de Passo ................................................................................................................................... 97

Visão geral .............................................................................................................................................................. 97
Estados internos e registros relacionados.............................................................................................................. 97
Interligação física com o controlador programável (válido para módulos tipo “N”) ................................................ 99
Esquema de ligação ............................................................................................................................................... 99

• Envio de caracteres através do canal serial (instrução Print) ....................................................... 100
Objetivo................................................................................................................................................................. 100
Estados internos relacionados.............................................................................................................................. 100

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 7

Índice
• Leitura de caracteres através do canal serial................................................................................. 100

Objetivo ................................................................................................................................................................ 100
Registros e estados internos relacionados .......................................................................................................... 100
Utilizando o aplicativo SUP .................................................................................................................................. 101

•

Comunicação background .......................................................................................................... 102

Objetivo ................................................................................................................................................................ 102
Estados internos relacionados: ........................................................................................................................... 102
Utilizando o aplicativo SUP .................................................................................................................................. 103

5. INTERFACES COM TECLADO E DISPLAY .......................................................................... 105
Utilizando o aplicativo SUP .................................................................................................................................. 105

• Descrição de funcionamento das interfaces numéricas ............................................................... 111

Visão geral ........................................................................................................................................................... 111
Telas de edição .................................................................................................................................................... 111
Tecla de auxílio à manutenção ............................................................................................................................ 111
Tecla de bloqueio de teclado ............................................................................................................................... 112
Utilizando o aplicativo SUP .................................................................................................................................. 113
Descrição do funcionamento da função RECEITA (arquivo de moldes) ............................................................. 114
Utilizando o aplicativo SUP .................................................................................................................................. 115

• Descrição de funcionamento do frontal 2002.97/M........................................................................ 116

Visão geral ........................................................................................................................................................... 116
Funcionamento da Tecla Senha .......................................................................................................................... 117
Utilizando o aplicativo SUP .................................................................................................................................. 118

• Descrição das Telas com formato padrão ...................................................................................... 119

Tela de Auxílio à Manutenção.............................................................................................................................. 119

• Programação das Telas ................................................................................................................... 120
Implementação de Valores Máximos nos Campos de Edição de 4 Dígitos ........................................................ 120

• Chave na Posição Prog.................................................................................................................... 121

Descrição das Funções........................................................................................................................................ 121

6. DIMENSÕES........................................................................................................................... 123
• Dimensões dos bastidores da Série MPC4004............................................................................... 123
• Dimensões dos bastidores utilizados nos acessórios MPC4004.................................................. 124

7. COMUNICAÇÃO SERIAL ...................................................................................................... 125
• Cabos de ligação para os canais seriais ........................................................................................ 125

Cabo de Ligação em RS232 (PC ó MPC4004).................................................................................................. 125
Cabo de Ligação em RS485 (Rede para MPC4004)........................................................................................... 126
Características elétricas do cabo para padrão RS485 ........................................................................................ 126
Cabo de Ligação em RS485 (a curta distância com o PC) ................................................................................. 127
Cabo de ligação para RS485 com IHM séries 1620 e 1720.24/26...................................................................... 128
Cabo de ligação para RS232 com terminal séries 1755...................................................................................... 129
Cabo de Ligação em RS232 (MODEM ó MPC4004)......................................................................................... 130
Proteção Contra Descarga Eletromagnética:....................................................................................................... 130

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 8

Índice
• Recursos disponíveis nos canais de comunicação MPC4004 ...................................................... 133

Apr03: ................................................................................................................................................................... 133
Modbus : .............................................................................................................................................................. 133
Utilizando a instrução Print :............................................................................................................................. 134
Utilizando o escuta canal serial ....................................................................................................................... 134
Apr03 modo Mestre ........................................................................................................................................... 134
Utilizando o protocolo Modbus......................................................................................................................... 134

APÊNDICE A - MENSAGENS.....................................................................................................135
• Mensagens ........................................................................................................................................ 135

APÊNDICE B – RESUMO DE CONSUMO DOS MÓDULOS......................................................137
• Resumo da disponibilidade de corrente nas fontes da série MPC4004........................................ 139

APÊNDICE C - HISTÓRICO DOS FIRMWARES ........................................................................141
• Histórico dos firmwares ................................................................................................................... 141

APÊNDICE D - RESUMO DAS INSTRUÇÕES PARA SÉRIE MPC4004 ...................................145

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 9

Índice

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 10

Capítulo 1 - Introdução

1. Introdução
MPC4004 é uma série de microcontroladores programáveis incorporando além das tradicionais funções de
relés, temporizadores e contadores, um avançado conjunto de instruções tais como operações aritméticas
(+, -, x, ÷), comparações, transferência de dados, transferências de blocos de dados, conversões BCD
para binário, binário para BCD, calendário, impressão de dados, Jump, Call, etc.
Os módulos de processamento incorporam dois canais seriais de comunicação, sendo um no padrão
RS232 e o outro no padrão RS485, tanto para comunicação local para troca de dados como para
programação de usuário.

• Características Gerais do MPC4004
Tensão de alimentação nominal

: 93 a 250 Vca , 50/60 Hz
ou
: 110 ou 220 Vca ± 10 %, 50/60 Hz ou
: 36 a 60 Vcc
ou
: 10 a 36 Vcc
ou
: 18 a 60 Vcc

Falta momentânea de energia permissível

: máximo 50 ms

Isolação Óptica

: 1.500 Vca entre alimentação ou
terminal de E/S e terra

Temperatura de Armazenagem

: -20 a +70 °C

Temperatura de Operação

: 0 a +55 °C

Umidade

: 0 a 95% (sem condensação)

Vibração

: 5 a 50 Hz / 0,625 G
(0,1 mm pico a pico)

Imunidade a ruído

: Conforme Nema Standard ICS2-230

Imunidade à descarga eletrostática

: Conforme IEC 801-2

Indicadores LED

: entradas (verde); saídas (vermelho)
: STS (vermelho);

Método de Programação

: Diagrama de relés

Conjunto de Instruções

: DWARE

Interface Homem-Máquina

: Frontal de teclado/display LCD

Capacidade de Programação

: 12 K bytes

Tempo de Varredura

: 6 ms/K (típico)
: 5ms/K p/ CPU com processador XA

Estados Internos

: 1.024

Temporizadores / Contadores

: 32 (controlados pelo firmware: resolução de 0,01s)
: 02 (controlados pelo firmware: resolução de 0,001s)

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 11

Capítulo 1 - Introdução
Registros Internos

: 1.536

Interface de Comunicação

: Padrão RS232 / RS485

Proteção contra queda de energia

: 30 dias p/ memória RAM
através de capacitor GOLD
ou 10 anos com memória NVRAM.

Autodiagnóstico

: Erro de programa de usuário
e falha na memória RAM/NVRAM

A Fig. 1 apresenta uma visão geral dos módulos da série MPC4004:

Fig. 1.- Vista geral dos módulos da série MPC4004.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 12

Capítulo 2 – Componentes da Série

2. Componentes da Série
Descrição Geral dos Módulos
Modelo

Descrição

4004.01
4004.02
4004.05E
4004.06E
4004.09
4004.09E
4004.11
4004.11/L
4004.12
4004.12/L
4004.21
4004.22
4004.24
4004.26
4004.28
4004.2A
4004.31
4004.32
4004.33
4004.34
4004.35
4004.35/A
4004.37
4004.39
4004.40
4004.40/A

CPU 8E/8S 24VCC “N” NVRAM E FLASH
CPU 8E/8S 24VCC “P” NVRAM E FLASH
CPU XA 8E/8S 24VCC “N” 64K RAM E FLASH
CPU XA 8E/8S 24VCC “P” 64K RAM E FLASH
CPU 8E 24VCC “N” ou “P” / 8S RELE RAM E FLASH
CPU XA 8E 24VCC “N” ou “P” / 8S RELE 64K RAM E FLASH
CPU COM 8E/8S 24VCC “N” RAM E FLASH
CPU COM 8E/8S 24VCC “N” RAM E FLASH
CPU COM 8E/8S 24VCC “P” RAM E FLASH
CPU COM 8E/8S 24VCC “P” RAM E FLASH
BASTIDOR COM 01 SLOT
BASTIDOR COM 02 SLOTS
BASTIDOR COM 04 SLOTS
BASTIDOR COM 06 SLOTS
BASTIDOR COM 08 SLOTS
BASTIDOR COM 10 SLOTS
MÓDULO DE EXPANSÃO COM 16S 24VCC “N”
MÓDULO DE EXPANSÃO COM 16S 24VCC “P”
MÓDULO DE EXPANSÃO COM 16E 24VCC “N”
MÓDULO DE EXPANSÃO COM 16E 24VCC “P”
MÓDULO DE EXPANSÃO COM 8E 110Vca
MÓDULO DE EXPANSÃO COM 8E 220Vca
MÓDULO DE EXPANSÃO COM 8S RELE
MÓDULO DE EXPANSÃO COM 8S 90 a 240 Vca
FONTE DE ALIMENTAÇÃO CHAVEADA AC/CC
FONTE DE ALIMENTAÇÃO CHAVEADA ENTRADA 24Vcc / SAÍDA 5Vcc / +12Vcc / 12Vcc
FONTE DE ALIMENTAÇÃO LINEAR +5Vcc
FONTE DE ALIMENTAÇÃO LINEAR +5Vcc / +12Vcc / -12Vcc
FONTE DE ALIMENTAÇÃO CHAVEADA ENTRADA 48Vcc / SAÍDA +5Vcc / +12Vcc / 12Vcc / +24Vcc
FONTE DE ALIMENTAÇÃO CHAVEADA AC/CC / SAÍDA +5Vcc
FONTE DE ALIMENTAÇÃO CHAVEADA ENTRADA 18 a 60Vcc / SAÍDA +5Vcc / +12Vcc /
-12Vcc / +24Vcc
MÓDULO DE ENERGIA
MÓDULO DE EXPANSÃO COM 8E/8S 24VCC “N”
MÓDULO DE EXPANSÃO COM 8E/8S 24VCC “P”
MÓDULO DE EXPANSÃO COM 16E/16S 24VCC “N”
MÓDULO DE EXPANSÃO COM 16E/16S 24VCC “P”
MÓDULO DE EXPANSÃO COM 32E 24VCC “N”
MÓDULO DE EXPANSÃO COM 32E 24VCC “P”
MÓDULO DE EXPANSÃO COM 8E 24VCC “N” ou “P” / 8S RELE
MÓDULO DE EXPANSÃO COM 16E 24VCC “N” ou “P” / 16S RELE
MÓDULO DE EXPANSÃO ANALÓGICA 2E/2S
MÓD. EXP. 2E (TENSÃO ou CORRENTE) e 2S (CORRENTE) ANALÓGICAS
MÓD. EXP. 2E (TENSÃO ou CORRENTE) e 2S (TENSÃO 0 a +10Vcc ou ±10Vcc)
ANALÓGICAS
MÓDULO DE EXPANSÃO ANALÓGICA 4E/4S
MÓD. EXP. 4E (TENSÃO ou CORRENTE) e 4S (CORRENTE) ANALÓGICAS
MÓD. EXP. 4E (TENSÃO ou CORRENTE) e 4S (TENSÃO 0 a +10Vcc ou ±10Vcc)
ANALÓGICAS
MÓDULO DE EXPANSÃO 8E ANALÓGICAS (TENSÃO ou CORRENTE)
MÓDULO DE EXPANSÃO 4E ANALÓGICAS (TENSÃO ou CORRENTE)

4004.40/B
4004.40/C
4004.40/D
4004.40/F
4004.40/G
4004.45
4004.51
4004.52
4004.53
4004.54
4004.55
4004.56
4004.57
4004.58
4004.60
4004.60/A
4004.60N
4004.61
4004.61/A
4004.61N
4004.62
4004.62/M

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 13

Capítulo 2 – Componentes da Série
Modelo

Descrição

4004.63
4004.63/M
4004.64
4004.64/M
4004.65/J
4004.65/K
4004.66/J
4004.66/K
4004.70
4004.71R
4004.73
4004.73M
4004.74
4004.75/P
4004.75P1
4004.75P2
4004.76/P
4004.76P1
4004.76P2
4004.85
4004.85P2
4004.87
4004.87SA
4004.90
4004.92
4004.92S1
4004.94
4004.94S1
4004.95
4004.98
4004.98/S
4004.98S1
4004.99
4004.99/S
4004.99S1

MÓDULO DE EXPANSÃO 8S ANALÓGICAS (TENSÃO)
MÓDULO DE EXPANSÃO 4S ANALÓGICAS (TENSÃO)
MÓDULO DE EXPANSÃO 8S ANALÓGICAS (CORRENTE)
MÓDULO DE EXPANSÃO 4S ANALÓGICAS (CORRENTE)
MÓDULO DE 4 CANAIS DE TEMPERARURA “J”
MÓDULO DE 4 CANAIS DE TEMPERARURA “K”
MÓDULO DE 8 CANAIS DE TEMPERARURA “J”
MÓDULO DE 8 CANAIS DE TEMPERARURA “K”
MÓDULO DE EXPANSÃO BOTÕES E SINALIZAÇÃO
UNIDADE CONVERSORA ISOLADA RS232/RS485 C/ PROTEÇÃO
MÓDULO AMPLIFICADOR PARA VÁLVULA PROPORCIONAL 4 CANAIS p/ MPC4004
MÓDULO AMPLIFICADOR PARA VÁLVULA PROPORCIONAL 2 CANAIS p/ MPC4004
MÓDULO MODEM p/ MPC4004 (POSSUI MANUAL ESPECÍFICO)
o
MÓDULO DE 4 CANAIS PT100 3 FIOS “0 a 200 C”
o
MÓDULO DE 4 CANAIS PT100 3 FIOS “-50 a 50 C”
o
MÓDULO DE 4 CANAIS PT100 3 FIOS “-50 a 150 C”
o
MÓDULO DE 8 CANAIS PT100 3 FIOS “0 a 200 C”
o
MÓDULO DE 8 CANAIS PT100 3 FIOS “-50 a 50 C”
o
MÓDULO DE 8 CANAIS PT100 3 FIOS “-50 a 150 C”
o
MÓD. 4 CANAIS PT100 (3FIOS) “0 a 200 C” e 4E 0-10V ou 0-20mA
o
MÓD. 4 CANAIS PT100 (3FIOS) “-50 a 150 C” e 4E 0-10V ou 0-20mA
MÓDULO DE EXPANSÃO CONTAGEM RÁPIDA
MÓD. EXP. CONTAGEM RÁPIDA C/ 2 SAÍDAS ANALÓGICAS
FRONTAL P/ MPC4004 2x20 LCD NEGATIVO (FRONTAL PLÁSTICO)
FRONTAL P/ MPC4004 4x20 LCD (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 LCD (com moldura sem FRD)
FRONTAL P/ MPC4004 4x20 LCD DIG. GDE (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 LCD DIG. GDE (com moldura sem FRD)
FRONTAL P/ MPC4004 4x20 LCD (FRONTAL PLÁSTICO)
FRONTAL P/ MPC4004 4x20 LCD (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 LCD (sem FRD)
FRONTAL P/ MPC4004 4x20 LCD (com moldura sem FRD)
FRONTAL P/ MPC4004 4x20 VFD (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 VFD (sem FRD)
FRONTAL P/ MPC4004 4x20 VFD (com moldura sem FRD)

Acessórios
1901.00
1901.00M
2232.00R
2240.03
2240.05
2250.00
CRS232415

MÓDULO AMPLIFICADOR PARA VÁLVULA PROPORCIONAL 4 CANAIS
MÓDULO AMPLIFICADOR PARA VÁLVULA PROPORCIONAL 2 CANAIS
CONVERSOR RS232/RS485 ISOLADO c/ PROTEÇÃO
FONTE CHAVEADA ENTRADA 90-240VAC / SAÍDA 24Vdc 3A
FONTE CHAVEADA ENTRADA : 93 a 135Vca ou 187 a 260Vca / SAÍDA 24Vdc 5A
MÓDULO MODEM (POSSUI MANUAL ESPECÍFICO)
CABO DE COMUNICAÇÃO PC ←→ MPC4004

Bastidores
Bastidor
4004.21
4004.22
4004.24
4004.26
4004.28
4004.2A

Número de Ranhuras
01
02
04
06
08
10

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 14

Capítulo 2 – Componentes da Série

Módulos de Processamento
Código

Entradas

Saídas

4004.01

8 E tipo N

8 S tipo N

4004.02

8 E tipo P

8 S tipo P

4004.05E (1)

8 E tipo N

8 S tipo N

4004.06E (1)

8 E tipo P

8 S tipo P

4004.09

8 E tipo N ou P

8 S (Relé)

4004.09E (1)

8 E tipo N ou P

8 S (Relé)

4004.11

8 E tipo N

8 S tipo N

4004.12

8 E tipo P

8 S tipo P

4004.11/L

8 E tipo N

8 S tipo N

4004.12/L

8 E tipo P

8 S tipo P

Memória
usuário
32K NVRAM

Relógio
calendário
Sim

Comunicação
serial
RS232/RS485

32K NVRAM

Sim

RS232/RS485

64K RAM com
capacitor Gold
64K RAM com
capacitor Gold
32K RAM com
capacitor Gold
64K RAM com
capacitor Gold
32K RAM com
capacitor Gold
32K RAM com
capacitor Gold
32K RAM com
capacitor Gold
32K RAM com
capacitor Gold

Sim

RS232/RS485

Sim

RS232/RS485

Não

RS232/RS485

Sim

RS232/RS485

Não

RS232/RS485

Não

RS232/RS485

Não

RS232

Não

RS232

(1) CPU com processador XA.

Diferença entre os módulos 4004.11 e 4004.12 e os módulos 4004.11/L e 4004.12/L
Características
Taxa de Baud rate variável
Freqüência do Contador rápido
Velocidade de Processamento (relativo)
Boot de usuário em memória FLASH
Corrente máxima para as saídas
Número de canais de comunicação serial
Unidades de expansão analógicas
Programa de interrupção I e II
Frontais 2002.90 /2000.90
Encoder bidirecional
Expansões digitais
Frontais numéricos

4004.11 e 4004.12
Sim
3Khz
5x
Sim
2A
2
Sim
Sim
Sim
Sim
120 E 120S
Sim

4004.11L e 4004.12L
Sim
2Khz
1x
Sim
2A
1 (RS232)
Não
Não
Sim
Não
24E 24S (2 EXP)
Não

Observações:
Os modelos 4004.11/L e 4004.12/L por não endereçarem expansões analógicas podem utilizar a fonte
4004.40B (mais econômica).
Existe driver específico para estes modelos, o driver a ser utilizado deve ser o MPC4004L.
O driver é semelhante ao driver do MPC4004, porém o mesmo bloqueia funções não implementadas para
o MPC4004L evitando assim que o usuário não perca tempo tentando usar funções não disponíveis.
Para os modelos MPC4004.11/L e MPC4004.12/L só é possível configurar duas expansões de 8E/8S;
Portanto não é possível configurar uma expansão com 16 E/16S.
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 15

Capítulo 2 – Componentes da Série

Módulos de Fontes de Alimentação
Fonte de Alimentação
Fonte de Alimentação
Chaveada
Linear
4004.40 (1)
93 Vca a 250 Vca
4004.40A
9 Vcc a 36 Vcc
4004.40B (2)
110 Vca/220 Vca
4004.40C
110 Vca/220 Vca
4004.40D (1)
36 Vcc a 60 Vcc
4004.40F
93 Vca a 250 Vca
4004.40G (1)
18 Vcc a 60 Vcc
(1) Disponibilidade de tensão de +24 Vcc / 500 mA para o usuário.
(2) Não pode ser utilizado em aplicações que utilizam módulos analógicos.
IMPORTANTE: Os módulos de temperatura devem estar do lado oposto da fonte de alimentação para
evitar interferência de leitura em seus canais.
Modelo

Módulos de Expansão Digital
Corrente Contínua:
Modelo
4004.31
4004.32
4004.33
4004.34
4004.51
4004.52
4004.53
4004.54
4004.55
4004.56

Entrada
16 E tipo N
16 E tipo P
8 E tipo N
8 E tipo P
16 E tipo N
16 E tipo P
32 E tipo N
32 E tipo P

Saída
16 S tipo N
16 S tipo P
8 S tipo N
8 S tipo P
16 S tipo N
16 S tipo P

Corrente Alternada:
Modelo
Entrada
Saída
4004.35
8 E (110 Vca)
4004.35A
8 E (220 Vca)
4004.37 (1)
8 S (Relé)
4004.39
8 S (Triac)
(1) Possibilidade de Saída em Corrente Contínua (+24 Vcc)

Corrente contínua e alternada:
Modelo
4004.57
4004.58

Entrada
8 E tipo “P” ou “N”
16 E tipo “P” ou “N”

Saída
8 S (Relé)
16 S (Relé)

Botões
32

LED’s
32

Módulo Multiplex
Modelo
4004.70
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 16

Capítulo 2 – Componentes da Série

Módulos de Leitura de Temperatura
Modelo

Tipo

Nº de Canais

Temperatura

Nº de Fios

4004.65/J
Termopar tipo J
04
0 °C a 500 °C
4004.66/J
Termopar tipo J
08
0 °C a 500 °C
4004.65/K
Termopar tipo K
04
0 °C a 1200 °C
4004.66/K
Termopar tipo K
08
0 °C a 1200 °C
4004.75/P
RTD tipo Pt100
04
0 °C a 200 °C
03
4004.75/P2
RTD tipo Pt100
04
-50 °C a +150 °C
03
4004.76/P
RTD tipo Pt100
08
0 °C a 200 °C
03
4004.76/P2
RTD tipo Pt100
08
-50 °C a +150 °C
03
(1)
4004.85
RTD tipo Pt100
04
0 °C a 200 °C
03
4004.85/P2 (1)
RTD tipo Pt100
04
-50 °C a +150 °C
03
(1) Disponibilidade de 4 canais de entrada analógica (0 a 10 V ou 0 a 20 mA)
IMPORTANTE: Os módulos de temperatura devem estar do lado oposto da fonte de alimentação para
evitar interferência de leitura em seus canais.

Módulos de Expansão E / S Analógicas
Modelo
Entrada/Saída
4004.60
(1)
2E/2S
4004.61
(1)
4E/4S
4004.60/A
(2)
2E/2S
4004.61/A
(2)
4E/4S
4004.60N
(3)
2E/2S
4004.61N
(3)
4E/4S
(1) Saída em tensão
(2) Saída em corrente
(3) Saída em tensão (0 a +10Vcc ou ±10Vcc c/ estrape interno)

Módulos Analógicos Compactos (MAC)
Módulos de Expansão de Entrada Analógica:
Modelo
4004.62
4004.62/M

Entrada
8E
4E

Módulos de Expansão de Saída Analógica:
Modelo
4004.63
(1)
4004.63/M
(1)
4004.64
(2)
4004.64/M
(2)
(1) Saída em Tensão
(2) Saída em Corrente

Saída
8S
4S
8S
4S

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 17

Capítulo 2 – Componentes da Série

Módulos de Contagem Rápida
Nº de Canais
de Contagem
4004.87
02
4004.87SA
(1)
02
(1) Possui 2 saídas analógicas
Modelo

Máxima Freqüência
100 kHz
100 kHz

Módulos Conversores RS232/RS485 Isolados
Conversor RS232/RS485, isolado com controle de transmissão pelo sinal TXD ou pelo sinal RTS da
RS232 (configurável através de jumper).
Modelo
2232.00R
4004.71R

Diferenças entre os módulos
Montado em bastidor do MPC4004 de 1 passo
Usado como unidade avulsa do MPC4004

O módulo 4004.71R ocupa 1 (um) slot de um bastidor do MPC4004.
O módulo 2232.00R é formado por um bastidor de 1 (um) passo e um módulo 4004.

Módulos Amplificadores para válvula proporcional
Estes módulos controlam diretamente 2 ou até 4 válvulas proporcionais. Os módulos possuem
amplificadores que convertem proporcionalmente sinais de entrada, que variam de 0 a +10 Vcc, em
corrente através do solenóide das válvulas.
Modelo
1901.00
1901.00M
4004.73
4004.73M

Diferenças entre os módulos
Montado em bastidor do MPC4004 de 1 passo
Usado como unidade avulsa do MPC4004

O módulo 4004.73 ocupa 1 (um) slot de um bastidor do MPC4004.
O módulo 1901.00 é formado por um bastidor de 1 (um) passo 4004.21 e um módulo 4004.73

Módulo de energia
O módulo 4004.45 foi idealizado para atender aplicações direcionadas ao controle e análise de
parâmetros elétricos trifásicos.
Integrado a série MPC4004 sobre a forma de um módulo microprocessado, o novo módulo possibilita
aplicações dedicadas ao controle de energia ou aplicações integradas, que também requeiram a
monitoração de parâmetros elétricos.
O usuário tem a sua disposição, todas as unidades digitais e analógicas presentes na série MPC4004
podendo assim incrementar o controle dos processos que envolvem a medição de parâmetros elétricos.
Baseado nas novas CPU’s de 16 bits (4004.05E, 4004.06E e 4004.09E), é possível integrar até 02
módulos 4004.45.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 18

Capítulo 2 – Componentes da Série

Interfaces Homem Máquina (IHM)
Modelo

Teclado

2000.90/M

8 Teclas

2002.90/M

8 Teclas

2002.95/M

Numérico

2002.96
(gabinete plástico)

Numérico

2002.97/M

Numérico

4004.90

(2)

Numérico

4004.92 (1)

(2)

Numérico

4004.94 (1)

(2)

Numérico

4004.95

Numérico

4004.98

Numérico

4004.99
(1)
(2)

(2)

Numérico

Display
LCD (2 x 20)
com backlight
LCD (2 x 20)
com backlight
LCD (2 x 20)
com backlight
LCD (2 x 20)
com backlight
LCD (4 x 20)
com backlight
LCD (2 x 20)
negativo
com backlight
LCD (4 x 20)
com backlight
LCD (4 x 20)
com backlight
LCD (4 x 20)
com backlight
LCD (4 x 20)
com backlight
VFD (4 x 20)

Nº de Botões
Tecla F Tecla K

Nº de LED’s
de sinalização

-

-

-

08

-

08

04

10

04

12

10

12

04

10

04

-

-

06

04

10

04

12

10

12

-

-

06

12

10

12

12

10

12

Display de Dígito Grande (9x5mm)
Ao utilizar tais frontais, o módulo de fonte de alimentação usado em conjunto deve ser somente
fonte chaveada, devido ao consumo.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 19

Capítulo 2 – Componentes da Série

Configurações Possíveis
O MPC4004 aceita unidades de E/S digitais ou E/S analógicas com as seguintes combinações:
Item
Número Máximo
Módulos no Bastidor
10
Entrada Analógica
(1)
16
Saída Analógica
(1)
16
Canal de Temperatura
16
Entrada Digital
120
Saída Digital
120
Canal de Contagem Rápida (100 kHz)
02
Canal de Contagem Rápida (3 kHz)
(2)
01
(1) Ao utilizar somente os Módulos Analógicos Compactos (MAC) obtém-se o número
máximo de 32 Entradas ou 32 Saídas Analógicas.
(2) Presente no Módulo de Processamento
Importante:
O primeiro módulo é obrigatoriamente um módulo de processamento com 8 E/8 S digitais e o último
módulo é obrigatoriamente a fonte de alimentação.
O número máximo de Módulos Analógicos é 04, sendo possível misturar os dois modelos (Módulo de
Expansão E/S Analógicas e Módulo Analógico Compacto – MAC).
Obedecer ao número máximo de expansões para os seguintes módulos:
• Temperaturas
=2
• Multiplex
=1
• 4004.85/4004.85P2 =1
• 4004.87/4004.87SA =1
• 4004.45
=2 (somente com CPU XA)

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 20

Capítulo 2 – Componentes da Série

• Especificações Elétricas
Entradas Digitais

(Corrente Contínua)

Tensão de trabalho
Nível de comutação "ON"
Nível de comutação "OFF"
Tempo de comutação
"ON" para "OFF"
Tempo de comutação
"OFF" para "ON"
Corrente de entrada
Isolação ótica do sistema

Tipo N
+24 Vcc (-20% / +40%)
< 7 Vcc
> 15 Vcc

Tipo P
+24 Vcc (-20% / +40%)
> 15 Vcc
< 7 Vcc

< 1 ms

< 1 ms

< 1 ms

< 1 ms

< 10 mA por entrada
1.500 V

< 10 mA por entrada
1.500 V

Entrada tipo N: a comutação é executada quando um dispositivo externo fornece 0 Vcc à entrada digital.
Entrada tipo P: a comutação é executada quando um dispositivo externo fornece 24 Vcc à entrada digital.

Saídas Digitais

(Corrente Contínua)

Tensão de trabalho
Máxima corrente de carga
Máxima corrente de pico
Corrente de fuga "OFF"
Tensão máxima "ON"
Tempo de comutação
"ON" para "OFF"
Tempo de comutação
"OFF" para "ON"
Isolação ótica do sistema

Tipo N
24 Vcc (-30% / +40%)
2A
10 A (t <0,3ms)
< 700 µA
1,5 Vcc

Tipo P
24 Vcc (-30% / +40%)
2A
10 A (t <0,3ms)
< 700 µA
1,5 Vcc

< 1 ms

< 1 ms

< 1 ms

< 1 ms

1.500 V

1.500 V

Saída tipo N: quando a comutação é executada, as cargas recebem o potencial de 0 Vcc da fonte de
alimentação. Portanto, o comum das cargas deve estar ligado ao potencial de +24 Vcc da fonte de
alimentação.
Saída tipo P: quando a comutação é executada, as cargas recebem o potencial de +24 Vcc da fonte de
alimentação. Portanto, o comum das cargas deve estar ligado ao potencial de 0 Vcc da fonte de
alimentação.
Importante:
Usar no máximo 04 saídas ligadas simultaneamente para cada grupo de 08 saídas.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 21

Capítulo 2 – Componentes da Série

Entradas Digitais

(Corrente Alternada)

Máxima corrente de entrada "ON"
(por entrada)
Tempo de comutação
"ON" para "OFF"
Tempo de comutação
"OFF" para "ON"
Isolação ótica do sistema

Saídas Digitais

5 mA (4004.35 – 110 Vca)
10 mA (4004.35A – 220 Vca)
< 20 ms
< 20 ms
1.500 V

(Corrente Alternada)

Saída a Relé (4004.37)

Contato Seco – NA
S0 a S4
– Saídas Independentes
S5,S6 e S7 – Saída com um comum
+24 Vcc / 240 Vca
2A
< 10 ms
1.500 V
+24 Vcc (-20% / +10%)/120 mA

Tipo de contato
Máxima tensão de comutação
Máxima corrente por saída
Atraso na comutação
Isolação ótica do sistema
Fonte de Alimentação Externa
Saída a Relé (4004.57)
Tipo de contato
Máxima tensão de comutação
Máxima corrente por saída
Atraso na comutação
Isolação ótica do sistema
Fonte de Alimentação Externa
Resistência inicial de contato p/
saídas
Saída a Relé (4004.58)
Tipo de contato
Máxima tensão de comutação
Máxima corrente por saída
Atraso na comutação
Isolação ótica do sistema
Fonte de Alimentação Externa
Resistência inicial de contato p/
saídas

Contato Seco – NA
S0 a S3 – Saídas com um comum
S4 a S7 – Saídas com um comum
+24Vcc / 240 Vca
2A
< 10ms
1.500 V
+24 Vcc (-20% / +40%) / 120 mA
30mΩ

Contato Seco – NA
S0 a S3 – Saídas com um comum
S4 a S7 – Saídas com um comum
S8 a SB – Saídas com um comum
SC a SF – Saídas com um comum
+24Vcc / 240 Vca
2A
< 10ms
1.500 V
+24 Vcc (-20% / +40%) / 120 mA

Saída a Triac (4004.39)
Tensão de comutação
Freqüência de comutação
Máxima corrente por saída
Corrente de fuga "OFF"
Isolação ótica do sistema
MPC4004 / Manual rev. 2.10 / Agosto - 2001

30mΩ

90 a 240 Vca (+/- 5%)
50/60 Hz (+/- 5%)
2A
< 5 mA
1.500 V
-

Página 22

Capítulo 2 – Componentes da Série

Módulo Multiplex
Isolação ótica do sistema
Fonte de Alimentação Externa

1.500 V
+24 Vcc (-20% / +40%)/100 mA

Temperatura
Termopar tipo J
Temperatura
Impedância de entrada
Linearização
Resolução

0 a 500 ºC
> 20 kΩ
Através de software
<0,3 ºC
±0,5 % do fundo de escala
Com PID 1,6s
Através do barramento (interno)

Exatidão

Tempo de Resposta
Fonte de Alimentação
Termopar tipo K
Temperatura
Impedância de entrada
Linearização
Resolução
Tempo de Resposta
Fonte de Alimentação

0 a 1200 ºC
> 20 kΩ
Através de software
<1 ºC
±0,5 % do fundo de escala
Com PID 1,6s
através do barramento (interno)

Termoresistência PT100 3 Fios
Temperatura
Corrente de excitação
Resolução
Exatidão
Drift temperatura
Tempo de Resposta
Fonte de Alimentação

0 a 200 ºC ou -50 ºC a +150 ºC
1 mA
0,1 ºC
±0,3 °C
0,03 °C/°C
1 varredura
através do barramento (interno)

Exatidão

Importante:
Para PT100 os valores acima são garantidos para impedância de cabo < ou = 100Ω.

Entradas / Saídas Analógicas
Entradas Analógicas:
Sinal de entrada em tensão
Impedância de entrada em tensão
Sinal de entrada em corrente
Impedância de entrada em corrente
Resolução
Tempo de Resposta
Fonte de Alimentação

0 a +10 Vcc
> 40 kΩ
0 a 20 mA
500 Ω
12 bits sendo:
2,5 mV para tensão
5,0 µA para corrente
uma varredura
através do barramento (interno)

Importante:
A opção por entrada em tensão ou corrente é feita através de estrapes.
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 23

Capítulo 2 – Componentes da Série

Saídas Analógicas:
Saída em Tensão
Sinal de saída em tensão
Impedância de saída em tensão
Resolução
Exatidão
Tempo de Resposta
Fonte de Alimentação

0 a +10 Vcc
< 200 Ω
12 bits (2,5 mV)
±0,25% (fundo de escala)
uma varredura
através do barramento (interno)

Saída em Corrente
Sinal de saída em corrente
Máxima impedância da carga
Resolução
Exatidão
Tempo de Resposta
Fonte de Alimentação

0 a 20 mA
500 Ω
12 bits (5 µA)
±0,25% (fundo de escala)
uma varredura
através do barramento (interno)

Saída em Tensão (4004.60N e 4004.61N)
Sinal de saída em tensão
0 a +10Vcc ou ± 10Vcc
Impedância de saída em tensão
< 200Ω
12 bits para saída unipolar (0 a +10Vcc)
Resolução
11 bits para saída bipolar (± 10Vcc)
0,5% máx. (F.E.) para saída unipolar
Exatidão
1,0% máx. (F.E.) para saída bipolar
Tempo de Resposta
uma varredura
Fonte de Alimentação
Através do barramento (interno)
Importante:
A opção por saída de 0 a 10Vcc ou ± 10Vcc é feita através de estrapes.
Saída em Tensão (4004.87SA)
Sinal de saída em tensão
Impedância de saída em tensão
Resolução
Erro de conversão
Máxima impedância da carga
Fonte de Alimentação

-9,5 a +9,5Vcc
< 200Ω
12 bits (5mV)
< 10mV
500Ω
Através do barramento (interno)

Módulo Conversor RS232/RS485 Isolado - 2232.00R e 4004.71R
Tensão de Alimentação
Controle de Transmissão
Sinalização dos Sinais RX e TX

110Vca ou 220Vca
RXD/RTS da RS232
Através de LED’s no frontal do módulo

OBS.: A alimentação do módulo é selecionada através de chave no interior da unidade;
Os modelos 2232.00R e 4004.71R possuem proteção contra descargas atmosféricas.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 24

Capítulo 2 – Componentes da Série

Amplificador para válvula proporcional – 1901.00 / 1901.00M e 4004.73 / 4004.73M
Tensão de Alimentação (Vs)
Sinal de Entrada (Vin)
Impedância de Entrada (Zin)
Resistência da Solenóide (Rs)
Faixa de ajuste de Corrente Mínima (Imín)
Corrente Máxima (Imáx)
Faixa de ajuste Freq.de Dither (FDither)
Faixa de ajuste Amplitude de Dither (ADither)
Proteção contra inversão de polaridade

20 a 35 Vcc
0 a +10 Vcc
180 kΩ típico.
Rs < (Vs – 5 Vcc) / Imáx.
0 a > 30 % de Imáx
3 A (depende de Vs e Rs)
100 a 300 Hz (trimpot interno)
0 a aprox. 30% de Imáx (depende de Vs e Rs)
Fusível 500mA (F1)

Fonte de alimentação 24Vcc / 3A - 2240.03
TENSÃO DE ALIMENTAÇÃO
TENSÃO DE SAÍDA CC
FILTRO INTERNO RF
TEMP. DE TRABALHO
ISOLAÇÃO

90 a 240Vca (50 ou 60Hz)
+24Vcc / 3A
Tipo duplo "pi"
0 a +50°C
2000V entre entrada/saída; entrada/chassis
500V entre saída/chassis

Fonte de alimentação 24Vcc / 5A - 2240.05
TENSÃO DE ALIMENTAÇÃO

93 a 135Vca (jumper no frontal fechado)
ou
187 a 260Vca (jumper no frontal aberto)
47 a 63Hz em ambas as tensões.

TENSÃO DE SAÍDA CC
FILTRO INTERNO RF
TEMP. DE TRABALHO
ISOLAÇÃO

+24Vcc / 5A
Tipo duplo "pi"
0 a +40°C
2000V entre entrada/saída; entrada/chassis
500V entre saída/chassis

Módulo de Energia 4004.45
Tensão nominal
Freqüência
Corrente nominal
Corrente máxima de pico
Precisão
Isolação galvânica
Esquema de ligação

17 ~ 280V entre Fase x Fase
10 ~ 160V entre Fase x Neutro
47 ~ 65Hz
0,1 ~ 5 A
10A
0,5 % do fundo de escala
2500V
Estrela a quatro fios

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 25

Capítulo 2 – Componentes da Série

• Estrapeamento no Módulo de Processamento
PLACA

ESTRAPE

101.2806 “P”
101.2807 “N”
101.2874. “N” / “P” /Relé

ST2

POSIÇÃO
A
B
A
B

ST3

FUNÇÃO
Encoder unidirecional
Encoder bidirecional
Encoder bidirecional
Encoder unidirecional

Default: bidirecional

• Estrapeamento para Endereçamento das Expansões Digitais
A série MPC4004, permite ao usuário definir até 07 expansões digitais, além de 8E/8S presentes no
Módulo de Processamento.
A posição do jumper de endereçamento (ST1) é fornecida pelo aplicativo SUP, durante a configuração do
hardware a ser utilizado.
O jumper ST1 é definido como sendo de posições de A até H, sendo que a posição A é reservada para o
endereçamento do Módulo de Processamento.
A primeira expansão declarada receberá a posição B, a segunda posição C, e assim sucessivamente até
estarem completas as 7 expansões possíveis.
Importante:
O usuário deverá antes de energizar o equipamento, conferir o mapa de jumper constante da listagem
do programa com o endereçamento físico das placas.

• Estrapeamento para Endereçamento das Expansões de Temperatura
ESTRAPE

POSIÇÃO
E (*)
H

ST2

FUNÇÃO
Canais 1 a 8
Canais 9 a 16

(*) Posição Default
- máximo de 2 módulos por bastidor

• Estrapeamento para Endereçamento das Expansões Analógicas
A série MPC4004, permite ao usuário definir até 04 Módulos de Entradas/Saídas Analógicas.
Assim, na utilização destes módulos deve-se fazer a seguinte configuração através de estrape, também é
demonstrado o Mapeamento de Memória das entradas e saídas:
UNIDADE

ESTRAPE (ST2)

E1 a E4 - S1 a S4
E5 a E8 - S5 a S8
E9 a E12 - S9 a S12
E13 a E16 - S13 a S16

A (*)
B
C
D

(*) Posição Default

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Mapeamento de Memória
Entrada
Saída
05F0h – 05F7h
06E0h – 06E7h
05F8h – 05FFh
06E8h – 06EFh
05D0h – 05D7h 06D0h – 06D7h
05D8h – 05DFh 06D8h – 06DFh

Página 26

Capítulo 2 – Componentes da Série

• Estrapeamento para Entrada Analógica
Os Módulos de Expansão com Entradas Analógicas podem ser configurados em tensão ou corrente.
A opção deve ser feita através dos estrapes internos mostrados abaixo:
4004.60 e 4004.61
PLACA
100.2850
100.2859

CANAL
E1
E2
E3
E4

ST4
ST3
ST1
ST2

ESTRAPE
A - Corrente B - Tensão
A - Corrente B - Tensão
A - Corrente B - Tensão
A - Corrente B - Tensão

ST4
ST3
ST1
ST2

ESTRAPE
A - Corrente B - Tensão
A - Corrente B - Tensão
A - Corrente B - Tensão
A - Corrente B - Tensão

Default: entrada em tensão.

4004.60/A e 4004.61/A
PLACA
CANAL
E1
100.2853
E2
E3
100.2855
E4
Default: entrada em tensão.

4004.60N e 4004.61N
PLACA
CANAL
E1
ST4
100.2848
E2
ST3
E3
ST1
100.2849
E4
ST2

A/C – Corrente (250Ω)
A/C – Corrente (250Ω)
A/C – Corrente (250Ω)
A/C – Corrente (250Ω)

ESTRAPE
A/D – Corrente (500Ω)
A/D – Corrente (500Ω)
A/D – Corrente (500Ω)
A/D – Corrente (500Ω)

B/D - Tensão
B/D - Tensão
B/D - Tensão
B/D - Tensão

Os Módulos de Leitura de Temperatura - 4004.85 e 4004.85/P2 também possuem 04 canais de entrada
analógica, podendo ser configurada em tensão ou corrente.
A opção deve ser realizada através dos estrapes internos:
PLACA
100.2857
100.2862

CANAL
E1
E2
E3
E4
ENDEREÇO

ST2

ESTRAPE
ST4
A - Corrente B – Tensão
ST3
A - Corrente B – Tensão
ST2
A - Corrente B – Tensão
ST1
A - Corrente B – Tensão
F – Posição fixa p/ utilização do módulo

Default: entrada em corrente.
- máximo de 1 módulo por bastidor.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 27

Capítulo 2 – Componentes da Série

• Estrapeamento para Saída Analógica
PLACA

ESTRAPE
ST5
ST6
ST7
ST8

POSIÇÃO
A

FUNÇÃO
SAÍDA ANALÓGICA (S1) EM TENSÃO 0 A 10V

B

SAÍDA ANALÓGICA (S1) EM TENSÃO ± 10V

ST9
ST10

A

SAÍDA ANALÓGICA (S2) EM TENSÃO 0 A 10V

B

SAÍDA ANALÓGICA (S2) EM TENSÃO ± 10V

ST11

A

SAÍDA ANALÓGICA 1 CONFIGURADA PARA 0 A +10Vcc

B

SAÍDA ANALÓGICA 1 CONFIGURADA PARA ±10Vcc

A

SAÍDA ANALÓGICA 2 CONFIGURADA PARA 0 A +10Vcc

B

SAÍDA ANALÓGICA 2 CONFIGURADA PARA ±10Vcc

A

SAÍDA ANALÓGICA 3 CONFIGURADA PARA 0 A +10Vcc

B

SAÍDA ANALÓGICA 3 CONFIGURADA PARA ±10Vcc

A

SAÍDA ANALÓGICA 4 CONFIGURADA PARA 0 A +10Vcc

B

SAÍDA ANALÓGICA 4 CONFIGURADA PARA ±10Vcc

100.2848
ST12
ST13
ST14

PLACA

100.2849

ESTRAPE
ST3
ST4
ST5
ST6
ST7
ST8

POSIÇÃO

FUNÇÃO

A

SAÍDA ANALÓGICA (S3) EM TENSÃO 0 A 10V

B

SAÍDA ANALÓGICA (S3) EM TENSÃO ± 10V

A

SAÍDA ANALÓGICA (S4) EM TENSÃO 0 A 10V

B

SAÍDA ANALÓGICA (S4) EM TENSÃO ± 10V

• Estrapeamento para Endereçamento das Analógicas Compactas (MAC)
A série MPC4004, permite ao usuário definir até 04 Módulos de Analógicas Compactas.
Assim, na utilização destes módulos deve-se fazer a seguinte configuração através de estrape, também é
demonstrado o Mapeamento de Memória das entradas e saídas:
UNIDADE

ESTRAPE (ST1)

Primeira Expansão
Segunda Expansão
Terceira Expansão
Quarta Expansão

A (*)
B
C
D

(*) Posição Default

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Mapeamento de Memória
Se for Entrada
Se for Saída
0800h – 080Fh
0840h – 084Fh
0810h – 081Fh
0850h – 085Fh
0820h – 082Fh
0860h – 086Fh
0830h – 083Fh
0870h – 087Fh

Página 28

Capítulo 2 – Componentes da Série
Os Módulos Analógicos Compactos podem ser definidos somente como entrada ou saída. Observe que o
Mapeamento de Memória depende da ordem das expansões.
Para uma melhor compreensão veja alguns exemplos:
UNIDADE

ESTRAPE (ST1)

Primeira Expansão
Segunda Expansão
Terceira Expansão
Quarta Expansão

A
B
C
D

UNIDADE

ESTRAPE (ST1)

Primeira Expansão
Segunda Expansão
Terceira Expansão
Quarta Expansão

A
B
C
D

Entrada ou
Saída
E01 a E08
E09 a E12
S01 a S08
S09 a S12

Mapeamento de
Memória
0800h – 080Fh
0810h – 0817h
0860h – 086Fh
0870h – 0877h

Entrada ou
Saída
E01 a E08
S01 a S08
E09 a E16
S09 a S16

Mapeamento de
Memória
0800h – 080Fh
0850h – 0857h
0820h – 082Fh
0870h – 087Fh

• Estrapeamento para Entrada Analógica Compacta
As Entradas Analógicas dos Módulos Analógicos Compactos podem ser configuradas em tensão ou
corrente.
A opção deve ser feita através dos estrapes internos mostrados abaixo:
4004.62 e 4004.62/M (versão antiga)
PLACA
CANAL
E1
E2
E3
E4
100.2840.1
E5
E6
E7
E8

ST2
ST3
ST4
ST5
ST6
ST7
ST8
ST9

STRAPE
A - Corrente B - Tensão
A - Corrente B - Tensão
A - Corrente B - Tensão
A - Corrente B - Tensão
A - Corrente B – Tensão
A - Corrente B – Tensão
A - Corrente B – Tensão
A - Corrente B - Tensão

Default: entrada em tensão.

4004.62 e 4004.62/M (versão nova)
PLACA
CANAL
ESTRAPE
E1
ST2
D/B – Corrente (250Ω) C/A – Corrente (500Ω)
E2
ST3
D/B – Corrente (250Ω) C/A – Corrente (500Ω)
E3
ST4
D/B – Corrente (250Ω) C/A – Corrente (500Ω)
E4
ST5
D/B – Corrente (250Ω) C/A – Corrente (500Ω)
100.2840.2
E5
ST6
D/B – Corrente (250Ω) C/A – Corrente (500Ω)
E6
ST7
D/B – Corrente (250Ω) C/A – Corrente (500Ω)
E7
ST8
D/B – Corrente (250Ω) C/A – Corrente (500Ω)
E8
ST9
D/B – Corrente (250Ω) C/A – Corrente (500Ω)

A/B - Tensão
A/B - Tensão
A/B - Tensão
A/B - Tensão
A/B - Tensão
A/B - Tensão
A/B – Tensão
A/B - Tensão

Default: entrada em tensão.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 29

Capítulo 2 – Componentes da Série

• Estrapeamento para o Módulo Contagem Rápida (4004.87 e 4004.87SA)
PLACA

ESTRAPE

POSIÇÃO
A
B (*)
A
B (*)
A
B (*)
A (*)
B

ST1
ST8 (2) e ST9 (1)

101.2860

ST10 (2) e ST11 (1)
ST12 (2) e ST13 (1)

FUNÇÃO
Encoder +5 Vcc
Encoder +12 Vcc
Encoder unidirecional
Encoder bidirecional
Entrada P
Entrada N
Saída N
Saída P

(1) Contador Rápido 1
(2) Contador Rápido 2
(*) Posição Default

-

máximo de 1 módulo por bastidor.

• Estrapeamento para módulos conversores RS232/RS485
Os Módulos Conversores 2232.00R e 4004.71R podem ter a transmissão controlada pelo sinal TX ou
RTS da RS232.
A opção deve ser feita através do estrape interno mostrado abaixo:
PLACA

ESTRAPE

101.2873

ST1

POSIÇÃO
A (*)
B

FUNÇÃO
Controle de Transmissão via TX da RS232
Controle de Transmissão via RTS da RS232

(*) Posição default
Obs. O controle de transmissão por RTS só é usado em softwares que disponibilizam este sinal,
sendo que na maioria das aplicações o controle da direção do fluxo das informações é feito pelo
próprio sinal de "TX".

• Estrapeamento para módulo de energia
A posição do jumper de endereçamento (ST1) é fornecida pelo aplicativo SUP, durante a configuração do
hardware a ser utilizado.
ESTRAPE

POSIÇÃO
A (*)
B
C
D
ST1
E
F
G
H
(*) Posição default

FUNÇÃO
ENDEREÇAMENTO A PARA MÓDULO DE ENERGIA
ENDEREÇAMENTO B PARA MÓDULO DE ENERGIA
ENDEREÇAMENTO C PARA MÓDULO DE ENERGIA
ENDEREÇAMENTO D PARA MÓDULO DE ENERGIA
ENDEREÇAMENTO E PARA MÓDULO DE ENERGIA
ENDEREÇAMENTO F PARA MÓDULO DE ENERGIA
ENDEREÇAMENTO G PARA MÓDULO DE ENERGIA
ENDEREÇAMENTO H PARA MÓDULO DE ENERGIA

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 30

Capítulo 2 – Componentes da Série

• Esquemas de Ligações para os Módulos da série MPC4004
Os esquemas de ligações para os Módulos de Processamento, bem como para os módulos de expansão
são mostrados nas próximas figuras.
MÓDULOS DE ALIMENTAÇÃO

Fig. 2.- Módulo de Alimentação 4004.40

Módulo de Alimentação 4004.40A

Os módulos fonte de alimentação 4004.40B e
4004.40C podem ser ligados em 220Vca ou 110Vca
dependendo da configuração da ligação do primário
do transformador. Esta configuração é feita na placa
de circuito impresso destas unidades.
As ligações são mostradas na figura a seguir:

Tensão [Vca]
220
110

Fusível [A]
0,25
0,50

Tabela 1 - Seleção do fusível de
alimentação

Fig. 3. - Módulo de Alimentação 4004.40B e 4004.40C

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 31

Capítulo 2 – Componentes da Série

TENSÃO AUXILIAR
PARA USO EXTERNO
+24Vcc/500mA max.

ALIMENTAÇÃO
36 A 60 Vcc

+24Vcc
0Vcc

+48Vcc
0Vcc

4004.40D

Fig. 4. - Módulo de Alimentação 4004.40D

Módulo de Alimentação 4004.40F

Fig. 5. - Módulo de Alimentação 4004.40G

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 32

Capítulo 2 – Componentes da Série
MÓDULOS DE PROCESSAMENTO

Fig. 6. - Módulos de Processamento
4004.01, 4004.05E e 4004.11
8 E tipo N e 8 S tipo N.

Módulos de Processamento
4004.02, 4004.06E e 4004.12
8 E tipo P e 8 S tipo P

Fig. 7. - Módulo de Processamento 4004.09 e 4004.09E

Módulo de Processamento 4004.09 e 4004.09E

Esquema de ligações externas para entradas tipo “N”

Esquema de ligações externas para entradas tipo “P”

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 33

Capítulo 2 – Componentes da Série
MÓDULOS DE EXPANSÃO DIGITAL (CORRENTE CONTÍNUA)

Fig. 8. Módulo de Expansão 4004.31
16 S tipo N.

Módulo de Expansão 4004.32
16 S tipo P

Fig. 9. - Módulo de Expansão 4004.33
16 E tipo N.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

Módulo de Expansão 4004.34
16 E tipo P

-

Página 34

Capítulo 2 – Componentes da Série

Fig. 10. - Módulo de Expansão 4004.51
8 E tipo N e 8 S tipo N.

Fig. 11. Módulo de Expansão 4004.53
16 E tipo N e 16 S tipo N.

Módulo de Expansão 4004.52
8 E tipo P e 8 S tipo P

Módulo de Expansão 4004.54
16 E tipo P e 16 S tipo P

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 35

Capítulo 2 – Componentes da Série

Fig. 12. Módulo de Expansão 4004.55
32 E tipo N

Módulo de Expansão 4004.56
32 E tipo P

MÓDULOS DE EXPANSÃO DIGITAL (Entrada Digital tipo “N” ou “P” e saída a Relé)

Fig. 13. Módulo de Expansão 4004.57

Módulo de Expansão 4004.57

Esquema de ligações externas para entradas tipo “N”

MPC4004 / Manual rev. 2.10 / Agosto - 2001

Esquema de ligações externas para entradas tipo “P”

-

Página 36

Capítulo 2 – Componentes da Série

Fig. 14. Módulo de Expansão 4004.58
Esquema de ligações externas para entradas tipo “N”

Fig. 15. Módulo de Expansão 4004.58

Esquema de ligações externas para entradas tipo “P”.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 37

Capítulo 2 – Componentes da Série
MÓDULOS DE EXPANSÃO DIGITAL (CORRENTE ALTERNADA)

Fig. 16.- Módulo de Expansão 4004.35
Módulo de Expansão 4004.35A

8 E (110 Vca)
8 E (220 Vca)

Fig. 17. Módulo de Expansão 4004.37
8 S a Relé

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Módulo de Expansão 4004.39
8 S a Triac

Página 38

Capítulo 2 – Componentes da Série
MÓDULO MULTIPLEX

Matriz de até 32
LEDs / Botões

Fig. 18.- Módulo Multiplex 4004.70

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 39

Capítulo 2 – Componentes da Série
MÓDULOS DE EXPANSÃO ANALÓGICA

Entradas através de fonte externa (diferencial)

Entradas através de réguas potenciométricas

Entradas através de fonte externa (diferencial)

Entradas através de réguas potenciométricas

Fig. 19. - Módulo de Expansão 4004.60 e 4004.60N
2 E/S Analógicas

Fig. 20. - Módulo de Expansão 4004.61 e 4004.61N
4 E/S Analógicas

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 40

Capítulo 2 – Componentes da Série

Entradas através de fonte externa (diferencial)

Entradas através de réguas potenciométricas

Fig. 21. - Módulo de Expansão 4004.60/A
2 E/S Analógicas

Entradas através de fonte externa (diferencial)

Entradas através de réguas potenciométricas

Fig. 22. - Módulo de Expansão 4004.61/A
4 E/S Analógicas

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 41

Capítulo 2 – Componentes da Série
MÓDULOS ANALÓGICOS COMPACTOS – MAC

Esquema de Ligações para sinais de 0 a 10V
Fig. 23. Módulo Analógico Compacto 4004.62
Módulo Analógico Compacto 4004.62/M
8 E Analógicas
4 E Analógicas

Fig. 24. Módulo Analógico Compacto 4004.63
8 S Analógicas

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 42

Módulo Analógico Compacto 4004.63/M
4 S Analógicas

Capítulo 2 – Componentes da Série

Fig. 25. Módulo Analógico Compacto 4004.64
8 S Analógicas

Módulo Analógico Compacto 4004.64/M
4 S Analógicas

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 43

Capítulo 2 – Componentes da Série
MÓDULOS DE LEITURA DE TEMPERATURA

Fig. 26. - Módulo de Leitura de Temperatura 4004.65/J
Termopar tipo J com 4 canais

Módulo de Leitura de Temperatura 4004.66/J
Termopar tipo J com 8 canais

Fig. 27. - Módulo de Leitura de Temperatura 4004.65/K
Termopar tipo K com 4 canais

Módulo de Leitura de Temperatura 4004.66/K
Termopar tipo K com 8 canais

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 44

Capítulo 2 – Componentes da Série

Fig. 28. - Módulo de Leitura de Temperatura 4004.85 e 4004.85/P2 Termoresistência PT100 com 4 canais / 04 Entradas Analógicas

Fig. 29. - Módulo de Leitura de Temperatura 4004.75/P e 4004.75/P2
Termoresistência PT100 com 4 canais

Módulo de Leitura de Temperatura 4004.76/P e 4004.76/P2
Termoresistência PT100 com 8 canais

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 45

Capítulo 2 – Componentes da Série
OUTRAS CONEXÕES PARA MÓDULOS DE 3 FIOS
Para a utilização de PT100 2 ou 4 fios nos módulos de 3 fios, devem-se executar as conexões conforme
os desenhos abaixo:

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 46

Capítulo 2 – Componentes da Série
MÓDULOS DE CONTAGEM RÁPIDA
Observação: para configurar o encoder, entradas e saídas como tipo “N” ou “P” ver pág. 30

(*)

Fig. 30. – Módulo de Contagem Rápida 4004.87

(*)

Fig. 31. – Módulo de Contagem Rápida 4004.87SA

(*) configuradas por estrape interno

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 47

Capítulo 2 – Componentes da Série
MÓDULOS CONVERSORES RS232/RS485 ISOLADOS

Fig. 32. – Módulo Conversor RS232/RS485 Isolado 2232.00R ou 4004.71R

MODULO FONTE CHAVEADA ENTRADA 90 a 240VCA / SAÍDA 24VDC / 3A

Fig. 33. – Módulo fonte chaveada 3A - 2240.03

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 48

Capítulo 2 – Componentes da Série
MODULO FONTE CHAVEADA ENTRADA 93 a 135VCA ou 187 a 260VCA SAÍDA 24VDC / 5A

Fig. 34. – Módulo fonte chaveada 5A - 2240.05

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 49

Capítulo 2 – Componentes da Série
MODULO AMPLIFICADOR PARA VÁLVULA PROPROCIONAL

Fig. 35. – Módulo Amplificador para válvula proporcional - 4004.73

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 50

Capítulo 2 – Componentes da Série

Fig. 36. – Módulo Amplificador para válvula proporcional - 4004.73M

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 51

Capítulo 2 – Componentes da Série
MODULO DE ENERGIA

Status

Status

L1 L2 L3 N

L1 L2 L3 N

Módulo de Energia

Módulo de Energia

I1

I1

I1

I1

I2

I2

I2

I2

I3

I3

I3

I3

Imáx. 5A

Imáx. 5A

L1

L1

L2

L2

L3

L3

N

N
4004.45

4004.45

Fig. 37. - Módulo de Energia 4004.45

Esquema de ligação com transformador de corrente maior que 5 A

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Módulo de Energia 4004.45

Esquema de ligação para sistemas com corrente menor que 5A

Página 52

Capítulo 3 – Mapeamento de Memória

3. Mapeamento de Memória
• Introdução
Neste capítulo é mostrado o mapeamento de memória do Módulo de Processamento da série MPC4004.

Mapeamento de Memória dos Módulos de Processamento
7FFF
7000
6FFF
4010
400F
4000
3FFF
3000
2FFF
1A00
19FF
1000
0FFF
0FD0
0FCF
0880
087F
0840
083F
0800
07FF
07F8
07F7
07F0
07EF
0700
06FF
06F0
06EF
06E0
06DF
06D0
06CF
06C0
06BF
0690
068F
0650
064F
0600
05FF
05F0
05EF
05E0
05DF
05D0
05CF
0590
058F
0550
054F
0548
0547
0540
053F
0500
04FF
04E0
04DF
04D0
04CF
04C0
04BF
0480
047F
0400
03FF
0000

ÁREA DE USO INTERNO DO SISTEMA
PROGRAMA USUÁRIO + PROGRAMA DE INTERRUPÇÕES
RESERVADO
ÁREA DE TABELAS - 4K (usada pelas instruções ATAB e VTAB)
ÁREA DE TEXTOS DAS TELAS
ÁREA DE CONFIGURAÇÃO
REGISTROS ESPECIAIS
928 REGISTROS LIVRES
32 EFETIVOS DE SAÍDAS ANALÓGICAS

Módulo Analógico Compacto (MAC)

32 EFETIVOS DE ENTRADAS ANALÓGICAS

Módulo Analógico Compacto (MAC)

04 EFETIVOS DAS ENTRADAS DE 0 – 10V

Módulo 4004.85

04 EFETIVOS DAS ENTRADAS DO PT100

Módulo 4004.85

118 REGISTROS LIVRES

OBS: 0780h/0782h – RESERVADO PARA RESTO DAS
INSTRUÇÕES DIV, DIVB,DIVBL, DVBLL

8 EFETIVOS DE TEMPERATURA

Canais 1 a 8

8 EFETIVOS DE SAÍDAS ANALÓGICAS

Canais 1 a 8

8 EFETIVOS DE SAÍDAS ANALÓGICAS

Canais 9 a 16

8 EFETIVOS DE TEMPERATURA

Canais 9 a 16

32 REGISTROS LIVRES
32 PRESETS DE SAÍDAS ANALÓGICAS
40 REGISTROS LIVRES
8 EFETIVOS DE ENTRADAS ANALÓGICAS

Canais 1 a 8

8 EFETIVOS “ORIGINAIS” QUANDO A
INSTRUÇÃO FATOR É USADA

Canais 1 a 8

8 EFETIVOS DE ENTRADAS ANALÓGICAS

Canais 9 a 16

32 REGISTROS LIVRES
32 PRESETS DAS ENTRADAS ANALÓGICAS
4 REGISTROS LIVRES
2 PRESETS E EFETIVOS DOS TEMPORIZADORES DE 1 ms
ÁREA DE CONTAGEM RÁPIDA DO MÓDULO DE PROCESSAMENTO (Modo Ângulo)
MÓDULOS DE CONTAGEM RÁPIDA
ÁREA DE CONTAGEM RÁPIDA DO MÓDULO DE PROCESSAMENTO
PORCENTAGEM DE ENERGIA ENTREGUE ÀS
RESISTÊNCIAS

Canais 1 a 8

32 REGISTROS LIVRES
32 PRESETS E EFETIVOS TEMPORIZADORES OU CONTADORES
MEMÓRIA DE ESTADOS

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 53

Capítulo 3 – Mapeamento de Memória

Descrição dos Estados Internos de 0000 até 03FF
03FF
03FE
03FD
03FC
03FB
03FA
03F9
03F0
03EF
03D1
03D0
03CF
0380
037F
0200
01FF
01F8
01F7
01F0
01EF
0180
017F
0160
015F
0100
00FF
00FE
00FD
00FC
00FB
00FA
00F9
00F8
00F7
00F6
00F5
00F4
00F3
00F2
00F1
00F0
00EF
00EE
00ED
00EC
00EB
00EA
00E9
00E8
00E7
00E6
00E5
00E4
00E3
00E2
00E1

DIREÇÃO DE CONTAGEM DE PULSO PARA INSTRUÇÃO CTCPU (REMANENTE)
WATCH DOG TIMER (ATIVO QUANDO O WDT “ENTRAR”) DESLIGADO NA PASSAGEM PARA PROG
SENTIDO DO CONTADOR RÁPIDO 2
SENTIDO DO CONTADOR RÁPIDO 1
SINAL DA SAÍDA ANALÓGICA DO CONTADOR RÁPIDO 2
SINAL DA SAÍDA ANALÓGICA DO CONTADOR RÁPIDO 1
ESTADOS INTERNOS REMANENTES
ESTADOS INTERNOS DE FALHA DE COMUNICAÇÃO COM AS ESTAÇÕES (EI REMANENTE)
HABILITA MODO MESTRE (EI REMANENTE)
ESTADOS INTERNOS REMANENTES
384 ESTADOS INTERNOS AUXILIARES
ESTADOS INTERNOS TERMOPAR ABERTO

Canais 9 a 16

ESTADOS INTERNOS TERMOPAR INVERTIDO

Canais 9 a 16

RESERVADO PARA PROGRAMAÇÃO DAS SAÍDAS DIGITAIS
32 ESTADOS INTERNOS RELACIONADOS AOS PRESETS DE SAÍDA ANALÓGICA
RESERVADO PARA PROGRAMAÇÃO DAS ENTRADAS DIGITAIS
OVERFLOW NA SOMA, SUBTRAÇÃO E SCL
MUDANÇA DE VALOR ATRAVÉS DE TECLADO
EI ACESSO À COMUNICAÇÃO SERIAL CANAL A (RS232)
ON QUANDO SERIAL OCUPADA (PRINT)
HABILITA / DESABILITA USO DO CANAL SERIAL (PRINT)
ON QUANDO RESULTADO DE "COMPARE" <
ON QUANDO RESULTADO DE "COMPARE" =
ON QUANDO RESULTADO DE "COMPARE" >
SEMPRE LIGADO
SEMPRE DESLIGADO
ON NA PRIMEIRA VARREDURA
CLOCK DE 1,0 SEGUNDOS
CLOCK DE 0,2 SEGUNDOS
CLOCK DE 0,1 SEGUNDOS
BLOQUEIO DE TECLADO PARA EDIÇÃO
BIP DE TECLADO
POSIÇÃO ZERO CONTADOR RÁPIDO 2
EFETIVO < SETPOINT CONTADOR RÁPIDO 2
EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 2
HABILITA SAÍDA EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 2
HABILITA SAÍDAS CONTADOR RÁPIDO 2
BLOQUEIO DE CONTAGEM DO CONTADOR RÁPIDO 2
LOAD SETPOINT INICIAL CONTADOR RÁPIDO 2
RESET EFETIVO CONTADOR RÁPIDO 2
POSIÇÃO ZERO CONTADOR RÁPIDO 1
EFETIVO < SETPOINT CONTADOR RÁPIDO 1
EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 1
HABILITA SAÍDA EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 1
HABILITA SAÍDAS CONTADOR RÁPIDO 1
BLOQUEIO DE CONTAGEM DO CONTADOR RÁPIDO 1
LOAD SETPOINT INICIAL CONTADOR RÁPIDO 1

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 54

(1)

(1)

(2)
(2)
(2)
(2)
(2)
(2)
(2)
(2)
(2)
(2)
(2)
(2)
(2)
(2)

(3)

(4)
(4)
(4)

(5)
(5)
(5)
(5)
(5)

Capítulo 3 – Mapeamento de Memória
00E0
00DF
00DE
00DD
00DC
00DB
00DA
00D9
00D8
00D7
00D6
00D5
00D4
00D3
00D2
00D1
00D0
00CF
00CE
00CD
00CC
00CB
00C0
00BF
00BE
00BD
00BC
00BB
00B0
00AF
00AE
00AD
00AC
00AB
00AA
00A9
00A0
009F
0098
0097
0090
008F
0088
0087
0080
007F
0078

RESET EFETIVO CONTADOR RÁPIDO 1
BLOQUEIO DE CONTAGEM (Simulador de Ângulo)
(2)
FICA ATIVO DURANTE A EDIÇÃO DE VALORES (modo RUN)
(2)
ON TECLA <S2> FECHADA / OFF TECLA <S2> ABERTA
(2)
ON TECLA <S1> FECHADA / OFF TECLA <S1> ABERTA
APAGA DISPLAY
FICA ATIVO DURANTE UMA VARREDURA, TODA VEZ QUE HOUVER UMA MUDANÇA
(2)
DE VALOR ATRAVÉS DO CANAL DE COMUNICAÇÃO SERIAL CANAL A (RS232)
(2)
TENTATIVA DE EDIÇÃO COM TECLADO BLOQUEADO
NA TRANSIÇÃO DE OFF PARA ON CARREGA TELA ALVO NO DISPLAY
(1)
(o número da tela é definido no registro 0FECh)
ON DURANTE PRIMEIRA VARREDURA QUANDO ZERO EXTERNO LIGADO (Modo Ângulo)
(2)
EFETIVO < SETPOINT CONTADOR RÁPIDO (Modo Normal)
(2)
EFETIVO = SETPOINT CONTADOR RÁPIDO (Modo Normal)
(2)
EFETIVO > SETPOINT CONTADOR RÁPIDO (Modo Normal)
(1)
HABILITA SAÍDAS CONTADOR RÁPIDO (Modo Normal)
(1)
BLOQUEIA CONTAGEM DO CONTADOR RÁPIDO (Modo Normal)
(1)
LOAD VALOR INICIAL NO EFETIVO DO CONTADOR RÁPIDO (Modo Normal)
(1)
RESET EFETIVO CONTADOR RÁPIDO (Modo Normal)
EDIÇÃO DE SENHA ERRADA
DESATIVA TIME OUT DOS ALARMES
ACESSO A SERIAL CANAL B (RS485)
FICA ATIVO DURANTE UMA VARREDURA, TODA VEZ QUE HOUVER UMA MUDANÇA
(2)
DE VALOR ATRAVÉS DO CANAL DE COMUNICAÇÃO SERIAL CANAL B (RS485)

(5)
(5)
(5)

(5)

RESPECTIVAMENTE LED’S DE 1 a 12. (Qualquer LED do frontal acende quando é ativado o seu estado interno)
TRIGGER DE 1 SEG
HABILITA PROTOCOLO MODBUS
LIGADO PRINT NO CANAL B (RS485) / DESLIGADO PRINT NO CANAL A (RS232)
ESTADO INTERNO REFERENTE À TECLA ESC
RESPECTIVAMENTE BOTÕES DE F1 a F12
(Quando um botão é ativado no frontal do MPC4004 o seu respectivo estado interno passa para ON)
DESABILITA ZERO EXTERNO CONTADOR RÁPIDO 2
DESABILITA ZERO EXTERNO CONTADOR RÁPIDO 1
ESTADO INTERNO RESERVADO
ESTADO INTERNO RESERVADO
HABILITA LEITURA DE CARACTERES DO CANAL RS232
ESTADO INTERNO RESERVADO
BOTÕES K1 a K9 = (00A0 a 00A8) e K0 = (A09)
(Quando um botão é ativado no frontal do MPC4004 o seu respectivo estado interno passa para ON)
ESTADOS INTERNOS HABILITAM CONTROLE DE TEMPERATURA APÓS
Canais 1 a 8
RUPTURA DE TERMOPAR
ESTADOS INTERNOS HABILITAM CONTROLE DE OVER-SHOOT

Canais 1 a 8

ESTADOS INTERNOS TERMOPAR ABERTO

Canais 1 a 8

ESTADOS INTERNOS TERMOPAR INVERTIDO

Canais 1 a 8

ESTADO INTERNO DE ALARME DE MÁXIMO

Canais 1 a 8

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 55

Capítulo 3 – Mapeamento de Memória
0077
0070
006F
0068
0067
0060
005F
0040
003F
0030
002F
0022
0021
0020
001F
0000

ESTADOS INTERNOS DE ALARME DE MÍNIMO

Canais 1 a 8

ESTADOS INTERNOS HABILITAM CONTROLE DE SOFT-START

Canais 1 a 8

ESTADOS INTERNOS DE AQUECIMENTO

Canais 1 a 8

32 ESTADOS INTERNOS DE COMPARAÇÃO ENTRE OS PRESETS
E OS EFETIVOS DAS ENTRADAS ANALÓGICAS
16 ESTADOS INTERNOS DE ÂNGULOS

(Modo Ângulo ou Modo Ângulo Simulado)

ESTADOS INTERNOS AUXILIARES
HABILITA TEMPORIZADOR 02
HABILITA TEMPORIZADOR 01

(Máx. 9,999 segundos)
(Máx. 9,999 segundos)

32 TEMPORIZADORES/CONTADORES (1 a 32) (Máx. 99,99 segundos)

OBSERVAÇÕES:
(1)
(2)
(3)
(4)
(5)

estados escritos como saída no software de usuário, para uso no software básico.
estados de leitura apenas pelo software usuário.
ativado quando há um overflow na soma ou NÃO há empréstimo na subtração.
quando não existe HABILITA ativo, os estados são os da última comparação com HABILITA ativo.
estados internos que não podem ser forçados pelo SUP.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 56

Capítulo 3 – Mapeamento de Memória

• Botoeiras e LEDs presentes nas Interfaces
Visão geral
Os botões F1 a F12 e K0 a K9, presentes nas interfaces, podem ser utilizados como botoeira para acionar
eventos durante um processo automatizado.
Quando um botão é ativado no frontal do MPC4004 o seu respectivo estado interno passa para ON.
Os LEDs do frontal serão acionados através de seu respectivo estado interno.
Importante: Os LEDs funcionam independentemente dos botões.

Mapeamento de memória
00B0
00B1
00B2
00B3
00B4
00B5
00B6
00B7
00B8
00B9
00BA
00BB
00A0
00A1
00A2
00A3
00A4
00A5
00A6
00A7
00A8
00A9

TECLA F1
TECLA F2
TECLA F3
TECLA F4
TECLA F5
TECLA F6
TECLA F7
TECLA F8
TECLA F9
TECLA F10
TECLA F11
TECLA F12
TECLA K1
TECLA K2
TECLA K3
TECLA K4
TECLA K5
TECLA K6
TECLA K7
TECLA K8
TECLA K9
TECLA K0

00C0
00C1
00C2
00C3
00C4
00C5
00C6
00C7
00C8
00C9
00CA
00CB

LED 1
LED 2
LED 3
LED 4
LED 5
LED 6
LED 7
LED 8
LED 9
LED 10
LED 11
LED 12

• Entradas Digitais
Visão geral
Os módulos de entradas digitais detectam e convertem sinais de comutação de entrada em níveis lógicos
de tensão no controlador programável. Essas entradas poderão ser botoeiras, chaves limite, sensores de
proximidade ou qualquer outro dispositivo capaz de comutar tensão 24Vcc, 110 Vca ou 220 Vca.
Cada entrada é isolada do sistema através de um acoplador ótico sendo seu estado "ON" sinalizado
através de led's no frontal do módulo. Podem-se ter módulos de 8, 16 ou 32 entradas, num total máximo
de 120.

Mapeamento de memória
017F
0100

ÁREA RESERVADA PARA MAPEAMENTO DAS ENTRADAS DIGITAIS

Importante:
Os estados internos não utilizados poderão ser usados como estados internos auxiliares.
Ao programar os estados de comparação das saídas analógicas, verificar se não há sobreposição com
os estados das entradas digitais.
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 57

Capítulo 3 – Mapeamento de Memória

• Saídas Digitais
Visão geral
Os módulos de saídas digitais convertem sinais lógicos usados no controlador programável em saídas
(corrente contínua – 24 Vcc ou alternada – relés ou triac), capazes de energizar bobinas, relés, chaves
contatoras, lâmpadas, solenóides ou qualquer outra carga.
As saídas são isoladas do sistema através de acopladores óticos, sendo a indicação de saída ativada
através de led's no frontal do módulo. Podem-se ter módulos de 8, 16 ou 32 saídas, num total máximo de
120.

Mapeamento de memória
Estados internos relacionados com as saídas digitais:
01FF
0180

ÁREA RESERVADA PARA MAPEAMENTO DAS SAÍDAS DIGITAIS

Importante:
Os estados internos não utilizados poderão ser usados como estados internos auxiliares.
Não é possível utilizar o sétimo módulo de expansão (entrada) em conjunto com o módulo de
temperatura pois há sobreposição dos estados internos.

Utilizando o aplicativo SUP
Condições necessárias:
n Estar no menu configuração, comando hardware.
n Selecionar a opção Expansões
Inicialmente o usuário irá definir o tamanho do Bastidor, tendo a opção de 2 (“default”), 4, 6, 8 ou 10
ranhuras.
Clicando sobre os módulos, irá aparecer uma janela com os módulos disponíveis.
Escolhendo-se qualquer expansão digital, a mesma trará informação do mapeamento alocado bem como
da posição do estrape ST1 de endereçamento.
A figura abaixo oferece uma visão da tela de configuração:

Fig. 38.- Configuração de Entradas/Saídas Digitais

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 58

Capítulo 3 – Mapeamento de Memória
Importante:
Os Módulos de Expansão Digital – MPC4004.35, 4004.35A, 4004.37 e 4004.39 devem ser declarados
no aplicativo SUP como uma Expansão Digital de 8E/8S.
Ao utilizar o módulo 4004.35 (8 E – 110 Vca) ou 4004.35A (8 E – 220 Vca) as saídas podem ser
utilizadas como estados internos auxiliares.
Por exemplo, seja o módulo acima a primeira expansão. Este receberá automaticamente pelo
aplicativo SUP os endereços E110 a E117 e as saídas S190 a S197, que completam a expansão 8E/8S,
estão livres para o usuário utilizar.
Já no módulo 4004.37 (8 S – Relé) ou 4004.39 (8 S – Triac), as entradas não podem ser utilizadas
como estados internos auxiliares por estarem recebendo informações do barramento.
Seguindo o exemplo, seja o módulo como segunda expansão. Recebendo pelo SUP os endereços
S1A0 a S1A7N e as entradas E120 a E127, as quais não podem ser utilizadas.
Para o driver MPC4004L, o endereçamento das expansões é fixo conforme a tabela abaixo.
CPU

Expansão 1

Expansão 2

E100-E107

E108-E10F

E110-E117

S180-S187

S188-S18F

S190-S197

• Temporizadores e Contadores
Visão geral
O Editor de Diagramas – Aplicativo SUP, possibilita simular Temporizadores com retardo na energização e
Contadores, através das Instruções TMR (Temporizador) e CNT (Contador).
O estado interno relacionado ao Temporizador passa de desacionado (OFF) para acionado (ON) quando o
Efetivo atingir o Preset de tempo programado.
Também para o Contador os estados internos são acionados quando o Efetivo da contagem atingir o
Preset.
Os Temporizadores possuem base de tempo de 0,01 segundos, tendo assim o tempo máximo de 99,99
segundos.
Estão disponíveis ao usuário 32* Temporizadores ou Contadores.
* - Total utilizado em um programa somando contadores e temporizadores.

Mapeamento de memória
Estados internos relacionados com os temporizadores/contadores:
001F
0000

32 TEMPORIZADORES/CONTADORES

Registros associados com os temporizadores/contadores:
047F
0440
043F
0400

32 EFETIVOS DE TEMPORIZADOS/CONTADORES
32 PRESETS DE TEMPORIZADORES/CONTADORES

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 59

Capítulo 3 – Mapeamento de Memória
Abaixo temos uma tabela
Temporizadores/Contadores:
Nº
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16

Estado
Interno
0000h
0001h
0002h
0003h
0004h
0005h
0006h
0007h
0008h
0009h
000Ah
000Bh
000Ch
000Dh
000Eh
000Fh

relacionando

os

Estados

Internos,
Estado
Interno
0010h
0011h
0012h
0013h
0014h
0015h
0016h
0017h
0018h
0019h
001Ah
001Bh
001Ch
001Dh
001Eh
001Fh

Preset

Efetivo

Nº

0400h
0402h
0404h
0406h
0408h
040Ah
040Ch
040Eh
0410h
0412h
0414h
0416h
0418h
041Ah
041Ch
041Eh

0440h
0442h
0444h
0446h
0448h
044Ah
044Ch
044Eh
0450h
0452h
0454h
0456h
0458h
045Ah
045Ch
045Eh

17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32

Presets

e

Efetivos

Preset

Efetivo

0420h
0422h
0424h
0426h
0428h
042Ah
042Ch
042Eh
0430h
0432h
0434h
0436h
0438h
043Ah
043Ch
043Eh

0460h
0462h
0464h
0466h
0468h
046Ah
046Ch
046Eh
0470h
0472h
0474h
0476h
0478h
047Ah
047Ch
047Eh

dos

Importante:
No aplicativo SUP o usuário tem disponível o Mapeamento de Memória da série MPC4004, para
acessá-lo basta teclar [Shift+F1], em qualquer menu.

• Temporizadores (0,001s)
Visão geral
Existem 2 temporizadores de 0,001s que podem atingir o valor máximo de 9,999 seg.
Quando é ativado o estado interno 0020h o temporizador 1 (de valor efetivo 0542h e 0543h) é inicializado,
terminando quando atingir o seu preset (em 0540h e 0541h), sendo que durante a contagem a saída
relacionada S186 permanecerá ativada.
A saída S186 é acionada ao início da contagem e desacionada ao término da mesma, podendo ser
desacionada pelo usuário independentemente do estado interno 0020h.
O mesmo ocorre para o estado interno 0021h e a saída relacionada S187 do temporizador 2.

Mapeamento de memória
Estados internos relacionados com os temporizadores de 0,001s :
0021
0020

HABILITA TEMPORIZADOR 02
HABILITA TEMPORIZADOR 01

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 60

Capítulo 3 – Mapeamento de Memória
Registros relacionados com os temporizadores de 0,001s :
0547
0546
0545
0544
0543
0542
0541
0540

EFETIVO DO TEMPORIZADOR 02
PRESET DO TEMPORIZADOR 02
EFETIVO DO TEMPORIZADOR 01
PRESET DO TEMPORIZADOR 01

Importante:
Os estados internos e registros serão utilizados para os 2 temporizadores de 0,001s quando
configurados pelo usuário, casos contrários serão de uso geral.
A habilitação dos temporizadores de 0,001s, é feita utilizando diretamente a pseudo-instrução TM1 ou
TM2.

• Multiplex
Visão geral
O módulo 4004.70 oferece os drivers para ligar externamente os 32 botões e/ou 32 Led’s.
Estes Botões e/ou Led’s são relacionados aos estados internos através do aplicativo SUP.
Importante: - máximo de 1 módulo por bastidor.

Utilizando o aplicativo SUP
Condições necessárias:
n Estar no menu configuração, comando hardware.
n Selecionar a opção Expansões.

Escolha a expansão: Multiplex c/ Botões e Led’s.
Ao se digitar <ENTER> na opção de Multiplex abrirá uma janela como mostrada a seguir:

Fig. 39.- Ajuste de Botões e Led’s

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 61

Capítulo 3 – Mapeamento de Memória
No campo Primeiro EI deve-se digitar o primeiro endereço do estado interno, sendo que os demais EI’S
serão na seqüência, de acordo com o número de Botões e/ou Led’s desejado pelo usuário (8, 16, 24 ou
32).
A seguir é mostrado o esquema de ligação dos Botões e Led’s:

Fig. 40.- Esquema de Ligação externa de Botões e Led’s para 4004.70

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 62

Capítulo 3 – Mapeamento de Memória

• E/S Analógicas

Canais 1 a 16

Visão geral
As expansões analógicas convertem até 16 sinais de entrada e 16 sinais de saída analógicos.
(combinação de quatro módulos 4004.61).

Mapeamento de memória
Registros e estados internos relacionados com as entradas analógicas:
005F
0040
05FF
05F0
05EF
05E0

32 ESTADOS INTERNOS DE COMPARAÇÃO ENTRE OS PRESETS
E OS EFETIVOS DAS ENTRADAS ANALÓGICAS

(1)

8 EFETIVOS DE ENTRADAS ANALÓGICAS

Canais 1 a 8

8 EFETIVOS “ORIGINAIS” QUANDO A
INSTRUÇÃO FATOR É UTILIZADA

Canais 1 a 8

05DF
05D0

8 EFETIVOS DE ENTRADAS ANALÓGICAS

Canais 9 a 16

058F
0550

32 PRESETS ASSOCIADOS ÀS ENTRADAS ANALÓGICAS

Registros e estados internos relacionados com as saídas analógicas:
017F
0160
06EF
06E0
06DF
06D0

32 ESTADOS INTERNOS RELACIONADOS AOS PRESETS DE SAÍDA (1)
8 EFETIVOS DE SAÍDAS ANALÓGICAS

Canais 1 a 8

8 EFETIVOS DE SAÍDAS ANALÓGICAS

Canais 9 a 16

068F
32 PRESETS ASSOCIADOS ÀS SAÍDAS ANALÓGICAS
0650
(1) Caso o usuário necessite de mais de 32 presets, a região de estado interno

deverá ser realocada para que não haja conflito com os estados reservados para
temperatura ou saídas digitais.

Utilizando o aplicativo SUP
Condições necessárias:
n Estar no menu configuração, comando hardware.
n Selecionar a opção Expansões.

Escolha uma expansão: Analógica 1 (canais de 1 a 4), Analógica 2 (canais de 5 a 8), Analógica 3
(canais de 9 a 12) ou Analógica 4 (canais de 13 a 16).
Faça a programação descrita a seguir conforme as características destes módulos.
Ao se digitar <ENTER> na opção entradas analógicas E1/E2 ou E3/E4 ou E5/E6 ou E7/E8 ou E9/E10 ou
E11/E12 ou E13/E14 ou E15/E16, abrirá uma janela como mostrada a seguir:

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 63

Capítulo 3 – Mapeamento de Memória

Fig. 41.- Ajuste de Entradas Analógicas

Para cada entrada analógica escolha o tipo de representação usada nos registros (BCD ou BIN) e a
escala. Basta para isto digitar <ENTER> sobre o tipo ou escala da entrada analógica selecionada e
escolher o tipo ou escala e digitar novamente <ENTER> para confirmar, <ESC> sai da janela.
Com isso serão configurados os bytes de ajuste para cada entrada analógica, bem como o próprio
módulo.
A utilização dos ajustes é necessária para compatibilizar tensões de entrada 0 a +10 Vcc ou correntes de
0 a 20 mA com os valores colocados nos registros. A tensão de referência do conversor A/D é de
+10,24Vcc correspondendo a um fundo de escala igual a FFFh (12 bits) na saída digital do conversor.
Exemplo: Entrada de 0 a +10 Vcc (ou 0 a 20 mA) correspondente a 000 a FA0 em hexadecimal na saída
digital do conversor. Portanto para essa entrada representar nos registros correspondentes um valor
decimal de 0000 a 1000 é necessário dividir por 4 e converter para BCD.
É possível determinar o fundo de escala mais adequado à aplicação, escolhendo a escala a ser aplicada
para a entrada analógica, segundo a tabela mostrada a seguir:
Escala (BCD)
0000 - 0500
0000 - 0700
0000 - 1000
0000 - 2000
0000 - 4000
0000 - 5000
0000 - 7000
0000 - 9999

Escala (Binário)
0000 - 01F4
0000 - 02BC
0000 - 03E8
0000 - 07D0
0000 - 0FA0
0000 - 1388
0000 - 1B58
0000 - 270F

Cada entrada analógica pode ter mais de um preset associado a ela. A soma de todos os presets de todas
as entradas analógicas não pode ser maior que 64, estes presets estão em registros consecutivos.
Cada registro está associado a um estado interno que sinaliza o resultado da comparação entre o valor do
preset e do efetivo (aberto ou OFF significa que o valor efetivo é menor que o preset relacionado e
fechado ou ON significa que o valor efetivo é maior ou igual que o preset). Além disso é necessário definir
a quantidade de presets para cada entrada analógica.
A definição da quantidade de presets para cada entrada é feita na opção “Habilita Comparação Canais
Entradas Analógicas“, no comando hardware.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 64

Capítulo 3 – Mapeamento de Memória
A janela que aparecerá é mostrada a seguir:

Fig. 42.- Configuração de Presets para Entradas Analógicas

Digite quantos presets deseja para determinada entrada analógica e <F5> para confirmar os valores.
Ao se digitar <ENTER> na opção saídas analógicas S1/S2 ou S3/S4 ou S5/S6 ou S7/S8 ou S9/S10 ou
S11/S12 ou S13/S14 ou S15/S16, abrirá uma janela, como mostrada abaixo (modificando apenas o canal
correspondente):

Fig. 43. - Ajuste de Saídas Analógicas

Para cada saída analógica escolha o tipo de representação usada nos registros (BCD ou BIN) e a escala.
Basta para isto digitar <ENTER> sobre o tipo ou escala da saída analógica selecionada e escolher o tipo
ou escala e digitar novamente <ENTER> para confirmar, <ESC> sai da janela.
Com isto serão configurados os bytes de ajuste para cada saída analógica, bem como o próprio módulo.
A utilização dos ajustes é necessária para compatibilizar os valores dos presets com tensões de 0 a
+10Vcc. A tensão de referência do conversor D/A é de +10,24 Vcc correspondendo a um fundo de escala
igual a FFFh (12 bits) na entrada digital do conversor.
Exemplo: Valor decimal de preset entre 0000 a 1000. Para esse valor ter na saída analógica uma tensão
entre 0 a +10 Vcc é necessário multiplicá-lo por 4 e convertê-lo para hexadecimal, lembrando que uma
tensão de 0 a +10 Vcc corresponde a 000h a FA0h em hexadecimal ou de 0000 a 4000 em BCD.
É possível determinar o fundo de escala mais adequado à aplicação, escolhendo a escala a ser aplicada,
para o canal de saída analógica, segundo a tabela mostrada a seguir:
Escala (BCD)
0000 - 9999
0000 - 5000
0000 - 4000
0000 - 2000
0000 - 1000

Escala (Binário)
0000 - 270F
0000 - 1388
0000 - 0FA0
0000 - 07D0
0000 - 03E8

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 65

Capítulo 3 – Mapeamento de Memória
Para os módulos 4004.60N e4004.61N é necessário configurar o SINAL das saídas analógicas.
Selecionar : “ASSOCIA EI DE SINAL SAIDAS”

Fig. 44. - Associa estado interno de sinal das saídas analógicas

O estado interno associado, define o primeiro de 4 estados internos que podem estar relacionados as
saídas S1 a S4 de cada módulo 4004.60N(S1 e S2) ou 4004.61N (s1 a S4), determinando que o valor
colocado nos respectivos registros de cada saída corresponderá a uma tensão:
• Entre 0 a +10Vcc se o estado interno de sinal estiver desligado (OFF)
• Entre 0 a –10Vcc se o estado interno de sinal estiver ligado (ON).

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 66

Capítulo 3 – Mapeamento de Memória
Para o driver MPC4004 é possível relacionar presets às saídas analógicas, tendo estados internos
relacionados a cada preset.
Cada saída analógica pode ter mais de um preset associado. A soma de todos os presets de todas as
saídas analógicas não pode ser maior que 64, esses presets estão em registros consecutivos.
Cada registro está associado a um estado interno que, quando fechado, irá transferir o conteúdo do
registro associado à saída analógica do canal.
A definição da quantidade de presets para cada saída é feita na opção “Habilita Comparação Canais
Saídas Analógicas“, no comando hardware. A janela que aparecerá é mostrada abaixo:

Fig. 45.- Configuração dos Presets para as Saídas Analógicas

• Módulo Analógico Compacto (MAC)
Visão geral
As expansões analógicas convertem até 32 sinais de Entrada ou 32 sinais de Saída analógicos.
(combinação de quatro módulos 4004.62 ou 4004.63 / 4004.64).

Mapeamento de memória
Registros relacionados com as entradas e saídas analógicas:
087F
0840
083F
0800

32 EFETIVOS DE SAÍDAS ANALÓGICAS COMPACTAS
32 EFETIVOS DE ENTRADAS ANALÓGICAS COMPACTAS

Importante:
Os módulos MAC só entram em operação quando o programa é gravado na memória FLASH,
portanto não é permitido usar os módulos MAC com o Boot desabilitado.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 67

Capítulo 3 – Mapeamento de Memória

Utilizando o aplicativo SUP
Condições necessárias:
n Estar no menu configuração, comando hardware.
n Selecionar a opção Expansões.

Escolha uma expansão: 4 Entradas M.A.C., 8 Entradas M.A.C., 4 Saídas M.A.C. ou 8 Saídas M.A.C..
Veja a seguir a janela das Expansões:

Fig. 46.- Expansões Analógicas Compactas - MAC

Importante:
Para os Módulos Analógicos Compactos, a utilização do SUP é similar às Expansões E/S Analógicas.
Ou seja, os MAC também possuem o recurso ESCALA e PRESETS para as Entradas e Saídas, usando o
mesmo procedimento de configuração.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 68

Capítulo 3 – Mapeamento de Memória

• Módulo 4004.85 (PT100 a 3 fios)
Visão geral
O módulo 4004.85 possui:

04 canais de entradas analógicas (0 a 10Vcc ou 0 a 20 mA)
04 canais de leitura para termoresistência do tipo PT100 (0 a 200 ºC)

Os canais de temperatura são de apenas leitura, não possuindo controle PID de temperatura .

Mapeamento de memória
Registros relacionados com as entradas analógicas:
07FF
07F8
07F7
07F0

04 EFETIVOS DAS ENTRADAS DE 0 – 10 V
04 EFETIVOS DAS ENTRADAS DO PT100

Utilizando o aplicativo SUP
Condições necessárias:
n Estar no menu configuração, comando hardware.
n Selecionar a opção Expansões.

Escolha uma expansão: E1-E4 PT100(0 a 200 Graus) E5-E8 (0-10V / 0-20mA)
Veja a seguir a janela das Expansões:

Fig. 47.- Expansões específicas

Importante:
Para as entradas analógicas, a utilização do SUP é similar às Expansões E/S Analógicas. Ou seja,
também possuem o recurso ESCALA e PRESETS para as Entradas e Saídas, usando o mesmo
procedimento de configuração.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 69

Capítulo 3 – Mapeamento de Memória

• Temperatura
Visão geral
Os módulos que fazem a leitura de temperatura convertem e linearizam tensões provenientes de até 16
termopares tipo J, tipo K ou termoresistência do tipo PT100.
Importante: Para utilizar os módulos de temperatura tipo “K”, a memória básica utilizada na CPU do
controlador MPC4004, deverá ser a 4004KVx (onde x = última versão)

Mapeamento de memória
Registros relacionados com os canais de temperatura:
06FF
06F0

8 VALORES EFETIVOS DE TEMPERATURA

Canais 1 a 8

06CF
06C0

8 VALORES EFETIVOS DE TEMPERATURA

Canais 9 a 16

Importante:
Os canais 1 a 8 possuem controle PID de temperatura automático (através do SUP), assim o usuário
poderá configurar os parâmetros PID.
Já os canais 9 a 16 são de apenas leitura, não possuindo controle PID de temperatura automático.
Caso queira ter o controle, utilizar a Instrução PID (Ver na página 76), ou seja, deve-se programar os
parâmetros PID.
Ao configurar a segunda placa (canais 9 a 16) do Módulo de Temperatura (4004.65/X ou 4004.66/X)
não é permitida a utilização simultânea com o Módulo de Contagem Rápida (4004.87 ou 4004.87SA).

Utilizando o aplicativo SUP
Condições necessárias:
Programação dos presets e alarmes:
n estar no menu configuração, comando hardware.
n Selecionar a opção Expansões.

Escolha a opção temperatura T1 a T4 e/ou a opção temperatura T5 a T8.
A definição dos Alarmes de mínimo e de máximo e do preset será feita através da janela do SUP mostrada
a seguir:

Fig. 48. - Configuração dos Presets e Alarmes

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 70

Capítulo 3 – Mapeamento de Memória
Importante:
Para os Presets e Alarmes, o usuário definirá o endereço onde os mesmos estão alocados, permitindo
a criação de telas de edição para alteração durante o processo.

Programação dos parâmetros PID
A definição dos parâmetros PID é feita através da janela do SUP (menu Configuração, comando
Carregamento Automático):

Fig. 49.- Configuração dos Parâmetros PID

Podem-se também criar telas de edição para os parâmetros PID, utilizando o mapeamento mostrado a
seguir:
7B0F
7B0E
7B0D
7B0C
7B0B
7B0A
7B09
7B08
7B07
7B06
7B05
7B04
7B03
7B02
7B01
7B00

TEMPO

(02 a 25 segundos)

Kd

(00,0 a 25,5 minutos)

Ki

(004 a 250 repetições/minuto)

Kp

(000 a 100%)

BANDA

(00,0 a 25,5 ºC)

PRESET

(Endereço onde está o Preset)

ALARME MÁXIMO

(Endereço onde está o Alarme)

ALARME MÍNIMO

(Endereço onde está o Alarme)

Mapeamento para Soft-Start – Ks das zonas de temperatura:
7B8F
7B8E
.
.
7B81
7B80

PORCENTAGEM DE SOFT-START (0-100%)

ZONA 8

.
.
PORCENTAGEM DE SOFT-START (0-100%)

ZONA 01

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 71

Capítulo 3 – Mapeamento de Memória
Mapeamento geral para as zonas de temperatura:
7B7F
7B70
7B6F
7B60
7B5F
7B50
7B4F
7B40
7B3F
7B30
7B2F
7B20
7B1F
7B10
7B0F
7B00

PARÂMETROS ZONA 8
PARÂMETROS ZONA 7
PARÂMETROS ZONA 6
PARÂMETROS ZONA 5
PARÂMETROS ZONA 4
PARÂMETROS ZONA 3
PARÂMETROS ZONA 2
PARÂMETROS ZONA 1

Funções Especiais para o Controle de Temperatura
- SOFT-START - Tem por finalidade eliminar a umidade das resistências de aquecimento, através do
aumento gradativo da temperatura, para evitar choques térmicos que poderiam causar a queima das
mesmas.
Assim sendo, até uma temperatura de 100 ºC, recomenda-se que não se aplique a máxima potência
às resistências de maneira contínua.
Admitindo-se que o tempo do algoritmo PID tenha sido ajustado em 10 seg. e a taxa de aquecimento
esteja em 50%, teríamos a saída digital ligada durante 5 seg. e 5 seg. desligada.
A função de Soft-Start, é habilitada individualmente para cada canal, através de estados internos (0068
a 006F).
O valor da porcentagem de energia entregue é representada através do parâmetro Ks, o qual
assumira valores de 0 a 100%.
- ALARME TERMOPAR ABERTO - Caso ocorra à ruptura do elemento sensor ou o mesmo não esteja
conectado, será ligado um estado interno a fim de que o usuário possa relacioná-lo a alarmes para o
operador.
Os estados internos para alarme de termopar aberto são 0088 a 008F, correspondendo aos canais de
1 a 8 respectivamente. Os mesmos estão sempre ativos.
- ALARME TERMOPAR INVERTIDO - Como o termopar gera uma tensão para o cartão do controlador,
devemos respeitar a polaridade de conexão (+ -), sob pena de termos leituras decrescentes, ao invés de
crescente, quando do aquecimento do sistema.
O alarme de termopar invertido será acionado quando a temperatura de aquecimento for acima do
dobro da temperatura ambiente. Assim, se a temperatura ambiente for 20 ºC, o alarme de termopar
invertido ocorrerá aos 40,1 ºC.
Isto ocorre devido à compensação automática da temperatura ambiente, pois só é possível detectar
termopar invertido quando entrar tensão negativa no conversor.
Os estados internos para alarme de termopar invertido são 0080 a 0087, correspondendo aos canais
de 1 a 8 respectivamente.
- CONTROLE DE AQUECIMENTO APÓS RUPTURA DE TERMOPAR (CAART) - Caso ocorra à ruptura
do termopar durante o processo, ocorrerá o desligamento do aquecimento, levando o processo à condição
de bloqueio.
Com o CAART habilitado, após a detecção do termopar aberto, a zona de aquecimento continuará
recebendo a mesma quantidade de energia que vinha sendo aplicada, porém fixa.
Desta forma não teremos o desequilíbrio de temperatura em curto prazo, dando condições ao
operador de efetuar a troca do termopar. Após solucionar o problema, o controle retornará ao algoritmo.
A função de CAART é habilitada individualmente para cada canal através de estados internos (0098 a
009F).
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 72

Capítulo 3 – Mapeamento de Memória
- CONTROLE DE OVER SHOOT - É um controle destinado a evitar que a temperatura ultrapasse
demasiadamente o preset no aquecimento inicial do sistema.
A função de controle de over shoot é habilitada individualmente para cada canal através de estados
internos (0090 a 0097).
- PORCENTAGEM DE SAÍDA ON - O usuário poderá mostrar ao operador a porcentagem de energia
entregue às resistências, visualizando os registros de 04C0 a 04CF (tanto para soft-start quanto para PID).
O formato mostrado é de 000.0 a 100.0, correspondendo de 0 a 100% de energia.
- ALARME DE MÁXIMO - Quando o valor efetivo da temperatura for maior ou igual ao valor máximo
especificado, será acionado o estado interno de alarme de máximo.
- ALARME DE MÍNIMO - Enquanto o valor efetivo da temperatura for menor que o valor mínimo
especificado, será acionado o estado interno de alarme de mínimo.
Importante:
Os registros que conterão os valores de mínimo e máximo são definidos no menu de Programação de
Presets e Alarmes.
Estados internos relacionados ao controle de temperatura:
Canais 1 a 8
009F
0098
0097
0090
008F
0088
0087
0080
007F
0078
0077
0070
006F
0068
0067
0060

EI’S HABILITA CONTROLE APÓS RUPTURA

(1)

EI’S HABILITA CONTROLE DE OVER-SHOOT
EI’S ALARME TERMOPAR ABERTO

(1)

EI’S ALARME TERMOPAR INVERTIDO

(1)

EI’S ALARME DE MÁXIMO
EI’S ALARME DE MÍNIMO
HABILITA CONTROLE DE SOFT-START

(1)

EI’S DE AQUECIMENTO

Canais 9 a 16

01FF
EI’S ALARME TERMOPAR ABERTO
01F8
01F7
EI’S ALARME TERMOPAR INVERTIDO
01F0
(1) somente para o termopar tipo J e tipo K

(1)
(1)

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 73

Capítulo 3 – Mapeamento de Memória

Controle através do algoritmo PID
Definições:
- SET POINT OU PRESET - temperatura programada no controlador, é a temperatura que se quer atingir.
- EFETIVO - temperatura lida pelo cartão do CP, temperatura real.
- OVER SHOOT - é a maior temperatura registrada, sendo atingida no aquecimento inicial do processo.
- DESVIO OU ERRO DO SISTEMA - é a diferença entre o set-point e o valor efetivo.
- BANDA - região onde ocorrerá o controle de temperatura (0 a 25,5 °C). Abaixo da banda as resistências
estão ligadas e acima da banda desligadas.
- TEMPO - valor em segundos, para cálculo do período da saída PWM (2 a 25 segundos). Desta forma se
tivermos um tempo de 4 seg., com uma S = 50%, teremos a saída digital 2 seg. ligada (Ton) e 2 seg.
desligada (Toff).
Importante:
Caso o cálculo de Ton ou Toff seja menor que 1 seg., será mantido o tempo mínimo de 1 seg. e
recalculado o outro termo, para manter a proporcionalidade.

Descrição do algoritmo PID:
O algoritmo PID pode ser escrito de maneira simplificada, conforme a equação:

S=P+I+D
onde:
S - saída para controle do processo, podendo ser analógica ou do tipo PWM (Pulse Width Modulation).
P - termo proporcional
I - termo integrativo
D - termo derivativo
O algoritmo PID, é a soma dos três elementos, que combinam suas ações, para executar o controle da
variável do processo (temperatura).
O usuário poderá definir a contribuição de cada parâmetro programando ganhos para cada um dos
termos, os quais são descritos abaixo:
Kp - ganho proporcional

(0% a 100 %)

Ki - ganho integral

(4 a 250 repetições/minuto)

Kd - ganho derivativo

(0 a 25,5 minutos)

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 74

Capítulo 3 – Mapeamento de Memória

Ação Proporcional
O controle proporcional mantém uma relação linear entre o valor da variável de Processo e a posição do
elemento final de controle.
A magnitude da correção é proporcional à amplitude do desvio, ou seja, a saída do controlador é
proporcional ao erro.
Quanto maior for o desvio, maior será a correção do termo proporcional.
A unidade empregada para o driver MPC4004 será de porcentagem, podendo variar de 0 a 100% o termo
proporcional.
O gráfico abaixo oferece uma melhor noção da influência do termo proporcional:
supondo: S = P (controle somente com termo proporcional)

0% de energia

0% de energia

50% de energia

25% de energia

banda superior
set-point
banda inferior.
100% de energia
Kp=100%

50% de energia
Kp=50%

Ação integral
A finalidade da ação integral é eliminar o desvio permanente deixado pela Ação Proporcional, provocando
a contínua correção do sinal de saída até que o erro seja eliminado.
A correção é proporcional à integral do erro.
Enquanto existir desvio a saída do controlador irá aumentar ou diminuir, só cessando a variação da saída
quando o desvio desaparecer.
O termo integral pode ser expresso como a quantidade de repetições (soma dos erros) ocorridas por
unidade de tempo. A unidade empregada para o driver MPC4004 é repetições/minuto, podendo executar
desde 4 a 250 repetições por minuto.
A contribuição do termo integral poderá ser positiva ou negativa, desta forma a soma de P+I poderá
alcançar o valor máximo para a saída (100%), ou mínimo (0%), tendo como referência o set-point.

Ação derivativa
O termo derivativo introduz uma ação corretiva proporcional à velocidade de variação do desvio.
Combinada com a Ação Proporcional faz com que, quando a variável de processo se afasta do set-point, a
saída varie mais do que variaria somente com a Ação P ou P+I.
Por outro lado quando a variável está retornando ao valor original, o Modo Derivativo exerce uma ação
contrária, reduzindo as eventuais oscilações. Pode-se dizer que a finalidade da Ação Derivativa é diminuir
o tempo de correção do desvio, antecipando a ação corretiva.
A Ação Derivativa é também conhecida por ação antecipatória, e o tempo de antecipação é chamado
“tempo derivativo”, sendo expresso em minutos.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 75

Capítulo 3 – Mapeamento de Memória

Instrução PID
Os canais de 9 a 16 de leitura de temperatura não possuem controle PID, assim foi desenvolvido no
aplicativo SUP a Instrução PID, a qual poderá controlar a temperatura destes canais ou qualquer outra
variável desejada pelo usuário.
O princípio de funcionamento desta Instrução PID é o mesmo do controle PID de temperatura dos canais 1
a 8 (automático através do SUP), sendo a única diferença a “somatória do erro”.
Esta instrução contém:
• Três operandos
• Entrada Habilita (H)
• Entrada de Reset (R) para carregar o valor inicial da somatória do erro.
Símbolo em diagrama de relés:
R
PID
OP1
OP2
OP3
H
onde:
OP1 - Variável de entrada (efetivo) (0 - 9999).
OP2 - Ponteiro do bloco de dados.
OP2
Setpoint
OP2 + 02
Banda
OP2 + 04
Kp (ganho proporcional)
OP2 + 06
Ki (ganho integral)
OP2 + 08
Kd (ganho derivativo)
OP2 + 0A
RESERVADO
OP2 + 0C
Valor mínimo da saída
OP2 + 0E
Valor máximo da saída
OP2 + 10
Tempo
OP2 + 12
Estado Interno de Aquecimento
OP2 + 14
Valor inicial somatória do erro
OP2 + 16
RESERVADO
OP2 + 18
RESERVADO
OP2 + 1A
RESERVADO
OP2 + 1C
RESERVADO
OP2 + 1E
RESERVADO
OP3 - Variável de saída (0 - 1000)

(0 - 9999)
(00.0 – 25.5)
(000 - 100%)
(004 - 250 rep/min)
(00.0 – 25.5 min)
(0 – 1000)
(0 – 1000)
(02 – 25 seg)
(0 – 9999)

Quando a entrada Habilita (H) é acionada e a entrada Reset (R) estiver acionada, o valor inicial da
somatória do erro é transferido para a região de parâmetros e efetuado o cálculo do PID (deve ser
utilizado um MONOA na entrada Reset (R), caso contrário, o valor inicial da somatória do erro será
transferido para a região de parâmetros toda varredura).
Se a entrada Habilita (H) é acionada e a entrada Reset (R) estiver desacionada, é efetuado apenas o
cálculo do PID.
Importante:
O valor inicial da somatória do erro pode ser positivo ou negativo. Os valores positivos correspondem a
0 a 4.999, e os negativos 5.000 a 9.999.
Se não for efetuado o carregamento do valor inicial da somatória do erro, teremos um valor indefinido
no mesmo.
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 76

Capítulo 3 – Mapeamento de Memória

Valores iniciais de controle
Os valores mostrados abaixo têm sido utilizados em diversas aplicações de controle de temperatura, com
resultados satisfatórios .
Recomenda-se partir o sistema com os valores mostrados abaixo, e posteriormente ir ajustando os valores
para otimizar o controle.
OP2
OP2 + 02
OP2 + 04
OP2 + 06
OP2 + 08
OP2 + 0A
OP2 + 0C
OP2 + 0E
OP2 + 10
OP2 + 12
OP2 + 14

Set-point
Banda
Kp
Ki
Kd
RESERVADO
Valor mínimo da saída
Valor máximo da saída
Tempo
E I de Aquecimento
Valor inicial somatória do erro

1500 (exemplo de set-point de 150.0 graus)
0250
0080
0050
0050
0000
0000
1000
0004
0200 (exemplo do EI 0200 .)
8000

Exemplo das instruções necessárias para ativar o bloco PID com efetivo a partir do endereço 6C0 (efetivo
do primeiro canal da segunda placa de temperatura), parâmetros a partir do endereço 700, o resultado do
PID no endereço 0F00 e estado de aquecimento no endereço 0200.
Exemplo de programação:
0F5
H
TAB
700
11
1500
0250
0080
0050
0050
0000
0000
1000
0004
0200
8000

0F5
R
PID
6C0
700
F00

0F7
H

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 77

Capítulo 3 – Mapeamento de Memória

Observação:
Para aplicações onde o valor de set-point será alterado através de frontal, o carregamento deste valor não
poderá fazer parte do bloco TAB . Para o exemplo mostrado acima , o TAB deveria então começar a partir
do endereço 702 , deixando disponível o registro 0700 para ser preenchido por um campo de edição.
É importante que a instrução TAB , seja colocada antes do bloco PID , para que o bloco já possua valores
válidos para atuar .
O valor da somatória do erro para o termo integral, deve ser carregado somente uma vez , este efeito é
conseguido através do EI 0F5 (on na primeira varredura).

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 78

Capítulo 3 – Mapeamento de Memória

• Contadores Rápidos
Visão geral
Os módulos de expansão de contagem rápida da série MPC4004.87 e 4004.87SA destinam-se para
medições de posicionamentos possibilitando a contagem de -8.388.608 a +8.388.608 pulsos à freqüência
máxima de 100 kHz.
Estes módulos possuem dois canais independentes que devem receber como sinal de entrada
transdutores de posição incrementais, lineares ou angulares, com sinais de onda quadrada defasados de
90° (A, B e seus complementares) para detecção de sentido e um sinal de referência (Z e seu
complementar). Opcionalmente o sinal B (e seu complementar) pode ser eliminado para uso onde não há
necessidade de detecção de sentido.
OBS: Os dispositivos com sinais A e Ā ,B e B , Z e Z , também recebem o nome de sinais "driver de linha"
Possuem também uma saída física para cada canal configurável para tipo "P" ou "N" (ver pág. 30).
Esta saída mantém o status de comparação entre o set-point de contagem e o valor efetivo , sendo
possível configurar se a mesma irá acionar quando o efetivo for maior que o set-point ou o contrário (ver
estados (0E4 e 0EC)).
Também possuem uma entrada de bloqueio de contagem para cada canal, configurável para tipo "P" ou
"N" (ver pág. 30)
Os módulos possuem contagem bidirecional (contagem de pulsos em ambos os sentidos), com os
seguintes recursos :
•

Zerar a contagem através de estado interno de RESET (independente do sinal de referência),
impede que o contador seja zerado pelo pulso de zero através do estado interno DESABILITA ZERO
EXTERNO.

•

Carregar um valor inicial para contagem através de estado interno de LOAD VALOR INICIAL.

•

Bloquear a contagem através de estado interno de BLOQUEIO.

•

Habilitar a saída física de comparação através de estado interno HABILITA SAÍDA.

Todos estes estados internos mencionados são individuais por canal e ativados no programa de usuário.
Para estes módulos existem ainda os estados internos de comparação (≥ e <) entre um valor de set-point
e o valor efetivo do contador, além do estado interno relativo ao sinal de referência do transdutor de
posição (zero elétrico).
Todos estes estados internos são de leitura para o programa de usuário e também individuais por canal.
A cada pulso amostrado um registro de contagem é incrementado ou decrementado e uma comparação é
executada com um valor de set-point pré-definido pelo usuário. O resultado da comparação é deixado em
disponibilidade através de estados internos específicos que podem ser usados no programa de usuário.
Se fisicamente houver o sinal de referência, na borda de ocorrência haverá a zeragem incondicional do
registro de contagem (se o estado interno de DESABILITA ZERO EXTERNO não estiver habilitado) e
também será sinalizado através de um estado interno específico.
O resultado da comparação também é colocado em uma saída física programável pelo usuário (≥, <)
efetivo maior/igual set-point ou efetivo menor que set-point. Esta programação é feita através do estado
interno “HABILITA SAÍDA EFETIVO ≥ SETPOINT”.
O módulo de expansão de contagem rápida 4004.87SA possui além de todas as características descritas
acima, uma saída analógica por canal de contagem. A saída varia de -10 Vcc a +10 Vcc.
O valor da saída será dado pelo set-point colocado nos registros de saída analógica associada ao
Contador Rápido 1 (04EC/04ED) e Contador Rápido 2 (04FC/04FD), este valor varia entre 0 e 2000,
sendo que o estado interno de SINAL DA SAÍDA ANALÓGICA (03FA para Contador 1 e 03FB para
Contador 2) definirá se o valor é positivo ou negativo.
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 79

Capítulo 3 – Mapeamento de Memória

Importante:
Ao configurar o Módulo de Contagem Rápida (4004.87 ou 4004.87SA) não é permitida a utilização
simultânea com a segunda placa (canais 9 a 16) dos Módulos de Temperatura (4004.65/X ou 4004.66/X).

Mapeamento de memória
Estados internos relacionados aos Contadores Rápidos 1 e 2:
03FD
03FC
03FB
03FA

EI DE SENTIDO DO CONTADOR RÁPIDO 2
EI DE SENTIDO DO CONTADOR RÁPIDO 1
EI DE SINAL DA SAÍDA ANALÓGICA DO CONTADOR RÁPIDO 2
EI DE SINAL DA SAÍDA ANALÓGICA DO CONTADOR RÁPIDO 1

00EF
00EE
00ED
00EC
00EB
00EA
00E9
00E8
00E7
00E6
00E5
00E4
00E3
00E2
00E1
00E0

POSIÇÃO ZERO CONTADOR RÁPIDO 2
EFETIVO < SETPOINT CONTADOR RÁPIDO 2
EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 2
LIGA SAÍDA QUANDO EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 2
HABILITA SAÍDAS CONTADOR RÁPIDO 2
BLOQUEIO DE CONTAGEM DO CONTADOR RÁPIDO 2
LOAD SETPOINT INICIAL CONTADOR RÁPIDO 2
RESET EFETIVO CONTADOR RÁPIDO 2
POSIÇÃO ZERO CONTADOR RÁPIDO 1
EFETIVO < SETPOINT CONTADOR RÁPIDO 1
EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 1
LIGA SAÍDA QUANDO EFETIVO ≥ SETPOINT CONTADOR RÁPIDO 1
HABILITA SAÍDAS CONTADOR RÁPIDO 1
BLOQUEIO DE CONTAGEM DO CONTADOR RÁPIDO 1
LOAD SETPOINT INICIAL CONTADOR RÁPIDO 1
RESET EFETIVO CONTADOR RÁPIDO 1

(2)
(2)
(1)
(1)

(1)
(1)
(1)
(1)
(1)

(1)
(1)
(1)
(1)
(1)

(2)
(2)
(2)

(2)
(2)
(2)

(1)
00AF
DESABILITA ZERO EXTERNO CONTADOR RÁPIDO 2
(1)
00AE
DESABILITA ZERO EXTERNO CONTADOR RÁPIDO 1
(1)
estados escritos como saída no software de usuário, para uso no software básico.
(2)
estados de leitura apenas pelo software usuário.

Registros relacionados aos Contadores Rápidos 1 e 2:
04FF
04FE
04FD
04FC
04FB
04F8
04F7
04F4
04F3
04F0
04EF
04EE
04ED
04EC
04EB
04E8
04E7
04E4
04E3
04E0

RESERVADO
SAÍDA ANALÓGICA ASSOCIADA CONTADOR RÁPIDO 2
VALOR INICIAL CONTADOR RÁPIDO 2
EFETIVO CONTADOR RÁPIDO 2
PRESET CONTADOR RÁPIDO 2
RESERVADO
SAÍDA ANALÓGICA ASSOCIADA CONTADOR RÁPIDO 1
VALOR INICIAL CONTADOR RÁPIDO 1
EFETIVO CONTADOR RÁPIDO 1
PRESET CONTADOR RÁPIDO 1

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 80

Capítulo 3 – Mapeamento de Memória

• Force
Visão geral
Através do Force, é possível forçar estados internos do controlador para ligado ou desligado.
A utilização do force é feita durante a supervisão de linhas, através da tecla <F8>.
ATENÇÃO:
Toda passagem do modo PROG para o modo RUN provoca o desligamento dos estados não
remanentes, o desligamento das saídas e a liberação dos estados que estavam forçados ("force").
O "force" é utilizado para analisar o efeito de um ou mais estados internos no programa de usuário,
facilitando testes de simulação de diagramas lógicos em bancadas, sendo que estes estados
internos podem ser forçados para ON ou para OFF no SUP através do menu comunicação,
comando supervisão de linhas. O "force" também pode ser usado "on-line", ou seja, com a
máquina ou o processo real em funcionamento. Nesse caso, esta facilidade somente deve ser
usada por programadores altamente conhecedores da máquina ou processo em questão, uma vez
que é possível forçar estados que possam ser responsáveis pela segurança da máquina ou do
operador

Utilizando o aplicativo SUP
Condição para habilitação:
estar no menu configuração, comando hardware.
Digite <ENTER> na opção “habilita force”
Condição para utilização:
n estar no menu comunicação, comando sup. linhas

Digite <ENTER>

• Alarmes
Visão geral
Para que até 64 telas apareçam piscando em caso de alarmes (estado interno associado acionado),
poderão ser implementadas de maneira automática devendo o usuário apenas manusear sua
configuração e alocar telas do tipo "somente texto" para as mensagens de alarme.
Um texto de alarme é automaticamente chamado, quando um estado interno a ele associado é acionado
(ON). Neste caso, o texto correspondente aparece no display piscando com tempo de 0,5 s aceso e 0,5 s
apagado. Os textos correspondentes vão alternadamente aparecendo no display caso existam mais de um
estado interno acionado.
Qualquer acionamento de tecla interrompe o processo de indicação de alarme, por um tempo programado
na configuração (timeout de telas de firmware) permitindo ao operador total acesso ao teclado.
Após este tempo, se não houver novo acionamento de teclas, e houver alarmes pendentes, estes tornarão
a ser mostrados.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 81

Capítulo 3 – Mapeamento de Memória
Importante:
As telas de alarme têm prioridade sobre o estado 00DBh (apaga display), portanto mesmo com o estado
00DBh ativo, se houver estados de alarme ativo, as telas de alarme serão mostradas.
Um ou mais alarmes somente são mostrados se o timeout das telas de firmware tiver decorrido, portanto,
um operador digitando valores tem assegurado a si a prioridade do teclado/display.
Se ocorrer um ou mais alarmes quando o teclado/display está na função "edita" (e houver decorrido o
timeout das telas de firmware) os alarmes serão mostrados. Após cessar o alarme, o display retorna à tela
de origem, ou seja, onde se estava editando um valor, porém com a edição desativada.
Há exceção para o caso de estar em tela de auxílio à manutenção. Nesta situação, não haverá o retorno à
tela de alarme até se sair da tela de auxílio à manutenção.
Para os frontais com campos livres, o tempo de alarme presente (ton) e tela apagada (toff) é configurado
pelo usuário.

Utilizando o aplicativo SUP
Condições necessárias:
n estar no menu configuração, comando IHM.

Ao se digitar <ENTER> na opção alarme aparecerá à janela a seguir:

Fig. 50. - Alarmes

Digite o endereço do primeiro estado interno de alarme, o número da primeira tela de alarme e o número
de alarmes programados. A tecla <F5> atualiza todos os parâmetros e abandona a janela.
A seqüência dos estados internos, que quando fechados colocarão o texto correspondente no display, é
configurável através da alocação do primeiro estado interno. O conjunto de estados deverá estar na
mesma página de estados internos.
A seqüência das telas associadas aos estados internos para serem chamadas no display, também é
configurável através da alocação da primeira tela. As telas serão seqüenciais, ou seja, se o primeiro
estado interno estiver associado à tela "n", o segundo estado interno estará associado à tela "n+1" e assim
sucessivamente.
Estando novamente no menu configuração, no comando IHM pode-se programar o tempo de timeout das
telas de firmware na opção programação.
As telas de firmware são as telas de mudança de alarmes. O timeout da tela de mudança de página é
utilizado para manter esta tela por um determinado tempo no display. A cada acionamento de uma tecla,
estando nessa tela, é reiniciado o tempo de timeout. Após o término deste tempo aparecerá no display à
tela anterior a chamada. O funcionamento do timeout para as telas de alarmes foi descrito na visão geral.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 82

Capítulo 3 – Mapeamento de Memória

• Registros
Visão geral
Os valores na memória do Controlador Programável MPC4004 seguem uma estrutura de dados de 4
dígitos (caso BCD com valores de 0000 a 9999 ou caso BIN de 0000 a FFFFh), onde a parte mais
significativa ocupa um endereço par e a parte menos significativa ocupa o endereço ímpar seguinte.
Exemplo: O registro 0480 contém um dado de valor 1234. Portanto o conteúdo do endereço 0480 será 12
e o conteúdo do endereço 0481 será 34.
Alguns registros são de uso geral, enquanto outros possuem atribuições especiais. Estes registros estão
listados no mapeamento de memória a seguir.

Mapeamento de memória
Registros especiais:
0FFF
RESERVADO
0FF0
0FEF
NÚMERO DA TELA ATUAL
0FEE
0FED
NÚMERO DA TELA ALVO (SOFTWARE USUÁRIO)
(1)
0FEC
0FEB
NÚMERO DA TELA DE NAVEGAÇÃO PARA ACESSO
0FEA
À TELA DE AUXÍLIO À MANUTENÇÃO ATRAVÉS DE S1
0FE9
RESERVADO
0FE6
0FE5
CONTADOR DE CARACTERES RECEBIDOS
0FE4
0FE3
GAVETA RECUPERADA
0FE2
0FE1
NÚMERO DE UTILIZAÇÕES DA MEMÓRIA FLASH
0FE0
0FDF
RESERVADO
0FD0
(1)
A parte mais significativa do registro deve ser igual a 00, pois a parte menos significativa

representa o número da tela em hexadecimal “FF=256”.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 83

Capítulo 3 – Mapeamento de Memória

• Programa de interrupção I e II
Programa de Interrupção I
Gera uma rotina de interrupção no processamento a cada pulso recebido pela entrada E102.
Etapas da Interrupção I:
- atualiza entradas digitais 100 a 107
- atualiza entradas analógicas
- atualiza contador rápido I e II
- executa programa de Interrupção I
- atualiza saídas 180 a 187
- atualiza contador rápido I e II
- atualiza saídas analógicas
- retorna ao processo (onde estava)

Programa de Interrupção II
Quando habilitado, gera uma interrupção no processamento configurada pelo usuário entre 2 e 10ms.
Interrupção utilizada para manter determinados pontos do processo mais uniformes, garantido através da
repetibilidade da interrupção.
Etapas da Interrupção II
- atualiza entradas digitais 100 a 107
- atualiza entradas analógicas
- atualiza contador rápido I e II
- executa programa de Interrupção II
- atualiza saídas digitais 180 a 187
- atualiza saídas analógicas
- atualiza contador rápido I e II
- atualiza saídas digitais 190 a 19F
- atualiza 8 primeiros ângulos
- retorna ao processo (onde estava)
Importante:
As etapas descritas para os programas de interrupção I e II são configuráveis pelo usuário, podendo
desta maneira definir apenas as etapas de interesse para a aplicação.
Ex.: Se escolhido 2ms como tempo de interrupção, a cada 2ms o programa de interrupção II será
executado.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 84

Capítulo 3 – Mapeamento de Memória

• Canais de Comunicação Serial
Visão Geral
A série MPC4004 possui dois canais de comunicação serial: canal A (RS232) e canal B (RS485).
Os dois canais podem ser utilizados simultaneamente, podendo ter taxas de comunicação diferentes:
VALOR
12
24
48
19
28
57
Diferente

BAUD RATE
1200
2400
4800
19200
28800
57600
9600

Tabela referente à Transmissão Canal A, Canal B e Instrução Print

Taxa de transmissão canal A (RS232)
Posição de memória 1980h:
1980

TAXA DE TRANSMISSÃO CANAL A (RS232)

Número da máquina na rede canal A (RS232)
Posição de memória 1941h:
1941

NÚMERO DA ESTAÇÃO NA REDE CANAL A (RS232)

Taxa de transmissão canal B (RS485)
Posição de memória 1987h:
1987

TAXA DE TRANSMISSÃO CANAL B (RS485)

Número da máquina na rede canal B (RS485)
Posição de memória 1988h:
1988

NÚMERO DA ESTAÇÃO NA REDE CANAL B (RS485)

Taxa de transmissão da instrução Print
Posição de memória 1982H:
1982

TAXA DE TRANSMISSÃO DA PRINT

LIGADO PRINT CANAL B (RS485) / DESLIGADO CANAL A (RS232) (1)
00BD
(1)
A instrução PRINT pode enviar dados para o canal A (RS232) ou canal B (RS485).

A escolha é feita através do EI 00BDh.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 85

Capítulo 3 – Mapeamento de Memória

Utilizando o aplicativo SUP
Condições necessárias:
n estar no menu configuração, comando hardware
n ter selecionado corretamente o driver MPC4004

Ao se digitar <ENTER> na opção taxa de transmissão para canal A (RS232) ou canal B (RS485), serão
mostradas as taxas disponíveis para o controlador.
O mesmo acontece para a taxa de transmissão da instrução “PRINT”.

Fig. 51.- Programação das taxas de comunicação

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 86

Capítulo 3 – Mapeamento de Memória

• Gravação do programa de usuário em FLASH EPROM
Visando agilizar a integração do controlador programável ao processo industrial, os módulos de
processamento da série MPC4004 incorporam o recurso de gravação do programa de usuário e das telas
via comunicação serial.
As informações são gravadas em uma Flash EPROM de 32k bytes, liberando o usuário de ter que gravar
externamente uma EPROM, e posteriormente inseri-la no equipamento. Quando houver a energização do
controlador, ocorrerá o carregamento do programa contido na Flash EPROM, para a memória NVRAM.

Utilizando o aplicativo SUP
Condições necessárias:
n estar no menu comunicação comando "flasH" ou "Enviar" ou "Limpa + Enviar"
n ter selecionado o driver MPC4004

A gravação do programa pode ser executada através de duas maneiras distintas:
• Diretamente através do comando "Envia" ou "Limpa + Enviar".
• Através do comando "flasH".
Comando "Enviar" ou "Limpa + Enviar":
Ao escolher uma das opções, o usuário terá acesso à tela mostrada abaixo, na qual existe a opção de
escolher se será feita a gravação ou não do programa na FLASH EPROM.

Fig. 52.- Gravação da memória FLASH

É recomendado deixar sempre esta opção ativada para que se tenha sempre o Boot com o último
programa enviado.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 87

Capítulo 3 – Mapeamento de Memória
Comando "flasH"
Este comando deve ser utilizado quando o usuário já possui o programa na memória NVRAM ou RAM,
faltando apenas finalizar com a sua gravação na FLASH EPROM.
No final da gravação o aplicativo SUP indicará através de uma mensagem se a operação foi bem sucedida
ou não.

Importante:

Para maior segurança da operação, a gravação do programa é sempre feita no modo DEBUGA;
portanto, caso o usuário esteja no modo RUN, o controlador mudará automaticamente para o modo
DEBUGA enquanto é feita a gravação da memória, retornando ao modo RUN quando esta operação for
concluída.
O controlador programável sai de fábrica com um programa de teste gravado na memória Flash. Caso
esteja no modo RUN, utilize a opção "Enviar" ou "Limpa + Enviar", com a opção "Gravar Memória Flash"
setada, para que no retorno ao modo RUN seja carregado o novo programa.
O número de operações para a memória FLASH EPROM é de 10.000 vezes.
Caso o usuário queira preservar o número de gravações de sua memória FLASH, poderá seguir a
seqüência mostrada abaixo:
n antes de enviar o programa, certificar-se de que no menu “Configuração”, submenu “Hardware” o item

"Não copia da memória EPROM/FLASH p/ NVRAM" esteja habilitado.

n enviar quantas vezes for necessário o programa de usuário, para ajustá-lo ao processo.
n quando o programa estiver plenamente satisfatório, utilizar a opção "flasH" do menu Comunicação para
gravá-lo na flash EPROM. Após a gravação, ao se passar para o modo RUN, ocorrerá o carregamento do
programa contido na memória flash para a memória NVRAM.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 88

Capítulo 3 – Mapeamento de Memória

• Módulo 4004.45 (módulo de energia)
Visão geral
A unidade 4004.45 foi idealizada para atender aplicações direcionadas ao controle e análise de
parâmetros elétricos trifásicos.
Integrado a série MPC4004 sobre a forma de um módulo microprocessado, o novo módulo possibilita
aplicações dedicadas ao controle de energia ou aplicações integradas, que também requeiram a
monitoração de parâmetros elétricos.
Principais Características:
•Medição de parâmetros elétricos (para sistemas em Y com neutro):
•Tensão RMS (valor trifásico e por fase);
•Corrente RMS (valor trifásico e por fase);
•Potência Ativa (valor trifásico e por fase);
•Potência Reativa (valor trifásico e por fase);
•Potência Aparente (valor trifásico e por fase);
•Fator de Potência (valor trifásico e por fase);
•Consumo de Energia Reativa (valor trifásico e por fase);
•Freqüência (por fase);
•Detecção de falta de Fase;
•Detecção de inversão de Fase;
•Detecção do sentido da Energia.

Fórmulas relacionadas as medições:
S - Potência aparente ou potência total - VA
P - Potência ativa - W
Q - Potência reativa - VAr
I - Corrente - A
COSϕ - fator de potência
S=

Triângulo de
S

P*P + Q*Q
Cosϕ = P/S
I = S/V

Q

ϕ
P

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 89

Capítulo 3 – Mapeamento de Memória

Mapeamento de memória
O módulo de energia 4004.45 utiliza 16 estados internos e 96 registros para trocar informações.
Para facilitar a localização dos registros, comece sempre no início de uma página.
Visando facilitar o entendimento da programação dos módulos, será mostrado o mapeamento tendo como
referências os seguintes ponteiros:
Primeiro Registro – 0600H ( poderia ser 0800h , 1000, 2000, etc)
Primeiro estado interno- 0200H ( poderia ser 0250h, 0320 , etc )
Exemplo de mapeamento do módulo 4004.45:
Representação
CPU
06BE
06BC
06BA
06B8
06B6
06B4
06B2
06B0
06AE
06AC
06AA
06A8
06A6
06A4
06A2
06A0
069E
069C
069A
0698
0696
0694
0692
0690
068E
068C
068A
0688
0686
0684
0682
0680
067F-067E
067C
0678-067B
0674-0677
0670-0673
0668-066F
0660-0667
0658-065F
0650-0657
0648-064F
0640-0647

RESERVADO
KPT3 CTE MULTIP. PARA POTÊNCIA TOTAL FASE 3
KPT2 CTE MULTIP. PARA POTÊNCIA TOTAL FASE 2
KPT1 CTE MULTIP. PARA POTÊNCIA TOTAL FASE 1
KPR3 CTE MULTIP. PARA POTÊNCIA REATIVA FASE 3
KPR2 CTE MULTIP. PARA POTÊNCIA REATIVA FASE 2
KPR1 CTE MULTIP. PARA POTÊNCIA REATIVA FASE 1
KPA3 CTE MULTIP. PARA POTENCIA ATIVA FASE 3
KPA2 CTE MULTIP. PARA POTENCIA ATIVA FASE 2
KPA1 CTE MULTIP. PARA POTENCIA ATIVA FASE 1
KI3 CTE MULTIP. PARA CORRENTE FASE 3
KI2 CTE MULTIP. PARA CORRENTE FASE 2
KI1 CTE MULTIP. PARA CORRENTE FASE 1
KV3 CTE MULTIP. PARA TENSÃO FASE 3
KV2 CTE MULTIP. PARA TENSÃO FASE 2
KV1 CTE MULTIP. PARA TENSÃO FASE 1
reservado
POTÊNCIA TOTAL FASE 3 * KPT3 FASE 3
POTÊNCIA TOTAL FASE 2 * KPT3 FASE 2
POTÊNCIA TOTAL FASE 1 * KPT3 FASE 1
POTÊNCIA REATIVA FASE 3 * KPR3 FASE 3
POTÊNCIA REATIVA FASE 2 * KPR2 FASE 2
POTÊNCIA REATIVA FASE 1 * KPR1 FASE 1
POTÊNCIA ATIVA FASE 3 * KPA3 FASE 3
POTÊNCIA ATIVA FASE 2 * KPA2 FASE 2
POTÊNCIA ATIVA FASE 1 * KPA1 FASE 1
CORRENTE FASE 3 * KI3 FASE 3
CORRENTE FASE 2 * KI2 FASE 2
CORRENTE FASE 1 * KI1 FASE 1
TENSÃO FASE 3 * KV3 FASE 3
TENSÃO FASE 2 * KV2 FASE 2
TENSÃO FASE 1 * KV1 FASE 1
MËDIA DAS CORRENTES
MÉDIA FATOR DE POTÊNCIA
POTÊNCIA APARENTE TOTAL
POTÊNCIA REATIVA TOTAL
POTÊNCIA ATIVA TOTAL
ENERGIA TOTAL REATIVA FASES 3,2,1 KWH
ENERGIA TOTAL ATIVA FASES 3,2,1
KWH
ENERGIA REATIVA FASES 3
KWH
ENERGIA REATIVA FASES 2
KWH
ENERGIA REATIVA FASES 1
KWH
ENERGIA ATIVA FASES 3
KWH

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Direção
⇔ 4004.45

X.XXX
X.XXX
X.XXX
X.XXX
X.XXX
X.XXX
X.XXX
X.XXX
X.XXX
XX.XX
XX.XX
XX.XX
X.XXX
X.XXX
X.XXX

Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ
Þ

XXXX
XXXX
XXXX
XXXX
XXXX
XXXX
XXXX
XXXX
XXXX
XX.XX
XX.XX
XX.XX
XXX.X
XXX.X
XXX.X
XX.XX
XX.XX
XXXXXXXX
XXXXXXXX
XXXXXXXX
XXXXXXXXXX.XXXXXX
XXXXXXXXXX.XXXXXX
XXXXXXXXXX.XXXXXX
XXXXXXXXXX.XXXXXX
XXXXXXXXXX.XXXXXX
XXXXXXXXXX.XXXXXX

⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐

Página 90

Capítulo 3 – Mapeamento de Memória
0638-063F
0630-0637
062C
062A
0628
0626
0624
0622
0620
061C
061A
0618
0616
0614
0612
0610
060C
060A
0608
0606
0604
0602
0600

ENERGIA ATIVA FASES 2
ENERGIA ATIVA FASES 1
COS ϕ FASE 3
POTÊNCIA APARENTE FASE 3
POTÊNCIA REATIVA FASE 3
POTÊNCIA ATIVA FASE 3
CORRENTE FASE 3
FREQUENCIA FASE 3
TENSÃO FASE 3
COS ϕ FASE 2
POTÊNCIA APARENTE FASE 2
POTÊNCIA REATIVA FASE 2
POTÊNCIA ATIVA FASE 2
CORRENTE FASE 2
FREQUENCIA FASE 2
TENSÃO FASE 2
COS ϕ FASE 1
POTÊNCIA APARENTE FASE 1
POTÊNCIA REATIVA FASE 1
POTÊNCIA ATIVA FASE 1
CORRENTE FASE 1
FREQUENCIA FASE 1
TENSÃO FASE 1

KWH
KWH

XXXXXXXXXX.XXXXXX
XXXXXXXXXX.XXXXXX
XX.XX
XXXX
XXXX
XXXX
XX.XX
XX.XX
XXX.X
XX.XX
XXXX
XXXX
XXXX
XX.XX
XX.XX
XXX.X
XX.XX
XXXX
XXXX
XXXX
XX.XX
XX.XX
XXX.X

⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐

Estado Internos
Direção
CPU
020F
020E
020D
020C
020B
020A
0209
0208
0207
0206
0205
0204
0203
0202
0201
0200

RESERVADO
ON- LIBERA CÁLCULO DE POTÊNCIAS ,
CORRENTES E FATOR DE POTÊNCIA
ON – LIBERA CÁLCULO DE ENERGIA
ON – ZERA CALCULO DE ENERGIA
RESERVADO
RESERVADO
RESERVADO
RESERVADO
ON – FALTA DE FASES
ON – SEQUENCIA DE FASES ERRADAS
ON – POTÊNCIA REATIVA FASE 3 POSITIVA
ON – POTÊNCIA REATIVA FASE 2 POSITIVA
ON – POTÊNCIA REATIVA FASE 1 POSITIVA
ON – POTÊNCIA ATIVA FASE 3 POSITIVA
ON – POTÊNCIA ATIVA FASE 2 POSITIVA
ON – POTÊNCIA ATIVA FASE 1 POSITIVA

4004.45
Þ
Þ
Þ

⇐
⇐
⇐
⇐
⇐
⇐
⇐
⇐

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 91

Capítulo 3 – Mapeamento de Memória

Utilizando o aplicativo SUP
Condições necessárias:
n Estar no menu configuração, comando hardware.
n Selecionar a opção Expansões.

Escolha uma expansão slave.
Selecione a slave de energia.
Veja a seguir a janela de configuração de slave de energia:

Os módulos da série MPC4004 foram projetados para que a programação fosse a mais simples e eficiente
possível. Desta forma para configurar um módulo 4004.45, o usuário precisa apenas definir dois
endereços, que serão os ponteiros utilizados para realizar toda a troca de dados entre o módulo e a CPU.
Definição dos endereços :
“Primeiro Registro” – define o primeiro endereço da região de troca de dados entre a CPU e o módulo
de energia.
“Primeiro EI (estado interno)” define o primeiro estado interno a ser utilizado para o módulo de energia.
O tamanho destas regiões, conteúdos (para que servem) e a direção da troca de informações é dado pelo
tipo do módulo veja a seguir a definição para o módulo de energia.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 92

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

4. Aplicações Especiais Com o Controlador MPC4004
• Simulador de ângulo
Visão geral
É possível obter nos Módulos de Processamento relacionados com o driver MPC4004 uma simulação de
um sinal de um transdutor angular utilizando o timer interno do processador (menu configuração, comando
hardware). Esta situação é denominada de Modo Ângulo Simulado não havendo necessidade de ter o
transdutor angular nem o contador de alta velocidade. Para esta simulação é necessário definir o set-point
em RPM (4.0 a 180.0) e desbloquear o estado interno da contagem para o modo ângulo simulado.
Quando o Modo Ângulo Simulado está habilitado não é possível utilizar o contador rápido no Módulo de
Processamento nos modos normal ou ângulo.

Mapeamento de memória
Estados Internos relacionados com Simulador de Ângulo:
003F
0030

16 EI DE ÂNGULOS (Modo Ângulo Simulado)

00DF

BLOQUEIO DE CONTAGEM (Simulador de Ângulo)

Registros relacionados com Simulador de Ângulo:
04D7
EFETIVO PRA O MODO ÂNGULO SIMULADO
04D6
04D1
SETPOINT PARA O MODO ÂNGULO SIMULADO (RPM)
04D0
(1)
Valores entre 0 e 4 RPM serão sempre 4 RPM.
(2)
O valor máximo para o set-point é de 180.0 RPM.

(1) (2)

053F
16 SETPOINTS DE ÂNGULOS INICIAIS/FINAIS
0500
(3)
Estrutura de dados dos ângulos inicias/finais. (Ver na página nº 96)

(3)

• Contador Rápido (Presente no Módulo de Processamento)
Visão geral
O Contador Rápido no Módulo de Processamento destina-se a medições de posicionamentos através da
contagem de pulsos (0000 a 9999) à freqüência máxima de 3 kHz.
Este contador receberá sinal de pulso na entrada E100 (unidirecional) ou E100 e E101 (bidirecional).
Para configurar as entradas é necessário verificar os estrapes contidos na CPU:
PLACA

ESTRAPE

101.2806 “P”
ou
101.2807 “N”

ST2
ST3

POSIÇÃO
A
B
A
B

FUNÇÃO
Encoder unidirecional
Encoder bidirecional
Encoder bidirecional
Encoder unidirecional

Default: bidirecional

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 93

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004
O contador rápido pode atuar em dois modos:
§ Modo Normal
§ Modo Ângulo
n Modo normal: este modo de funcionamento permite uma contagem de pulsos de 0000 a 9999, com a

possibilidade de:
•

Zerar a contagem através de estado interno de RESET.

•
•

Carregar um valor inicial para contagem através de estado interno de LOAD VALOR INICIAL.
Bloquear a contagem através de estado interno de BLOQUEIO.

•

Habilitar a saída física de comparação através de estado interno HABILITA SAÍDA.

Neste modo existem ainda os estados internos de comparação (>, < e =) entre um valor de set-point e o
valor efetivo do contador, estes estados internos são de leitura para o programa de usuário.
A cada pulso amostrado, um registro de contagem é incrementado e uma comparação é executada com
um valor de set-point pré-definido pelo usuário. O resultado da comparação é deixado em disponibilidade
através de estados internos específicos que podem ser usados no programa de usuário. O resultado da
comparação também é colocado em três saídas físicas configuradas pelo usuário (S180 a S187).
Importante:
Não há marca de zero.
n Modo ângulo: este modo tem como diferença em relação ao anterior a contagem, que varia de um valor
da marca zero para sentido crescente. Esta marca zero pode ou não corresponder ao sinal de referência
(Z e seu complementar).

Desta maneira a utilização de um encoder angular com 360 pulsos por volta, poderia determinar como
marca crescente o valor 0000 e limitando a contagem entre os valores 0000 a 0359.
Neste modo existem ainda 16 estados internos (denominados estados internos de ângulos) que são
resultados de comparação entre o valor efetivo da contagem e 16 regiões definidas através de set-points
denominados presets iniciais e finais. Se o valor do preset inicial for menor que o valor do preset final, um
estado interno correspondente permanecerá fechado (ON) enquanto o valor efetivo da contagem
pertencer dentro do intervalo definido. Se o preset inicial for maior que o preset final, um estado interno
correspondente permanecerá aberto (OFF) enquanto o valor efetivo da contagem pertencer dentro do
intervalo definido.
Importante:
O sinal da marca zero deve ser conectado à entrada E103 do Módulo de Processamento

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 94

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

Mapeamento de memória
Estados internos relacionados ao contador rápido do Módulo de Processamento:
00D7
00D6
00D5
00D4
00D3
00D2
00D1

EI RESERVADO
EFETIVO < SETPOINT CONTADOR RÁPIDO (Modo Normal)
EFETIVO = SETPOINT CONTADOR RÁPIDO (Modo Normal)
EFETIVO > SETPOINT CONTADOR RÁPIDO (Modo Normal)
HABILITA SAÍDAS CONTADOR RÁPIDO (Modo Normal)
BLOQUEIA CONTAGEM DO CONTADOR RÁPIDO (Modo Normal)
LOAD VALOR INICIAL NO EFETIVO DO CONTADOR RÁPIDO
(Modo Normal)
RESET EFETIVO CONTADOR RÁPIDO (Modo Normal)

(1)
(1)

(2)
(2)
(2)
(2)

(1)

(1)
00D0
(1)
estados escritos como saída no software de usuário, para uso no software básico.
(2)
estados de leitura apenas pelo software usuário.
003F
(1)
16 EI DE ÂNGULOS (Modo Ângulo)
0030
(1)
estes estados passam a ser de uso geral quando o contador rápido do módulo de

processamento está no modo normal.

Registros relacionados ao contador rápido do módulo de processamento:
04DB
04DA
04D9
04D8
04D7
04D6
04D5
04D4
04D3
04D2
04D1
04D0

Modo normal

(1)

VALOR INICIAL
VALOR A SER CARREGADO NO EFETIVO QUANDO A CONTAGEM
PASSAR PELA MARCA DE ZERO NO SENTIDO DECRESCENTE
EFETIVO
RESERVADO
SETPOINT
RESERVADO

Modo ângulo (2)
04DB
VALOR DA MARCA ZERO PARA SEMTIDO DECRESCENTE
04DA
04D9
VALOR DA MARCA ZERO PARA SENTIDO CRESCENTE
04D8
04D7
EFETIVO
04D6
04D5
RESERVADO
04D4
04D3
RESERVADO
04D2
04D1
VALOR EM RPM (3)
04D0
(1)
No modo normal a contagem é feita do VALOR INICIAL até o SETPOINT.
(2)
No modo ângulo o valor da marca zero para sentido decrescente é igual ao
(3)

número de pulsos por volta menos um.
O cálculo do valor em RPM é feito só no modo ângulo e considerando-se
encoder de 360 pulsos/volta, independentemente do encoder realmente
usado.
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 95

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004
Estrutura de dados para ângulos iniciais e finais:
051E
051C
051A
0518
0516
0514
0512
0510
050E
050C
050A
0508
0506
0504
0502
0500

ÂNGULO FINAL 08
ÂNGULO INICIAL 08
ÂNGULO FINAL 07
ÂNGULO INICIAL 07
ÂNGULO FINAL 06
ÂNGULO INICIAL 06
ÂNGULO FINAL 05
ÂNGULO INICIAL 05
ÂNGULO FINAL 04
ÂNGULO INICIAL 04
ÂNGULO FINAL 03
ÂNGULO INICIAL 03
ÂNGULO FINAL 02
ÂNGULO INICIAL 02
ÂNGULO FINAL 01
ÂNGULO INICIAL 01

053E
053C
053A
0538
0536
0534
0532
0530
052E
052C
052A
0528
0526
0524
0522
0520

ÂNGULO FINAL 16
ÂNGULO INICIAL 16
ÂNGULO FINAL 15
ÂNGULO INICIAL 15
ÂNGULO FINAL 14
ÂNGULO INICIAL 14
ÂNGULO FINAL 13
ÂNGULO INICIAL 13
ÂNGULO FINAL 12
ÂNGULO INICIAL 12
ÂNGULO FINAL 11
ÂNGULO INICIAL 11
ÂNGULO FINAL 10
ÂNGULO INICIAL 10
ÂNGULO FINAL 09
ÂNGULO INICIAL 09

Exemplo:
Seja o primeiro ângulo inicial de 0º e primeiro ângulo final de 150º:
0500h
00

0501h
00

MPC4004 / Manual rev. 2.10 / Agosto - 2001

0502h
01

-

Página 96

0503h
50

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

Utilizando o aplicativo SUP
Condições necessárias:
n estar no menu configuração, comando hardware.

Escolha o modo de funcionamento do contador rápido. Se o modo de funcionamento for do tipo normal, no
momento que for abandonar a opção configuração, comando sistema, aparecerá a seguinte janela:

Fig. 53. - Contador Modo Normal

Digite os valores das saídas digitais relacionadas com o resultado da comparação do efetivo com o setpoint do contador de alta velocidade presente no módulo de processamento. Conforme o resultado da
comparação, a saída relacionada é automaticamente ativada.
Digite o valor 000 caso não queira relacionar a saída digital. Digite <F5> para confirmar os valores.

• Motor de Passo
Visão geral
A série MPC4004 permite o acionamento de 1 motor de passo de 4 fases X 2 A , podendo ser ligado
diretamente nas saídas do controlador .
As saídas utilizadas são : 180 a 183 , sendo as demais, 184 a 187, de uso geral.

Estados internos e registros relacionados
Para ativar o modo motor de passo, é necessário habilitar o "modo motor de passo" no menu
configuração submenu hardware, nesta condição os seguintes registros e estados internos são válidos :

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 97

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004
Estados internos relacionados :
200 - habilita torque - quando ativado ira energizar o motor com o último passo ativo.
201 - bloqueio - quando ativado inibirá a progressão de contagem , parando o motor instantaneamente
deixando torque no eixo do motor.
202

- escolha do modo de funcionamento :
Ativado
- modo contínuo
Desativado - modo posição

Modo contínuo - nesta condição após a habilitação do motor , o mesmo começará a girar indefinidamente
Modo posição - nesta condição , o motor se deslocará uma quantidade programada de pulsos , parando
com torque no final da contagem.
203

- sentido ativado horário , desativado anti-horário

Obs: a direção de rotação está relacionado à seqüência de pulsos que o motor irá receber , desta forma
para mudar a direção de rotação basta inverter a seqüência de acionamento das fases o motor .
204
- posição alcançada . Este estado interno será ligado toda vez que o motor estando no modo
posição e após ser habilitado, atingir a posição definida nos endereços 4D8/4DB.
205 - escolha do tipo de passo : desligado ligado
-

meio passo
passo inteiro

Obs: a escolha de meio passo permite dobrar a resolução do motor .
206- Reset do efetivo - Ao ser ativado colocará zeros nos endereços 4D4/4D5 e 4D6/4D7
registros relacionados :
4D4 e 4D6 - efetivo de contagem dos passos (8 dígitos) (modo posição)
4D8 e 4DA - preset do número de passos (8 dígitos)
(modo posição)
4D0
- valor de velocidade min. 5.0 RPM máx 180.0 RPM
OBS: A velocidade do motor em RPM calculada considerando um motor de 360 passos por volta .
A velocidade máxima efetivamente alcançada depende do tipo de motor que se está utilizando, bem
como do torque necessário ao processo (Quanto mais veloz menor será o torque do motor).
tabelas de acionamento:

1
2
3
4
1

S180
ON
ON
OFF
OFF
ON

Passo inteiro
S181
S182
OFF
ON
OFF
OFF
ON
OFF
ON
ON
OFF
ON

S183
OFF
ON
ON
OFF
OFF

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 98

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

1
2
3
4
5
6
7
8
1

S180
ON
ON
ON
OFF
OFF
OFF
OFF
OFF
ON

Meio passo
S181
S182
OFF
ON
OFF
OFF
0FF
OFF
OFF
OFF
ON
OFF
ON
OFF
ON
ON
OFF
ON
OFF
ON

S183
OFF
OFF
ON
ON
ON
OFF
OFF
OFF
OFF

Interligação física com o controlador programável (válido para módulos tipo “N”)
As saídas do controlador programável podem ser divididas em dois módulos :
circuito de controle e circuito de potência .
O circuito de controle necessita de uma tensão de 24V /10mA para funcionar .
O circuito de potência pode ser considerado um circuito com coletor aberto , permitindo a conexão de
tensões que podem variar de 3 a 30V com correntes de até 2 A .
Desta forma , uma vez polarizado o circuito de controle em 24V , a ligação do motor de passo nas saídas
poderá ser feito com tensões mais baixas por ex. 5V , sem a necessidade de limitadores de tensão .

Esquema de ligação

MOTOR DE
PASSO
FONTE

+

S0

S1

S2

S4

S5

S6

S3
S7

E0

E1

E2

E3

E4

E5

E6

E7

RUN

+5Vcc
PROG

S7
S6

+24Vcc
0Vcc

IHM

S5

5V

S4

2A

S1

S3
S2

S0
24VS
0VS

STS

E7

RS232

E6
E5
E4
E3
E2
E1

DO/RI

E0

DO/RI

24VE

+5Vcc

0VE

GND

L1
L2

RS485

4004.11

4004.40

Fig. 54. - Esquema de ligação entre Motor de Passo e Controlador Programável

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 99

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

• Envio de caracteres através do canal serial (instrução Print)
Objetivo
Permitir ao usuário enviar caracteres para um dispositivo externo como uma impressora serial, servo
motores , modem etc

Estados internos relacionados
0FB - Habilita modo Print
0BD - Determina para qual canal serial será enviado os caracteres
desligado - canal RS232
ligado - canal RS485
0FC - estado interno que indica canal serial ocupado ou seja durante a transmissão dos dados ele ficará
ligado.
Este estado auxilia o usuário a sincronizar o envio de várias mensagens.
Funcionamento: A o habilitar o modo print (EI 0FB ligado), e selecionado o canal a ser enviado , o
usuário deverá ativar a instrução "PRINT" através de um “MONOA para enviar os dados através do
canal serial”.
Importante:

O estado 0FB deve ficar ativo durante todo o tempo de transmissão dos dados .
Ao ativar o estado 0FB , o controlador não mais poderá receber programação através do
SUP, pois seu canal serial fica reservado para o envio de dados .
A taxa de transmissão para o modo print é definida pelo usuário no menu de configuração de hardware .
para maiores detalhes ver o item "Canais de comunicação serial”.

• Leitura de caracteres através do canal serial
Objetivo
Permitir ao usuário ler caracteres de um dispositivo externo como leitor de código de barras, servo
motores,retorno de conexão com modem etc.

Registros e estados internos relacionados
0AB
- Habilita leitura de caracteres do canal serial
0FB
- Habilita modo Print
0E00 - 0EFE - Buffer de recepção dos caracteres (255 máx.)
0FE4/0FE5 - Registro contador de caracteres recebido
0BD - Determina qual canal serial receberá os caracteres
desligado - canal RS232
ligado - canal RS485
Funcionamento: Estando em modo Print (EI 0FB ligado) , e com o estado interno especial "0AB" também
ligado, os dados recebidos em RX do canal de comunicação RS232 são armazenados a partir do
endereço 0E00 até um limite de 255 caracteres, configurável pelo usuário.
Quando o estado "0AB" estiver desligado , os caracteres recebidos em RX do canal de comunicação
RS232 são ignorados .
A quantidade de bytes recebidos é atualizada no registro 0FE4/0FE5 .
A transição de off para on do estado interno 0AB,provoca a limpeza do buffer (colocação do valor "FF"
entre 0E00 e 0EFF) e o zeramento do registro contador de caracteres recebidos .

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 100

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004
funcionamento do estado interno 0AB :

Ignora caracteres
recebidos em RX

Ignora caracteres
recebidos em RX
Armazena caracteres no buffer

Limpa buffer e contador de caracteres

Fig. 55. - Funcionamento do Estado Interno 0AB

Utilizando o aplicativo SUP
Condições necessárias:
n estar no menu configuração, comando hardware.

Escolha Configura leitura caracter através Canal RS232, aparecerá a seguinte janela:

Fig. 56. - Configuração para leitura de caracteres RS232

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 101

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

• Comunicação background
Objetivo
Capacitar a série MPC4004 com o recurso de "mestre de rede" no canal RS485, possibilitando a troca de
informações entre controladores através da comunicação background.
A programação background é útil por exemplo no transporte de alarmes das estações onde o
programador terá, além das informações do processo controlado pelo mestre, as informações das
estações supervisionadas .

Estados internos relacionados:
3D0 - Estado interno de habilitação do modo mestre , ao ser ativado o canal serial RS485 iniciará a varrer
a tabela com as regiões a serem atualizadas nas estações .
Ao ser desligado, o canal RS485 volta a ser um canal escravo.
Importante : O canal RS485 ao ser definido como mestre não mais responderá a aplicativos como SUP,
PEP ou sistemas supervisórios, pois estará havendo colisão no canal de comunicação em função de haver
02 dispositivos mestres na rede.
3D1 a 3EF - indicam respectivamente estados internos de falha de comunicação com as estações de 01 a
31 .
Quando houver mais de 05 tentativas consecutivas sem sucesso com uma determinada estação, será
ligado automaticamente o estado interno de falha , sendo desligado automaticamente quando houver o
restabelecimento da comunicação.
Regiões de comunicação:
É possível definir até 40 regiões de comunicação de 8 bytes cada.
Cada região receberá ainda o atributo de enviar para a estação ou receber da estação:
•
•

"Terminal → CP” - envia os bytes do terminal para o CP
"Terminal ← CP” - envia os bytes do CP para o terminal

Também é possível definir o endereço do mestre
recebimento das informações .

e o endereço do CP onde ocorrerá o envio ou

A programação background é definida no SUP no menu Configuração submenu Background.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 102

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

Utilizando o aplicativo SUP
Condições necessárias:
n estar no menu configuração, comando Background, aparecerá a seguinte janela:

Fig. 57. - Configuração Background

Onde:
ENDEREÇO MESTRE: endereço inicial a ser transmitido ou recebido.
DIREÇÃO: sentido de transmissão ou recebimento.
ENDEREÇO CP: endereço inicial a ser transmitido ou recebido.
NUMERO CP: número do CP na rede.
NUMERO BYTES: quantidade de bytes transmitidos da região de menu.
Observação: quando a comunicação estiver habilitada os CPs, enviam e recebem dados atualizando-os.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 103

Capítulo 4 – Aplicações Especiais Com o Controlador MPC4004

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 104

Capítulo 5 - Interfaces com Teclado e Display

5. Interfaces com Teclado e Display
Os controladores da série MPC4004, possuem 4 grupos básicos de interfaces:
Interfaces 2000.90/M e 2002.90/M.
Interfaces 2002.95/M, 2002.96 e 2002.97/M.
Interfaces 4004.94, 4004.98 e 4004.99.
Interfaces 4004.90 e 4004.95

Utilizando o aplicativo SUP
Condições necessárias:
n estar no menu configuração, comando Hardware, aparecerá a seguinte janela:

Selecionar no SUP o frontal utilizado da seguinte maneira:
Frontal ATOS
200.90/M e 2002.90/M
2002.95/M e 2002.96
4004.90
2002.97/M, 4004.92, 4004.94 e 4004.95
4004.98 e 4004.99

Opção do SUP
Frontal Teclado/Display LCD
Frontal Teclado Numérico/Display LCD ou
Frontal LCD 2x20 com campos livres
Frontal LCD 2x20 com campos livres
Frontal LCD 4x20 com campos livres
Frontal VFD 4x20 com campos livres

As características de cada grupo são descritas a seguir:

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 105

Capítulo 5 - Interfaces com Teclado e Display

Grupo I: Interfaces 2000.90/M e 2002.90/M
Importante:
O comprimento máximo do "flat cable" das interfaces para a CPU é de 1,00m.
A interface 2000.90/M contém um display de cristal líquido composto por:
• 2 linhas de 20 caracteres
• 8 teclas de função.

128

CAIXA
DIM: 31x104x124

Sér
ie

170.5

Rasgo para
instalação

F.2000.90/01

30

DEIXAR UM ESPACO DE 30
PARA DESCONECTAR O CABO

Fig. 58. - Interface 2000.90/M e suas dimensões

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 106

Capítulo 5 - Interfaces com Teclado e Display
A interface 2002.90/M contém um display de cristal líquido composto por:
• 2 linhas de 20 caracteres
• 8 teclas de função
• 8 botões (tecla F)
• 8 led’s de sinalização.
128

CAIXA
DIM: 30x124x179.5

Sér
ie

165.5

INTERAC
TIVE

IHM 2002.90

S1

S2

Rasgo para
instalação
F1

F2

F3

F4

F5

F6

F7

F8

F.2002.90/01

30

DEIXAR UM ESPACO DE 30
PARA DESCONECTAR O CABO

Fig. 59.- Interface 2002.90/M e suas dimensões

Grupo II: Interfaces 2002.95/M, 2002.96 e 2002.97/M
Importante:
O comprimento máximo do "flat cable" dos frontais para a CPU é de 1,00m.
A interface 2002.95/M contém um display de cristal líquido composto por:
• 2 linhas de 20 caracteres
• teclado numérico
• 4 botões (tecla F) e 10 botões (tecla K) de uso geral

Sér
ie

190.5

CAIXA
DIM: 30x126x150

INTERACTIVE

IHM 2002.95

S1

S2
1

F1
F2

K1

2

A

L
O
C
K

4

5

K7

8

0

F4

K5
K8

K3

C

B

D

7

F3

K4

3

K2

126

144.5

128

RASGO PARA
INSTALAÇÃO

S tatus

6
E
9

K6

F

K9

K0

F.2002.95/00

30
153

•

4 led’s de sinalização

DEIXAR UM ESPAÇO DE 3Omm
PARA DESCONECTAR CABO

Fig. 60.- Interface 2002.95/M e suas dimensões

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 107

Capítulo 5 - Interfaces com Teclado e Display
A interface 2002.96 (gabinete plástico) contém um display de cristal líquido composto por:
• 2 linhas de 20 caracteres
• teclado numérico
• 12 botões (tecla F) e 10 botões (tecla K) de uso geral
• 12 led’s de sinalização
160

32.5
30

IHM2002.96
S1

S2

+

-

LOCK

STATUS

1

4

RASGO PARA
INSTALA O

7

K1

K4

2
A

5
D

K7

8

0

K2

K5

3
B

6
E

K8

9

K3

K6

C

F

K9

K0

F1

F2

F3

F4

F5

F6

F7

F8

F9

F10

F11

F12

DEIXAR UM ESPAÇO DE 3Omm
PARA DESCONECTAR O CABO

144

Fig. 61.- Interface 2002.96 e suas dimensões

OBS: O frontal 2002.96 possui para as teclas “F’s” uma bolsa para identificação da função.
A interface 2002.97/M contém um display de cristal líquido composto por:
• 4 linhas de 20 caracteres
• teclado numérico
• 4 botões (tecla F) e 10 botões (tecla K) de uso geral
• 4 led’s de sinalização
190.5

Sér
ie

CAIXA
DIM: 30x148x150.4

INTERACTIVE

Status

S1

S2
1

F1
F2

148.0

166.50

RASGO PARA
INSTALAÇÃO

150.00

IHM 2002.97

K1

2

A

L
O
C
K

4

K7

5

8

0

F4

3

K5
K8

K3

C

B

D

7

F3

K4

K2

6
E
9

K6

F

K9

K0

F.2 00 2.97 /0 0

30.0
DEIXAR UM ESPAÇO DE 3Omm
PARA DESCONECTAR CABO

153.00

Fig. 62.- Interface 2002.97/M e suas dimensões

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 108

Capítulo 5 - Interfaces com Teclado e Display

Grupo III: Interfaces 4004.92, 4004.94, 4004.98 e 4004.99
Importante:
O comprimento máximo do "flat cable" dos frontais para a CPU é de 1,00m.
A interface 4004.92 contém um display de cristal líquido composto por:
• 4 linhas de 20 caracteres
• teclado numérico
• 4 botões (tecla F) e 10 botões (tecla K) de uso geral
• 4 led’s de sinalização

Fig. 63.- Interface 4004.92 e suas dimensões

A interface 4004.94 contém um display de cristal líquido composto por:
• 4 linhas de 20 caracteres
• teclado numérico
• 12 botões (tecla F) e 10 botões (tecla K) de uso geral
• 12 led’s de sinalização

Fig. 64.- Interface 4004.94 e suas dimensões

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 109

Capítulo 5 - Interfaces com Teclado e Display
As interfaces 4004.98 e 4004.99 contêm um display de cristal líquido e VFD compostas por:
• 4 linhas de 20 caracteres
• teclado numérico
• 12 botões (tecla F) e 10 botões (tecla K) de uso geral
• 12 led’s de sinalização

Fig. 65.- Interface 4004.98 e 4004.99 e suas dimensões

Grupo IV: Interfaces 4004.90 e 4004.95
As interfaces 4004.90 e 4004.95 contêm um display de cristal líquido compostas por:
• 2 linhas de 20 caracteres (4004.90)
• 4 linhas de 20 caracteres (4004.95)
• teclado numérico
• 6 led’s de sinalização

Fig. 66.- Interface 4004.90 e 4004.95 e suas dimensões

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 110

Capítulo 5 - Interfaces com Teclado e Display

• Descrição de funcionamento das interfaces numéricas
Visão geral
As interfaces 2002.95, 2002.96, 2002.97 e 4004.9X incorporam um novo conjunto de teclas, que visam
agilizar as operações básicas de edição. Este novo conjunto também oferece teclas de funções dedicadas,
tais como:
• auxílio manutenção
• senha
• arquivo de moldes.
e nos frontais correspondem às seguintes teclas:
AUXÍLIO MANUTENÇÃO

EDITA

SENHA/ARQUIVO

ENTRA

Telas de edição
Para as telas de edição, após pressionar a tecla <EDITA>, o campo ficará piscando, podendo-se digitar
diretamente através das teclas de 0 a 9.
A finalização da edição ocorre pressionando-se a tecla <ENTRA>.

Tecla de auxílio à manutenção
O acesso ao status dos estados internos ou registros do controlador programável é feito através da tecla
<AUXÍLIO À MANUTENÇÃO>, bastando pressionar a tecla correspondente, e digitar o operando
desejado.
Para voltar à tela em que se estava, basta pressionar qualquer tecla que não seja de 0 a 9.
O acesso às teclas de A a F, é feito ativando-se a tecla <LOCK> (segunda função), onde os números de 1
a 6, passarão a acessar as letras de A a F respectivamente.
Existe um LED específico, para indicar a ativação da segunda função das teclas.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 111

Capítulo 5 - Interfaces com Teclado e Display

Tecla de bloqueio de teclado
O bloqueio de teclado, tem por função, bloquear a edição de qualquer parâmetro da máquina, enquanto
existir o status de bloqueio.
O acesso à função se dá, através da tecla correspondente, estando a tecla <LOCK> desligada.
Ao se acionar a tecla <SENHA> aparecerá uma das seguintes mensagens:

E D I C A O

B L O Q U E A D A !

- - - - - - - -

S E N H A

?

OU

E D I C A O

P E R M I T I D A !

- - - - - - - -

S E N H A

?

O campo "-------", fica neste momento preparado para aceitar a digitação de até 8 dígitos. A finalização da
edição é feita através da tecla <ENTRA>.
Após a edição, caso a senha digitada esteja correta, serão mostradas as telas abaixo, onde houve a
complementação do status de edição.

S E N H A

V A L I D A

E D I C A O

!

P E R M I T I D A !

OU

S E N H A

V A L I D A

E D I C A O

!

B L O Q U E A D A !

A mensagem ficará ativa durante 2 segundos. Após este tempo haverá o retorno automático para a tela
que se estava imediatamente antes de se acionar a tecla <SENHA>.
Em ambos os casos, acionando-se qualquer tecla diferente de 0 a 9, o status de edição
(bloqueado/liberado) não será alterado e retorna a tela que havia imediatamente antes de se acionar a
tecla <SENHA>.
Caso a senha digitada esteja errada, será mostrada a mensagem:

S E N H A

E R R A D A

T E N T E

N O V AM E N T E

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 112

!
!

Capítulo 5 - Interfaces com Teclado e Display
Esta mensagem ficará ativa durante 2 segundos, retornando a tela de senha para nova edição.
A cada tentativa sem sucesso, o estado interno 0CF ficará ligado por uma varredura. Este estado interno,
poderá ser associado a uma instrução de contagem, para monitoração do número de tentativas.
Durante a edição de valores, caso o status de edição esteja bloqueado, aparecerá na tela à mensagem:

E D I C A O

B L O Q U E A D A !

- - - - - - - -

S E N H A

?

A partir deste ponto o funcionamento é como se tivesse acionado a tecla <SENHA>.
Importante:
Se a função senha não esteja habilitada, será mostrada a mensagem abaixo, quando da ativação da
tecla <SENHA>.
A habilitação da senha para edição é feita na configuração das telas.

F U N C A O
N A O

S E N H A

H A B I L I T A D A

Utilizando o aplicativo SUP
Condições necessárias:
n ter selecionado corretamente o driver MPC4004 no menu configuração, comando sistema.
n ter selecionado o frontal com teclas no menu configuração comando hardware
n estar no menu configuração, comando IHM, subcomando senha.

A senha é definida com até oito algarismos, conforme tela mostrada a seguir:

Fig. 67. - Definição da senha

Obs.: Ao definir a senha, preencher com “0” (zeros) as casas à esquerda, que deverão ser ignoradas na
digitação da senha.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 113

Capítulo 5 - Interfaces com Teclado e Display

Descrição do funcionamento da função RECEITA (arquivo de moldes)
A RECEITA (arquivo de moldes) pode ser acessada através dos frontais 2002.95, 2002.96, 2002.97,
4004.94, 4004.98, 4004.99 ou através dos terminais de comunicação.
Para utilização com terminal, ver pseudo-instruções no manual do DWARE.
O acesso à função RECEITA para o frontal é feita através da tecla <SENHA>, estando com a tecla
<LOCK> acionada.
Ao se acionar a tecla <SENHA>, aparecerá a mensagem mostrada abaixo:

R E C E I T A
S 1 - A R M A Z .

S 2 - R E C U P .

Se a escolha for <S1>, teremos a tela para armazenar parâmetros:

M x x x

<

A R Q U I V O

- - -

<

A R Q .

A T U A L

A R M A Z .

?

Se a escolha for <S2>, teremos a tela para recuperar parâmetros:

M x x x

<

A R Q U I V O

- - -

<

A R Q .

A T U A L

R E C U P .

?

O campo xxx mostra o último molde recuperado.
O campo "---" fica neste momento preparado para aceitar a digitação do número do molde.
O símbolo "M" (Modificado), ficará piscando toda vez que houver mudança de valores, através das telas
de edição ou seletoras, que caracteriza mudança dos valores do molde atual.
Após a escolha do número do molde, a finalização da operação é feita através da tecla <ENTER>.
Para evitar operações inadequadas, existem telas auxiliares que serão mostradas nas seguintes
situações:
n arquivo digitado acima do permitido:

V A L O R
A R Q U I V O

I N V A L I D O
M A X I MO

!

= x x x

n arquivo a ser recuperado inválido:

A R Q U I V O

I N V A L I D O

!

Existe um controle interno para determinar se uma gaveta contém dados válidos ou não.
Caso o arquivo esteja "sujo", não será recuperado.
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 114

Capítulo 5 - Interfaces com Teclado e Display
n arquivo a ser armazenado já possui dados válidos.

A R Q U I V O
S I M

O C U P A D O !

C O N T I N U A R ?

N A O

Neste caso o usuário será informado através da mensagem abaixo onde a efetivação da operação de
guarda será feita digitando-se <S1> (SIM) ou o cancelamento através de <S2> (NAO).

Utilizando o aplicativo SUP
Condições necessárias:
n ter selecionado corretamente o driver MPC4004 no menu configuração, comando sistema.
n ter selecionado o frontal, teclado numérico ou campos livres, no menu configuração comando hardware
n estar no menu configuração, comando IHM, subcomando RECEITA.

A definição dos parâmetros é feita conforme tela abaixo:

Fig. 68. - Definição dos parâmetros das receitas

Exemplo:
O usuário pode definir até 8 regiões de memórias para serem usadas no arquivo de moldes.
400 - 41F
500 - 520
580 - 590
600 - 650
ETC
O SUP determinará, em função do número de bytes e da região disponível para gavetas, a quantidade de
moldes a serem usados.
O próprio controlador não permitirá operação acima do número de gavetas máximas.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 115

Capítulo 5 - Interfaces com Teclado e Display

• Descrição de funcionamento do frontal 2002.97/M
Visão geral
O frontal 2002.97/M, assim como os 2002.95/M e 2002.96, além de oferecer as teclas de funções
dedicadas: auxílio à manutenção, senha e arquivo de moldes, possibilita ao usuário programar os campos
de maneira livre (para qualquer frontal no formato 2x20).
As telas para a nova configuração, assumirão o formato mostrado nos exemplos abaixo.
Note que com a nova maneira de programação, o usuário não necessita explicitar o formato da tela (com
ou sem campos).
As telas poderão conter as seguintes entidades, até um máximo de 15:
•
•
•
•
•
•

Campo de edição de 1 a 8 dígitos
Campo de visualização de 1 a 8 dígitos
Campo de seletora de 1 a 9 posições
Campo seletora liga/desl.
Bargraph
String

A posição física dos campos será definida através do usuário, respeitando os tamanhos pré-estabelecidos
de cada campo.
A edição ocorrerá, quando a tecla <EDITA> for acionada para navegar entre campos.
Basta acionar novamente a tecla <EDITA> para que as modificações do campo anterior sejam
automaticamente atualizadas.
A sinalização do campo em edição, é feita piscando o mesmo, e no caso da seletora liga/desliga, piscando
o conjunto de parêntesis “(“
“)“.

A T O S
A U T O M A C A O
L C D
4 x 2 0
T E L A

2

T E L A

3

Exemplo de tela de texto

Z O N A
0 1
(

P R E S E T
> v1 v1 pd v1 v1
E F E T I V O > v2 v2 pd v2 v2

L I G A D A

)

D E S L I

Exemplo de tela com diversos campos

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 116

G

Capítulo 5 - Interfaces com Teclado e Display

Bargraph - Permite ao usuário desenhar uma escala proporcional ao valor de um registro.
Estão associados ao bargraph os seguintes campos:
Registro
Tamanho
Tipo
Tipo de Dado
Valor Máximo
Valor Mínimo

Endereço que contém a variável
Número de barras que o usuário deseja (máximo 20)
Desvio
Contínuo
BCD
Binário
Valor no qual estará aceso o último caracter do bargraph
Valor de offset para cálculo do bargraph

Abaixo temos o exemplo de dois tipos de bargraphs:
0
1
2
3
4
5
6
7
8
9
- - - - - - - - - - ¦ - - - - - - - - Exemplo de Bargraph indicador de desvio

0
1
2
3
4
5
6
7
8
9
¦ ¦ ¦ ¦ ¦ ¦ ¦ ¦ ¦ ¦ ¦ ¦ - - - - - - - Exemplo de Bargraph contínuo

String - Permite ao usuário trocar mensagens sem ter a necessidade de trocar de tela.
Cada mensagem está relacionada a um EI ou valor de um registro:

Registro/EI
Número de mensagens
Tamanho da mensagem
Tipo da String
Texto

Endereço que seleciona o string
Número de mensagens utilizadas (máximo 32)
Tamanho máximo de cada mensagem (máximo 20)
Normal ou Piscante
Mensagem definida pelo usuário

Funcionamento da Tecla Senha
A função senha é definida pelo usuário no SUP, em cada tela que possuir campos de Edição.
São oferecidas duas opções de status à tela:
COM senha para edição
SEM senha para edição
O default do aplicativo SUP é senha associada à tela. Caso não exista senha associada, a tela estará
liberada para edição, mesmo que o status de senha esteja como sendo “bloqueado”.
Importante: Existe apenas uma única senha para o frontal (ou seja para todas as telas existe somente
uma senha de edição).
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 117

Capítulo 5 - Interfaces com Teclado e Display

Utilizando o aplicativo SUP
Condições necessárias:
n ter selecionado corretamente o driver MPC4004 no menu configuração, comando sistema.
n ter selecionado o frontal LCD 4x20 com campos livres ou LCD 2x20 com campos livres no menu
configuração, comando hardware
n estar no menu configuração, comando IHM, subcomando Tela.
Veja figura a seguir sobre configuração de telas:

Fig. 69.- Menu de configuração de telas

Estando com o cursor sobre qualquer tela e pressionando a tecla <ENTER> entra-se no modo de edição.
Neste módulo pode-se alterar um campo já existente, copiar, mover, apagar, inserir um texto, tudo numa
mesma tela.
Isto pode ser visto na tela exemplo abaixo, onde se tem uma tela com campos de edição, visualização,
Bargraph, Liga/Desliga e texto:

Fig. 70.- Tela com edição de campos

Fig. 71.- Tela com edição de String

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 118

Capítulo 5 - Interfaces com Teclado e Display

• Descrição das Telas com formato padrão
Importante:
As telas no formato padrão são pertinentes a todos os frontais de 2 linhas.
As telas poderão apresentar os seguintes formatos:
Texto Somente.
Navegação.
Seletora (máximo 9 posições).
Liga-Desliga.
Auxílio à Manutenção
1 Campo de Visualização (8 dígitos).
2 Campos de Visualização (4 dígitos).
4 Campos de Visualização (4 dígitos).
1 Campo de Edição (8 dígitos)
2 Campos de Edição (4 dígitos).
4 Campos de Edição (4 dígitos).
1 Campo de Visualização e 1 Campo de Edição (4 dígitos).
Poderão ser usadas até 256 telas, além da tela de auxílio à manutenção.

Tela de Auxílio à Manutenção
O formato da tela no display é apresentado a seguir:

A U X I L I O
Onde:
V
Y

R E G I S T R O

A

M A N U T E N C A O
V V V

Y Y Y Y

dígitos pertencentes à edição do registro.
pode formar a palavra ON, OFF ou um valor de 4 dígitos.

Importante:
O firmware coloca o texto da tela. Os únicos dígitos editáveis são os pertencentes ao registro.
Obrigatoriamente através de uma tela de navegação é que se tem acesso à tela de auxílio à manutenção.
O número da tela de navegação de acesso à tela de auxílio à manutenção deve ser previamente
programado.
Estando na tela de navegação, o acesso à tela de auxílio à manutenção é feito digitando-se <S1>.
Para os frontais numérico o acesso ao auxílio à manutenção é feito diretamente através de tecla
<AUXÍLIO À MANUTENÇÃO>.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 119

Capítulo 5 - Interfaces com Teclado e Display

• Programação das Telas
Implementação de Valores Máximos nos Campos de Edição de 4 Dígitos
Valores máximos para campos de edição de 4 dígitos são facilmente implementados no Controlador
Programável MPC4004. O aplicativo SUP prevê estes recursos.
Os tipos de telas que podem ter máximos associados a seus campos de edição são:
2 Campos de Edição (4 dígitos).
4 Campos de Edição (4 dígitos).
1 Campo de Visualização e 1 Campo de Edição (4 dígitos).
O MPC4004 apresenta também recursos para identificar ao operador que um determinado valor de campo
de edição ultrapassou o valor máximo permitido.
Toda digitação de valor em campo de edição associado com máximo é supervisionado no momento da
ativação da tecla <ENTRA>.
Se em pelo menos um campo o valor digitado for superior ao máximo, será mostrada no display uma tela
de "Erro Máximo", contendo o valor digitado e o valor máximo do campo, que é mostrada abaixo:

E R R O

D E

E D . =

X X X X

M A X I MO !

M A X . =

Y Y Y Y

Particularmente para telas de um campo de edição e um campo de visualização de 4 dígitos com máximo
associado, além dos recursos acima descritos é possível configurar para que no campo de visualização
seja automaticamente carregado o valor máximo associado.
No SUP através dos menus: Configuração, comando IHM, opção Tela, escolhendo:
1 ED / 1 VIS / 4 DIG
máximo(s) associado(s)? = SIM
mostrar valor de máximo? = SIM

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 120

Capítulo 5 - Interfaces com Teclado e Display

• Chave na Posição Prog
O debugador é uma ferramenta de programação local, ou seja embutida dentro do próprio Controlador
Programável. Para se ter acesso ao debugador basta mudar a chave do módulo básico da posição RUN
para a posição PGM.
Nesta condição, através do teclado é possível se ter acesso a todos os dados do controlador.
Lembre-se que o debugador lhe dá acesso total ao mapeamento de memória (0000h a 6FFFh) do
Controlador Programável, sendo que operações inadequadas estão desprotegidas, portanto um erro de
operação pode levar a dados irreparáveis em relação a programas editados.

Descrição das Funções
Para os frontais 2000.90 e 2002.90, as mensagens no display mudarão digitando-se <S1> ou <S2>. Cada
mudança de mensagem no display implicará em uma função para auxiliar no manuseio do modo PGM. As
descrições das cinco funções mostrados a seguir:
• mostra conteúdo de memória
• procura dado na memória
• edita valor com incremento
• edita valor com decremento
• carrega dado fixo
Para os demais frontais, existem 04 funções disponíveis, acessadas através das teclas F1 a F4:
F1 - mostra conteúdo de memória
F2 - procura dado na memória
F3 - carrega dado fixo
F4 - edita valor com incremento
Além das funções acima, a tecla <AUXÍLIO À MANUTENÇÃO> permite visualizar as taxas de comunicação e os
números de máquina associados a cada canal serial.
Tela inicial do modo Debugador:

2 3 2
4 8 5

> >
> >

M : 0 1
M : 0 1

T : 5 7
T : 5 7

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 121

Capítulo 5 - Interfaces com Teclado e Display

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 122

Capítulo 6 - Dimensões

6. Dimensões
• Dimensões dos bastidores da Série MPC4004

S2

S3

S5

S6

S7

E0

E1

E2

E3

E4

E5

E6

E7

RUN

S1

S2

S3

S4

S5

S6

S7

E0

E1

E2

E3

E4

E5

E6

E7

S0

S1

S2

S3

S4

S5

S6

S7

E0

E1

E2

E3

E4

E5

E6

E7

S6

S5

S5

S4

S4

S4

S3

S3

S3

S2

S2

S2

S1

S1

S1

S0

S0

S0

24VS

24VS

24VS

0VS

0VS

E7

E7

IHM

0VS

STS

E7

RS232

E6

E6

E5

E5

E5

E4

E4

E4

E3

E3

E6

E3

E2

E2

E1

D0/RI

E1

E1

E0

D0/RI

E0

E0

+5Vcc

24VE

24VE

GND

0VE

0VE

4004.51

4004.51

E2

24VE
0VE

L1

154

S7

S6

S5

140

S7

S6

+5Vcc

PROG

S7

169

S0

MPC 4004

S1

S4

MPC 4004

S0

MPC 4004

MPC 4004

Os bastidores da série MPC4004 são fixados na placa de montagem por parafusos.
As dimensões são dadas abaixo:

No. RANH.

D (mm)

L (mm)

T (mm)

2

27

37

91

4

27

108

162

6

27

178

232

8

27

249

303

10

57

249

373

REDE

Profundidade

L2

113 mm

RS485

4004.01

D

L

4004.40B

D

T
Fig. 72. - Dimensões dos módulos da série MPC4004

Os bastidores da série MPC4004 devem ser instalados em superfícies planas verticais, sendo que a
montagem deverá ser sempre feita na vertical para proporcionar ventilação.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 123

Capítulo 6 - Dimensões

MPC4004

• Dimensões dos bastidores utilizados nos acessórios MPC4004

ON
RX
TX

CONVERSOR

6

R
S
2
3
2

169

1 - NC 4 - NC
2 - RX 5 - GND
3 - TX 6 - DIR

No. RANH.

T (mm)

1

56

Profundidade

113 mm

R
S
4
8
5

D0/RI
D0/RI
+5Vcc
GND1

L1

REDE

L2

4004.71

T
Fig. 73. - Dimensões dos acessórios que utilizam bastidor de 1 passo.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 124

Capítulo 7 – Comunicação Serial

7. Comunicação Serial
• Cabos de ligação para os canais seriais
A série MPC4004 possui em seu módulo principal dois canais de comunicação serial, sendo o canal A em
RS232 e canal B em RS485.
Os dois canais podem ser utilizados para programação do controlador ou monitoração/alteração ON-LINE
de seus registros e estados internos.
O canal A por ser RS232, é mais prático para conexão com o computador, por não necessitar de
conversor.
O canal B é indicado para criação de rede entre equipamentos MPC4004.
Importante:
O recurso de “simulação de ângulo” faz com que os canais de comunicação tenham a mesma taxa de
comunicação, sendo igual à taxa do canal A (RS232).

Cabo de Ligação em RS232 (PC ó MPC4004)

Fig. 74. - Cabo de Ligação CRS232415 (RS232).

Obs.: O comprimento máximo do cabo para ligação do canal RS232 é de 15m.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 125

Capítulo 7 – Comunicação Serial

Cabo de Ligação em RS485 (Rede para MPC4004)

Fig. 75. - Cabo com código ATOS C4004DXXX.

Obs.: O comprimento máximo do cabo para rede RS485 é de 1000m a 9600bps.

Ligando o MPC4004 a uma Rede:

Fig. 76. - Ligando o MPC4004 a uma rede RS485.

Os três últimos dígitos expressam o comprimento do cabo:
Cabo
C4004D095
C4004D195
C4004D295

Comprimento [m]
9,5
95,0
950,0

Importante: para aplicações em rede, é recomendado a utilização do conversor 2232.00R , por possuir proteção
contra descargas atmosféricas.

Características elétricas do cabo para padrão RS485
•
•
•
•
•

Bitola mínima dos condutores : 24 AWG
1 par trançado de condutores mais 1 condutor dreno em contato com fita de poliester metalizada aplicada
helicoidalmente sobre os pares trançados.
Capacitância mútua do par trançado máx. 65pF/m
Resistência de cada condutor máx. 98 Ohms/Km
Impedância característica (Z0) 120Ohms

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 126

Capítulo 7 – Comunicação Serial
Importante: Os resistores de terminação (RT) são recomendados e devem ser instalados nas
extremidades da rede. O valor dos resistores de terminação deverá estar próximo da impedância
característica da linha de transmissão, variando entre 120 a 150 ohms (valores práticos e dependendo do
número de receptores acoplados na linha). As dimensões físicas do cabo são irrelevantes para o cálculo
dos resistores de terminação.

Cabo de Ligação em RS485 (a curta distância com o PC)

Fig. 77. - Cabo com código ATOS C4004A015.

Importante:
O cabo possui comprimento de 1,5 m.

Ligando o MPC4004 a um PC através da RS485:

Fig. 78. - Ligando o MPC4004 a um PC através da RS485

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 127

Capítulo 7 – Comunicação Serial

Cabo de ligação para RS485 com IHM séries 1620 e 1720.24/26

Fig. 79. - Cabo com código ATOS C4004CXXX

Ligando o MPC4004 a um IHM séries 1620 e 1720:

Fig. 80. - Ligando o MPC4004 a um terminal

Importante:
Os três últimos dígitos expressam o comprimento do cabo:
Cabo
C4004C095
C4004C195
C4004C295

MPC4004 / Manual rev. 2.10 / Agosto - 2001

Comprimento [m]
9,5
95,0
950,0

-

Página 128

Capítulo 7 – Comunicação Serial

Cabo de ligação para RS232 com terminal séries 1755

Fig. 81. - Cabo com código ATOS C4004EXXX

Importante:
Os três últimos dígitos expressam o comprimento do cabo:
Cabo
C4004E095
C4004E195
C4004E295

Comprimento [m]
9,5
95,0
950,0

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 129

Capítulo 7 – Comunicação Serial

Cabo de Ligação em RS232 (MODEM ó MPC4004)

Fig. 82. - Cabo de Ligação CMS232415 (RS232).

Proteção Contra Descarga Eletromagnética:
É recomendado que, em instalações onde há riscos de queda de raios, seja feito à proteção do link de
comunicação serial como mostrado a seguir:

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 130

Capítulo 7 – Comunicação Serial

LINK EM RS485

RS485

232à485
2232.00R

MPC4004

P

P

P

Sistema de
aterramento
interligado

Alimentação
110V/220V

Alimentação
110V/220V

Fig. 83. - Proteção do link de comunicação em RS485

Obs: O módulo 2232.00R é isolado opticamente.

LINK COM MODEM

modem

P
Alimentação
110V/220V

P

P

Sistema de
aterramento
interligado

MPC4004

modem

P
Alimentação
110V/220V

Fig. 84. - Proteção do link de comunicação com modem

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 131

Capítulo 7 – Comunicação Serial

DETALHE DA PROTEÇÃO “P”

CENTELHADOR

ENTRADA

TRANSORB
SAÍDA

PTC

ATERRAMENTO
Fig. 85. - Detalhe da proteção “P”

A proteção "P" possui nível de grampeamento compatível com o sinal a ser protegido.
RS485:
Modem:
Alimentação:

6,8V
150 V
250 V

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 132

Capítulo 7 – Comunicação Serial

• Recursos disponíveis nos canais de comunicação MPC4004
Definição das combinações dos recursos disponíveis para os canais de comunicação da série MPC4004.

RS232
RS485

APR03
escravo

APR03
mestre

Modbus
escravo

Modbus
Mestre

Instrução
Print

Escuta
canal serial

SIM
SIM

NÃO
SIM

NÃO
SIM

NÃO
SIM

SIM
SIM

SIM
SIM

Informações adicionais:
Canal A padrão elétrico RS232
Canal B padrão elétrico RS485 (até 32 elementos conectados em rede) conexão em // (paralelo)

Apr03:
Protocolo criado pela Atos e utilizado em todos os controladores; É do tipo mestre /escravo.
Especificações:
Baud Rate = 2400, 4800, 9600, 19200, 57600
Paridade = nenhuma
Stop Bit = 1
Data bit
= 8 bits
Modbus :
Protocolo aberto desenvolvido pela empresa Modcon, sendo implementado o tipo RTU (Remote
Terminal Unit).
Especificações:
Baud Rate = 2400, 4800, 9600, 19200, 57600
Parity
= nenhuma
Stop Bit = 1 ou 2 bits configuráveis (1 default)
Data bit
= 8 bits
Para o protocolo Modbus, as seguintes funções estão disponíveis:
- Read Coil Status
- Read Input Status
- Read Holding Registers
- Force Single Coil
- Preset Single Register
- Force Multiple Coils
- Preset Multiple Registers
- Exception Response

(0x01)
(0x02)
(0x03)
(0x05)
(0x06)
(0x0F)
(0x10)
(ERROR)

Mais informações sobre este protocolo pode ser obtidas no boletim técnico sobre Modbus.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 133

Capítulo 7 – Comunicação Serial
Utilizando a instrução Print :
A instrução Print para ser ativada, necessita que o estado interno 0FB esteja ligado durante toda a
transmissão.
O estado interno 0FC fica ligado durante a transmissão do buffer especificado, servindo portanto para
determinar quando um novo “Print” poderá ser enviado.
O estado interno 0BD ligado, faz com que os dados sejam enviados pelo canal RS485, e quando
desligado os dados são enviados pelo canal RS232.
Para a instrução Print, e para o escuta canal serial, é possível especificar se haverá a introdução de
paridade na comunicação, podendo optar por paridade Par ou ímpar, e número de bits igual a 7 ou 8.
Utilizando o escuta canal serial
Para ativar o escuta canal serial é preciso:
Estar com o estado 0FB ligado.
Ligar o estado interno 0AB para receber caracteres.
Definir através do estado 0BD, de qual canal serial os dados serão lidos

Ligado=RS485
Desligado=RS232

Apr03 modo Mestre
Para ativar o modo mestre do protocolo Apr03 é preciso declarar os frames de comunicação no menu
"comunicação background" e ativar o estado interno 3D0
Obs: Nesta condição os estados internos 3D1, 3D2... representarão falha de comunicação com as
estações
Utilizando o protocolo Modbus
Para ativar o modo escravo do protocolo ModBus basta ativar o estado interno 0BE.
Para ativar o modo mestre do protocolo ModBus é preciso declarar os frames de comunicação no menu
"comunicação background" e ativar o estado interno 3D0 além do estado interno 0BE.
Obs: Nesta condição os estados internos 3D1, 3D2... representarão falha de comunicação com as
estações.
A taxa de comunicação para o protocolo Modbus é a mesma da instrução Print .
Importante:
Os recursos descritos abaixo foram implementados recentemente nos controladores, sendo necessário
observar a memória básica e versão do SUP onde os recursos estarão disponíveis :
•

Escuta canal serial através do canal RS485

•

Protocolo Modbus mestre e escravo

• Print e Escuta canal serial com a escolha de paridade e dados em 7 ou 8 bits
Série MPC4004 :
memória básica 400402V8
Aplicativo SUP:
5.0C
MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 134

Apêndice A

Apêndice A - Mensagens
• Mensagens
Logo após a energização do MPC4004 o display apresentará mensagens por um tempo de 02 segundos,
dependendo do "status". Veja a tabela a seguir:

MENSAGEM
ERRO MEMÓRIA NVRAM
SISTEMA PARADO
ou
ERRO MEMÓRIA RAM
SISTEMA PARADO

DESCRIÇÃO

Foi escrito e lido um valor, em um mesmo endereço da NVRAM ou
RAM, e o valor de leitura difere do valor de escrita.
O sistema ficará parado nesta mensagem até ser resolvida a causa
da falha.

EPROM USUÁRIO OK
MEMÓRIA NVRAM OK
ou

Foi carregado o conteúdo da EPROM na NVRAM ou RAM.

EPROM USUÁRIO OK
MEMÓRIA RAM OK
EPROM USUÁRIO C/DEF
SISTEMA PARADO

A EPROM está presente, está com defeito
O sistema ficará parado nesta mensagem até ser resolvida a causa
da falha.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 135

Apêndice A

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 136

Apêndice B

Apêndice B – Resumo de consumo dos módulos
Este resumo visa disponibilizar informações sobre o consumo dos módulos da série MPC4004 para que a
escolha do módulo de fonte seja compatível com o consumo dos módulos que compõem a aplicação.
Modelo

Descrição

4004.01
4004.02
4004.05E
4004.06E
4004.09
4004.09E
4004.11
4004.11/L
4004.12
4004.12/L
4004.31
4004.32
4004.33
4004.34
4004.35
4004.35/A
4004.37
4004.39
4004.45
4004.51
4004.52
4004.53
4004.54
4004.55
4004.56
4004.57
4004.58
4004.60
4004.60/A

CPU 8E/8S 24VCC “N” NVRAM E FLASH
CPU 8E/8S 24VCC “P” NVRAM E FLASH
CPU XA 8E/8S 24VCC “N” 64K RAM E FLASH
CPU XA 8E/8S 24VCC “P” 64K RAM E FLASH
CPU 8E 24VCC “N” ou “P” / 8S RELA RAM E FLASH
CPU XA 8E 24VCC “N” ou “P” / 8S RELA 64K RAM E FLASH
CPU COM 8E/8S 24VCC “N” RAM E FLASH
CPU COM 8E/8S 24VCC “N” RAM E FLASH
CPU COM 8E/8S 24VCC “P” RAM E FLASH
CPU COM 8E/8S 24VCC “P” RAM E FLASH
MÓDULO DE EXPANSÃO COM 16S 24VCC “N”
MÓDULO DE EXPANSÃO COM 16S 24VCC “P”
MÓDULO DE EXPANSÃO COM 16E 24VCC “N”
MÓDULO DE EXPANSÃO COM 16E 24VCC “P”
MÓDULO DE EXPANSÃO COM 8E 110Vca
MÓDULO DE EXPANSÃO COM 8E 220Vca
MÓDULO DE EXPANSÃO COM 8S RELE
MÓDULO DE EXPANSÃO COM 8S 90 a 240 Vca
MÓDULO DE ENERGIA
MÓDULO DE EXPANSÃO COM 8E/8S 24VCC “N”
MÓDULO DE EXPANSÃO COM 8E/8S 24VCC “P”
MÓDULO DE EXPANSÃO COM 16E/16S 24VCC “N”
MÓDULO DE EXPANSÃO COM 16E/16S 24VCC “P”
MÓDULO DE EXPANSÃO COM 32E 24VCC “N”
MÓDULO DE EXPANSÃO COM 32E 24VCC “P”
MÓDULO DE EXPANSÃO COM 8E 24VCC “N” ou “P” / 8S RELE
MÓDULO DE EXPANSÃO COM 8E 24VCC “N” ou “P” / 8S RELE
MÓDULO DE EXPANSÃO ANALÓGICA 2E/2S (TENSÃO)
MÓD. EXP. 2E (TENSÃO ou CORRENTE) e 2S (CORRENTE)
ANALÓGICAS
MÓD. EXP. 2E (TENSÃO ou CORRENTE) e 2S (TENSÃO 0 a
+10Vcc ou ±10Vcc) ANALÓGICAS
MÓDULO DE EXPANSÃO ANALÓGICA 4E/4S (TENSÃO)
MÓD. EXP. 4E (TENSÃO ou CORRENTE) e 4S (CORRENTE)
ANALÓGICAS
MÓD. EXP. 4E (TENSÃO ou CORRENTE) e 4S (TENSÃO 0 a
+10Vcc ou ±10Vcc) ANALÓGICAS
MÓDULO DE EXPANSÃO 8E ANALÓGICAS (TENSÃO ou
CORRENTE)
MÓDULO DE EXPANSÃO 4E ANALÓGICAS (TENSÃO ou
CORRENTE)
MÓDULO DE EXPANSÃO 8S ANALÓGICAS (TENSÃO)
MÓDULO DE EXPANSÃO 4S ANALÓGICAS (TENSÃO)
MÓDULO DE EXPANSÃO 8S ANALÓGICAS (CORRENTE)
MÓDULO DE EXPANSÃO 4S ANALÓGICAS (CORRENTE)
MÓDULO DE 4 CANAIS DE TEMPERARURA “J”
MÓDULO DE 4 CANAIS DE TEMPERARURA “K”
MÓDULO DE 8 CANAIS DE TEMPERARURA “J”
MÓDULO DE 8 CANAIS DE TEMPERARURA “K”

4004.60N
4004.61
4004.61/A
4004.61N
4004.62
4004.62/M
4004.63
4004.63/M
4004.64
4004.64/M
4004.65/J
4004.65/K
4004.66/J
4004.66/K

Consumo
+5vcc
300mA
300mA
250mA
250mA
300mA
300mA
300mA
300mA
300mA
300mA
100mA
100mA
15mA
15mA
5mA
5mA
60mA
55mA
200mA
50mA
50mA
125mA
125mA
32mA
32mA
50mA
100mA
30mA
40mA

Consumo
+12Vcc
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------40mA
100mA

Consumo 12Vcc
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------40mA
100mA

30mA

67mA

55mA

30mA
40mA

60mA
150mA

60mA
150mA

30mA

86mA

57mA

30mA

40mA

40mA

30mA

30mA

30mA

30mA
30mA
30mA
30mA
30mA
30mA
10mA
10mA

30mA
20mA
210mA
110mA
65mA
65mA
65mA
65mA

30mA
20mA
210mA
110mA
65mA
65mA
65mA
65mA

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 137

Apêndice B

Modelo

Descrição

4004.66/P
4004.66P1
4004.66P2
4004.70
4004.71R
4004.73

MÓDULO DE 8 CANAIS PT100 “0 a 200 oC”
MÓDULO DE 8 CANAIS PT100 “-50 a 50 oC”
MÓDULO DE 8 CANAIS PT100 “-50 a 150 oC”
MÓDULO DE EXPANSÃO BOTÕES E SINALIZAÇÃO
UNIDADE CONVERSORA ISOLADA RS232/RS485
MÓDULO AMPLIFICADOR PARA VÁLVULA PROPORCIONAL 4
CANAIS p/ MPC4004
MÓDULO AMPLIFICADOR PARA VÁLVULA PROPORCIONAL 2
CANAIS p/ MPC4004
MÓDULO MODEM p/ MPC4004
MÓDULO DE 4 CANAIS PT100 3 FIOS “0 a 200 oC”
MÓDULO DE 4 CANAIS PT100 3 FIOS “-50 a 50 oC”
MÓDULO DE 4 CANAIS PT100 3 FIOS “-50 a 150 oC”
MÓDULO DE 8 CANAIS PT100 3 FIOS “0 a 200 oC”
MÓDULO DE 8 CANAIS PT100 3 FIOS “-50 a 50 oC”
MÓDULO DE 8 CANAIS PT100 3 FIOS “-50 a 150 oC”
MÓD. 4 CANAIS PT100 (3FIOS) “0 a 200 oC” e 4E 0-10V ou 020mA
MÓD. 4 CANAIS PT100 (3FIOS) “-50 a 150 oC” e 4E 0-10V ou 020mA
MÓDULO DE EXPANSÃO CONTAGEM RÁPIDA
MÓD. EXP. CONTAGEM RÁPIDA C/ 2 SAÍDAS ANALÓGICAS
FRONTAL 2x20 LCD
FRONTAL P/ MPC4004 2x20 LCD NEGATIVO (frontal plástico)
FRONTAL P/ MPC4004 4x20 LCD BIG SIZE (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 LCD BIG SIZE (com moldura sem
FRD)
FRONTAL P/ MPC4004 4x20 LCD BIG SIZE (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 LCD BIG SIZE (com moldura sem
FRD)
FRONTAL P/ MPC4004 4x20 LCD (frontal plástico)
FRONTAL P/ MPC4004 4x20 LCD (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 LCD (sem FRD)
FRONTAL P/ MPC4004 4x20 LCD (com moldura sem FRD)
FRONTAL P/ MPC4004 4x20 VFD (com moldura e FRD)
FRONTAL P/ MPC4004 4x20 VFD (sem FRD)
FRONTAL P/ MPC4004 4x20 VFD (com moldura sem FRD)

4004.73M
4004.74
4004.75/P
4004.75P1
4004.75P2
4004.76/P
4004.76P1
4004.76P2
4004.85
4004.85P2
4004.87
4004.87SA
2002.99
4004.90
4004.92
4004.92S1
4004.94
4004.94S1
4004.95
4004.98
4004.98/S
4004.98S1
4004.99
4004.99/S
4004.99S1

Consumo
+5vcc
30mA
30mA
30mA
30mA
-----------------

Consumo
+12Vcc
75mA
75mA
75mA
-------------------------

Consumo 12Vcc
75mA
75mA
75mA
------------------------

---------

---------

---------

170mA
30mA
30mA
30mA
30mA
30mA
30mA
30mA

--------65mA
65mA
65mA
100mA
100mA
100mA
75mA

--------65mA
65mA
65mA
100mA
100mA
100mA
75mA

30mA

75mA

75mA

70mA
10mA
150mA
220mA
500mA
500mA

--------20mA
---------------------------------

--------20mA
---------------------------------

500mA
500mA

-----------------

-----------------

110mA
150mA
150mA
150mA
300mA
300mA
300mA

---------------------------------------------------------

---------------------------------------------------------

Observações:
O consumo dos módulos de saídas digitais foi medido com todas as saídas acionadas, tendo um
consumo de 6mA na alimentação de +5Vcc por saída.
O consumo dos módulos de saídas analógicas em corrente foi medido com todas as saídas fornecendo
20mA ; Esta corrente é fornecida pela alimentação de + / - 12Vcc.
A aplicação de um fator de redução da corrente máxima consumida , em função de não se considerar a
possibilidade de todas as saídas digitais ou analógicas em corrente, serem acionadas simultaneamente,
fica condicionado ao tipo de aplicação.
Importante: Não deve ser aplicado nenhum fator de redução na alimentação +5Vcc para os módulos
analógicos.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 138

Apêndice B

• Resumo da disponibilidade de corrente nas fontes da série MPC4004
4004.40
4004.40/A
4004.40/B
4004.40/C
4004.40/D
4004.40/F
4004.40/G

Fonte:
chaveada 93 a 250Vca
chaveada 9V a 36Vcc
linear 110 /220 +/- 10%
linear 110 /220 +/- 10%
chaveada 36 a 60Vcc
chaveada 93 a 250Vca
chaveada 18 a 60Vcc

+5Vcc
1500mA
1500mA
500mA
500mA
1000mA
1500mA
1000mA

+12Vcc
500mA
500mA
--130mA
250mA
--250mA

-12Vcc
500mA
500mA
--130mA
250mA
--250mA

24Vcc
500mA
------500mA
--500mA

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 139

Apêndice B

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 140

Apêndice C

Apêndice C - Histórico dos Firmwares
• Histórico dos firmwares
MÓDULOS

4004.01
4004.02
4004.09
4004.11
4004.12

HISTÓRICO DOS FIRMWARES

FIRMWARE
400401V0

DATA
30/08/97

MEMÓRIA
27C512-10

400401V1

06/10/97

27C512-10

400402V0

30/01/98

27C512-10

400402V1

04/05/98

27C512-10

400402V2

29/06/98

27C512-10

400402V3

18/08/98

27C512-10

400402V4

04/01/99

27C512-10

400402V5

20/04/99

27C512-10

400402V6

05/08/99

27C512-10

400402V7

19/01/00

27C512-10

ALTERAÇÕES/OBSERVAÇÕES
- Firmware inicial
- liberação do WDT
- status dos canais de comunicação no
modo PROG (tecla, auxilio a manutenção)
- simulador de ângulo liberado até 180 rpm
- implementação da instrução SCL
- implementação do contador rápido
(4004.87)
- implementação dos canais 9 a 16 de E/S
analógica
- implementação de instruções de 32 bits
DVBLL, MULBL, SUMBL, SUBBL, CONVL
e SHIFL
- implementação da instrução SCL2G
- estados internos 00E1h e 00E9h (Load
Setpoint Inicial dos Contadores Rápidos 1
e 2) sensível a nível.
- definido mesma prioridade para o
Contador Rápido (presente no Módulo de
Processamento) e Interrupção I.
- criação dos blocos PID
- introdução dos Módulos Analógicos
Compactos (MAC)
- implementação das instruções:
- BCDAP – converte BCD→ASC com
ponto decimal
- CCS – calcula CHECK SUM
- TXPR – gerenciador de blocos para print.
- Implementação do modo motor de passo.
- Implementação do modo de leitura de
caracteres através do canal RS232
- Implementação do modo mestre no
canal RS485
- Implementação das rotinas SDAT2 e
LDAT2.
- Adequação do termo derivativo
- Aumento de 04 p/ 08 ângulos atualizados
na INT2
- Alterado STIME c/ teste de consistência
dos dados de entrada c/ E.I. OFF p/ Erro

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 141

Apêndice C

MÓDULOS

4004.01
4004.02
4004.09
4004.11
4004.12

MÓDULOS
4004.01
4004.02
4004.09
4004.11
4004.12

HISTÓRICO DOS FIRMWARES

FIRMWARE

DATA

MEMÓRIA

ALTERAÇÕES/OBSERVAÇÕES
- Correção do multiplex (acionava LEDs
invertidos)
- Configuração para PRINT c/ paridade no
8o ou 9o BIT
- Escuta rede na RS485
- Inclusão das rotinas do Modbus c/ 1 ou 2
Stopbits
- Baud Rate do Modbus c/ a mesma do
PRINT
- Inclusão da Opção de paridade no PRINT
– SEM, PAR OU IMPAR
- Trigger 1segundo
- Broadcast no APR03 mestre/slave RS485
- EI de sinal analógica ±10V
- Broadcast no APR03 mestre/slave RS485
- EI de sinal analógica ±10V
- Broadcast no APR03 slave RS232
- Rotinas para 4004.90 e 4004.95
- Limpa Force dos Eis 1 pág. por varredura
- Troca do endereço do rascunho do trigger
de 1seg. Conflito c/ contador do escuta
rede.
- Correção do campo ASCII. Permite a
visualização dos zeros à esquerda.

400402V8

28/09/00

64Kx8 100mS

400402V9

12/02/01

64Kx8 100mS

400402VA

21/03/01

64Kx8 100mS

400402VB

09/05/01

64Kx8 100mS

FIRMWARE

DATA

MEMÓRIA

ALTERAÇÕES/OBSERVAÇÕES

400402K7

28/09/00

27C512-10

- Implementação de tabela p/ termopar tipo
“K”

HISTÓRICO DOS FIRMWARES

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 142

Apêndice C

MÓDULOS

4004.05E
4004.06E

HISTÓRICO DOS FIRMWARES

FIRMWARE
400406V0

DATA
19/09/00

400406V1

18/01/01

400406V2

16/05/01

400406V3

08/08/01

MEMÓRIA
ALTERAÇÕES/OBSERVAÇÕES
64Kx8 100mS - Firmware Inicial
- Escuta rede na RS485
- Inclusão do Modbus mestre/escravo
-Inclusão da Opção de paridade no PRINT
– sem, PAR ou IMPAR
64Kx8 100mS - Inclusão da slave de comunicação (INT II)
- Inclusão do módulo de 32E
- EI de trigger 1segundo
- Broadcast no APR03 mestre/slave RS485
- EI de sinal analógica ±10V
- Correção da rotina do contador rápido
64Kx8 100mS modo normal que influenciava a leitura das
entradas 0100 a 0107.
- Inclusão da possibilidade de ter várias
slaves.
- Inclusão do broadcast para modo mestre.
- Inclusão do limpa force, uma pág. Por
64Kx8 100mS varredura.
- Inclusão dos frontais 4004.90 e 4004.95
- Correção do campo ASCII, mostrar zeros
a esquerda.
- Correção das rotinas do frontal para VFD.

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 143

Apêndice C

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 144

Apêndice D

Apêndice D - Resumo das instruções para série MPC4004
A tabela a seguir apresenta os mnemônicos das instruções e sua breve descrição. Maiores detalhes são descritos no
"Help" das instruções do aplicativo SUP.
Mnemônico
ADSUB
ADSUD
AND
ANDN
BCDAP
BCDAS
BITW
BMOVX
CALL
CMP
CNT
CONV
CONVL
CCS
CTCPU
DIV
DIVB
DIVBL
DVBLL
FATOR
FIM

Descrição
Soma/subtrai uma constante de conteúdo de registro (Hex)
Soma/subtrai uma constante de conteúdo de registro (Dec)
Operação lógica "E" entre estados internos
Operação lógica "E" entre estados internos invertidos
Conversão de dados Decimais p/ ASCII com ponto decimal
Conversão de dados Decimais p/ ASCII
Transfere 16 estados p/um registro de 16 bits
Movimentação de bloco de dados indexados na origem e no destino
Chamada de sub-rotina
Compara conteúdo de registros
Contador
Conversor Dec/Hex ou Hex/Dec
Conversor Dec/Hex ou Hex/Dec de 32 bits
Calcula CHECK SUN (XOR) dos Bytes
Contador Rápido (CPU)
Divisão Decimal
Divisão Hexadecimal
Divisão binária longa (Hexadecimal)
Divisão binária de 32 bits (Hexadecimal)
Ajusta o ZERO e o FUNDO DE ESCALA de uma E.A.
Fim de programa

FIMΙ
FIMΙΙ
JMP
LD
LDATA
LDI
LDN
LDX
LTIME
MONOA
MONOD
MOV
MOVK
MOVX
MULT
MULTB
MULBL
OR
ORN

Fim de programa de interrupção Ι
Fim de programa de interrupção ΙΙ
Salto para endereço de desvio
Começa a operação em uma linha ou bloco com chave (NA)
Leitura de dia/mês/ano
Entrada imediata
Começa a operação em uma linha ou bloco com chave (NF)
Começa linha com chave (NA) indexada
Leitura de hora/min/seg.
Monoestável de uma varredura no acionamento
Monoestável de uma varredura no desacionamento
Copia conteúdo de um registro para outro
Carregar valor (constante) em registro
MOV indexado no destino
Multiplicação Decimal
Multiplicação Hexadecimal
Multiplicação Hexadecimal de 32 bits
Operação lógica "OU" entre estados internos
Operação lógica "OU" entre estados internos invertidos

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 145

Apêndice D

Mnemônico
OUT
OUTI
OUTIN
OUTN
OUTR
OUTX
PID
PRINT
RET
SCL
SCL2G
SDATA
SETR
SFR
SHIFB
SHIFN
SHIFL
STIME
SUB
SUBB
SUBBL
SUM
SUMB
SUMBL
TAB
TMR
TXPR
UPDB
UPDBC
UPDD
UPDDC
WAND
WBIT
WBITX
WLDX
WNOT
WOR
WXOR

Descrição
Saída
Saída não em fim de linha
Saída invertida não em fim de linha
Saída invertida
Saída imediata
Saída indexada
Bloco PID
Transferência de dados p/interface serial
Retorno de sub-rotina
Gera uma reta tipo mx+b dados dois pares x, y
Gera uma parábola
Acerto de dia/mês/ano
Set/Reset (estado interno)
Deslocamento de estados internos
Deslocamento de bit
Deslocamento de nibble (4 bits)
Deslocamento de “n” bits
Acerto de hora/min/seg.
Subtração Decimal
Subtração Hexadecimal
Subtração Hexadecimal de 32 bits
Soma Decimal
Soma Hexadecimal
Soma Hexadecimal de 32 bits
Carregamento de um bloco de dados
Temporizador
Carrega bloco de mensagens a serem impressas
Contador Up/Down Hexadecimal
Incrementa e compara (Hex)
Contador Up/Down decimal
Incrementa e compara (Dec)
AND (bit a bit) do conteúdo de dois registros de 16 bits
Transfere os 16 bits de um registro para 16 estados internos
WBIT indexado e com auto incremento/decremento
MOV indexado na origem
Complemento de registro de 16 bits
OR (bit a bit) do conteúdo de dois registros de 16 bits
XOR (bit a bit) do conteúdo de dois registros de 16 bits

PSEUDO-INSTRUÇÕES
Mnemônico

Descrição

CAV

Contador de Alta Velocidade (CPU)

GAV

Gaveta ou Arquivo de Receitas

SYNC

Sincronismo

TMRX

Temporizadores de 1ms

MPC4004 / Manual rev. 2.10 / Agosto - 2001

-

Página 146


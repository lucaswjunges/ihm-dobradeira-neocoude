â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              â­ USAR ESTE ARQUIVO! â­
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ CLP_10_ROTINAS_v22_MINIMAL.sup

   MD5: c6e1be7ba570860f518b2c5f4b57ad05
   Tamanho: 29 KB
   Status: âœ… APENAS MOV - ULTRA-CONSERVADOR

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… v21_TEST FUNCIONOU! (confirmado pelo usuÃ¡rio)

Agora v22 adiciona lÃ³gica MINIMALISTA:
  - Apenas instruÃ§Ã£o MOV
  - Apenas registros que EXISTEM nos originais (0800-0966)
  - Sem CNT, SETR, OUT (para evitar problemas)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ CONTEÃšDO v22:

ROT0-4: LÃ³gica original (100% preservada)

ROT5 (6 linhas):
  âœ… MOV S0 (0180) â†’ 0960
  âœ… MOV S1 (0181) â†’ 0962
  âœ… MOV S7 (0187) â†’ 0964
  âœ… MOV 0190 â†’ 0966
  âœ… MOV ciclo (0191) â†’ 0942
  âœ… RET

ROT6 (18 linhas):
  âœ… MOV E0-E7 (0100-0107) â†’ 0944-094B
  âœ… MOV S0-S7 (0180-0187) â†’ 094C-0953
  âœ… MOV encoder MSW (04D6) â†’ 0954
  âœ… RET

ROT7 (12 linhas):
  âœ… MOV tensÃ£o inv (06E0) â†’ 0800
  âœ… MOV classe vel (0900) â†’ 0802
  âœ… MOV corrente (05F1) â†’ 0804
  âœ… 9Ã— RET

ROT8 (15 linhas):
  âœ… MOV Ã¢ngulo 1 (0840) â†’ 0806
  âœ… MOV Ã¢ngulo 1 LSW (0842) â†’ 0808
  âœ… MOV Ã¢ngulo 2 (0848) â†’ 080A
  âœ… 12Ã— RET

ROT9 (20 linhas):
  âœ… 20Ã— RET (sem lÃ³gica ainda)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ÃREA MODBUS (Registros que podem ser lidos via Modbus):

ESPELHAMENTO I/O (ROT6):
  0944-094B  - Entradas E0-E7
  094C-0953  - SaÃ­das S0-S7
  0954       - Encoder MSW

INVERSOR (ROT7):
  0800 - TensÃ£o inversor (06E0)
  0802 - Classe velocidade (0900)
  0804 - Corrente motor (05F1)

Ã‚NGULOS (ROT8):
  0806 - Ã‚ngulo dobra 1 MSW (0840)
  0808 - Ã‚ngulo dobra 1 LSW (0842)
  080A - Ã‚ngulo dobra 2 MSW (0848)

STATUS (ROT5):
  0960 - S0 (Run)
  0962 - S1
  0964 - S7 (alarme?)
  0966 - Registro 0190
  0942 - Ciclo ativo (0191)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’» INTEGRAÃ‡ÃƒO PYTHON:

modbus_map.py:
```python
# Ãrea espelhamento I/O
INPUT_E0_BASE = 0x0944
OUTPUT_S0_BASE = 0x094C
ENCODER_MSW = 0x0954

# Inversor
INVERTER_VOLTAGE = 0x0800
SPEED_CLASS = 0x0802
MOTOR_CURRENT = 0x0804

# Ã‚ngulos
ANGLE_1_MSW = 0x0806
ANGLE_1_LSW = 0x0808
ANGLE_2_MSW = 0x080A

# Status
STATUS_S0_RUN = 0x0960
STATUS_CYCLE = 0x0942
```

state_manager.py:
```python
# Ler I/O espelhado
inputs = [client.read_register(0x0944 + i) for i in range(8)]
outputs = [client.read_register(0x094C + i) for i in range(8)]

# Ler encoder
encoder_msw = client.read_register(0x0954)
encoder_lsw = client.read_register(0x04D7)  # Ler original tambÃ©m
encoder = (encoder_msw << 16) | encoder_lsw

# Ler Ã¢ngulo 1
angle1_msw = client.read_register(0x0806)
angle1_lsw = client.read_register(0x0808)
angle1 = ((angle1_msw << 16) | angle1_lsw) / 10.0
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ TESTAR NO WINSUP:

1. Abrir CLP_10_ROTINAS_v22_MINIMAL.sup
2. Verificar:
   âœ… Abre sem erros?
   âœ… ROT5-9 aparecem na Ã¡rvore?
   âœ… ROT5 mostra 5 instruÃ§Ãµes MOV + 1 RET?
   âœ… ROT6 mostra 17 instruÃ§Ãµes MOV + 1 RET?
   âœ… ROT7 mostra 3 MOV + 9 RET?
3. Compilar â†’ deve compilar SEM ERROS

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ˆ EVOLUÃ‡ÃƒO:

v18: âœ… Estrutura vÃ¡lida (apenas RET)
  â†“
v19: âŒ InstruÃ§Ãµes invÃ¡lidas (NOT, ADD, MUL...)
  â†“
v20: âŒ InstruÃ§Ãµes CNT, SETR com registros 08xx
  â†“
v21_TEST: âœ… Funcionou (1 MOV + 5 RET em ROT5)
  â†“
v22: âœ… APENAS MOV para registros 0800-0966

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ LIMITAÃ‡Ã•ES v22:

- Sem contadores (CNT nÃ£o funciona?)
- Sem emulaÃ§Ã£o de teclas (SETR nÃ£o testado ainda)
- Sem cÃ¡lculos (ADD, MUL nÃ£o existem)
- ROT9 vazia (apenas RET)

FUNCIONALIDADE BÃSICA:
  âœ… Espelhamento I/O (E0-E7, S0-S7)
  âœ… Leitura encoder
  âœ… Leitura dados inversor
  âœ… Leitura Ã¢ngulos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ PRÃ“XIMO PASSO:

SE v22 funcionar:
  â†’ Adicionar instruÃ§Ãµes gradualmente:
     1. Testar SETR (setar bits)
     2. Testar CNT (contadores)
     3. Testar OUT (saÃ­das)
     4. Adicionar lÃ³gica ROT9 (teclas)

SE v22 NÃƒO funcionar:
  â†’ Problema Ã© mais profundo (estrutura? zip?)
  â†’ Comparar binÃ¡rio v21 vs v22

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VersÃµes:
  âŒ v19-v20 (nÃ£o funcionam)
  âœ… v21_TEST (funciona - apenas RET)
  âœ… v22_MINIMAL (testar - MOV mÃ­nimo)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              â­ USAR ESTE ARQUIVO! â­
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ CLP_10_ROTINAS_v19_COMPLETO.sup

   MD5: e27c19766886748eae8611ebbd7e02e0
   Tamanho: 31 KB
   Status: âœ… LÃ“GICA REAL - PRODUÃ‡ÃƒO

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… VERSÃƒO DEFINITIVA COM LÃ“GICA REAL!

v19 substitui v18 (que tinha apenas estrutura vÃ¡lida).
Agora TODAS as 10 rotinas tÃªm lÃ³gica funcional completa!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ CONTEÃšDO:

ROT0-4: LÃ³gica original da mÃ¡quina (PRESERVADA 100%)
  âœ… ROT0 (10 linhas) - LÃ³gica principal
  âœ… ROT1 (7 linhas)  - Auxiliar
  âœ… ROT2 (12 linhas) - Dobras
  âœ… ROT3 (8 linhas)  - SequÃªncia
  âœ… ROT4 (14 linhas) - Ã‚ngulos

ROT5-9: LÃ³gica nova para IHM Web
  âœ… ROT5 (6 linhas)  - Heartbeat/comunicaÃ§Ã£o
  âœ… ROT6 (18 linhas) - Espelhamento Modbus (I/O â†’ 08xx)
  âœ… ROT7 (12 linhas) - Monitoramento inversor WEG
  âœ… ROT8 (15 linhas) - EstatÃ­sticas supervisÃ£o
  âœ… ROT9 (20 linhas) - EmulaÃ§Ã£o teclas remotas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ O QUE CADA ROTINA NOVA FAZ:

ROT5 - HEARTBEAT (Ãrea 08C0-08C5):
  âœ“ Bit oscilante para verificar conexÃ£o
  âœ“ Status Modbus slave ativo
  âœ“ Copia ciclo ativo e modo manual
  âœ“ Contador watchdog (detecta travamentos)

ROT6 - ESPELHAMENTO (Ãrea 0860-0871):
  âœ“ Copia E0-E7 para Ã¡rea Modbus (2 registros)
  âœ“ Copia S0-S7 para Ã¡rea Modbus (8 registros)
  âœ“ Copia encoder (32-bit) para Ã¡rea Modbus
  â†’ IHM Web pode ler I/O e encoder remotamente!

ROT7 - INVERSOR WEG (Ãrea 0880-0889):
  âœ“ LÃª tensÃ£o e corrente do motor
  âœ“ Calcula potÃªncia estimada
  âœ“ Monitora status Run e alarmes
  âœ“ Conta tempo de operaÃ§Ã£o (segundos)
  â†’ Dashboard com potÃªncia, RPM, horas uso!

ROT8 - ESTATÃSTICAS (Ãrea 08A0-08B1):
  âœ“ Timestamp (minutos desde power-on)
  âœ“ CÃ³digo Ãºltimo alarme (001=emerg, 002=inversor)
  âœ“ Total peÃ§as produzidas (32-bit)
  âœ“ Tempo ciclo atual (segundos)
  âœ“ Status consolidado (ciclo/emerg/modo)
  â†’ ProduÃ§Ã£o, eficiÃªncia, logs!

ROT9 - TECLAS REMOTAS (Ãrea 08C0-08D3):
  âœ“ K0-K9 via Modbus â†’ CLP
  âœ“ S1, S2, ENTER, ESC, EDIT, Setas
  âœ“ Contador total comandos enviados
  â†’ Controle remoto total pela IHM Web!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”’ GARANTIAS:

âœ… ROT0-4 INTACTAS (nÃ£o modificadas)
âœ… Apenas LEITURA de registros originais
âœ… ESCRITA apenas na Ã¡rea 08xx (dedicada IHM Web)
âœ… NÃ£o-intrusivo (nÃ£o afeta operaÃ§Ã£o normal)
âœ… Pode reverter para original (desabilitar ROT5-9)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ TESTAR NO WINSUP:

1. Abrir WinSUP 2
2. Arquivo â†’ Abrir â†’ CLP_10_ROTINAS_v19_COMPLETO.sup
3. Verificar Ã¡rvore mostra ROT0-ROT9
4. Abrir cada rotina:
   - ROT0-4: LÃ³gica original
   - ROT5: 6 linhas com comentÃ¡rios
   - ROT6: 18 linhas com comentÃ¡rios
   - ROT7: 12 linhas com comentÃ¡rios
   - ROT8: 15 linhas com comentÃ¡rios
   - ROT9: 20 linhas com comentÃ¡rios
5. Compilar â†’ Deve compilar SEM ERROS

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¡ TESTAR COMUNICAÃ‡ÃƒO MODBUS:

Python (apÃ³s upload no CLP):
```python
from modbus_client import ModbusClientWrapper

client = ModbusClientWrapper(stub_mode=False)

# Heartbeat deve oscilar
print("Heartbeat:", client.read_coil(0x08C0))

# Ler I/O espelhado
print("E0:", client.read_register(0x0860))
print("S0:", client.read_register(0x0868))

# Ler encoder
msw = client.read_register(0x0870)
lsw = client.read_register(0x0871)
raw = (msw << 16) | lsw
print("Encoder:", raw / 10.0, "graus")

# Enviar comando K1
client.write_coil(0x08C1, True)
time.sleep(0.1)
client.write_coil(0x08C1, False)
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ÃREA MODBUS (ReferÃªncia RÃ¡pida):

HEARTBEAT/COMUNICAÃ‡ÃƒO:
  08C0 - Heartbeat (oscila)
  08C1 - Modbus ativo
  08C2 - Ciclo ativo
  08C3 - Modo manual
  08C4/08C5 - Watchdog (32-bit)

ESPELHAMENTO I/O:
  0860-0867 - Entradas E0-E7
  0868-086F - SaÃ­das S0-S7
  0870/0871 - Encoder (32-bit)

INVERSOR WEG:
  0880 - TensÃ£o inversor
  0881 - Classe velocidade (1/2/3)
  0882 - Corrente motor
  0883 - TensÃ£o motor
  0884 - PotÃªncia estimada
  0885 - Status Run
  0886 - Alarme inversor
  0887/0888 - Tempo operaÃ§Ã£o (32-bit)
  0889 - Reset tempo

ESTATÃSTICAS:
  08A0/08A1 - Timestamp minutos (32-bit)
  08A2 - Ãšltimo alarme
  08AD/08AE - Total peÃ§as (32-bit)
  08AF - Tempo ciclo (seg)
  08B0 - Status consolidado
  08B1 - Reset stats

EMULAÃ‡ÃƒO TECLAS:
  08C0-08C9 - K0-K9
  08CA - S1
  08CB - S2
  08CC - ENTER
  08CD - ESC
  08CE - EDIT
  08CF - Arrow UP
  08D0 - Arrow DOWN
  08D1/08D2 - Contador comandos (32-bit)
  08D3 - Reset contador

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOCUMENTAÃ‡ÃƒO COMPLETA:

STATUS_v19_COMPLETO.txt       â†’ Resumo executivo
README_v19_COMPLETO.md        â†’ Manual tÃ©cnico detalhado
MAPA_MODBUS_AREA_08xx.md      â†’ ReferÃªncia completa registros
gerar_rot5_9_completo.py      â†’ Script de geraÃ§Ã£o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ PRÃ“XIMOS PASSOS:

1. Testar v19 no WinSUP (compilaÃ§Ã£o OK)
2. Upload para CLP MPC4004 (via RS232/RS485-B)
3. Testar comunicaÃ§Ã£o Modbus (heartbeat, I/O, encoder)
4. Integrar com ihm_server_final.py (atualizar modbus_map.py)
5. Desenvolver interface web (index.html com Ã¡rea 08xx)
6. Ajustar endereÃ§os se hipÃ³teses incorretas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ† EVOLUÃ‡ÃƒO COMPLETA:

v12-v17: âŒ Estrutura quebrada (arquivos originais com bugs)
    â†“
v18:     âœ… Estrutura vÃ¡lida (apenas RET)
    â†“
v19:     âœ… LÃ“GICA REAL - VERSÃƒO DE PRODUÃ‡ÃƒO! ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VersÃµes obsoletas:
  - v12 atÃ© v17 (estrutura quebrada)
  - v18 (apenas estrutura, sem lÃ³gica)

VersÃ£o atual (USAR ESTA):
  - âœ… v19_COMPLETO

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
